var Go=Object.defineProperty;var qo=(s,t,e)=>t in s?Go(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var Xt=(s,t,e)=>(qo(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))i(g);new MutationObserver(g=>{for(const d of g)if(d.type==="childList")for(const _ of d.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&i(_)}).observe(document,{childList:!0,subtree:!0});function e(g){const d={};return g.integrity&&(d.integrity=g.integrity),g.referrerPolicy&&(d.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?d.credentials="include":g.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(g){if(g.ep)return;g.ep=!0;const d=e(g);fetch(g.href,d)}})();function vt(){}const Ko=s=>s;function gt(s,t){for(const e in t)s[e]=t[e];return s}function Rs(s){return s()}function Ir(){return Object.create(null)}function de(s){s.forEach(Rs)}function $t(s){return typeof s=="function"}function Et(s,t){return s!=s?t==t:s!==t||s&&typeof s=="object"||typeof s=="function"}function Jo(s){return Object.keys(s).length===0}function wr(s,...t){if(s==null){for(const i of t)i(void 0);return vt}const e=s.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function ee(s){let t;return wr(s,e=>t=e)(),t}function Qt(s,t,e){s.$$.on_destroy.push(wr(t,e))}function zt(s,t,e,i){if(s){const g=js(s,t,e,i);return s[0](g)}}function js(s,t,e,i){return s[1]&&i?gt(e.ctx.slice(),s[1](i(t))):e.ctx}function Yt(s,t,e,i){if(s[2]&&i){const g=s[2](i(e));if(t.dirty===void 0)return g;if(typeof g=="object"){const d=[],_=Math.max(t.dirty.length,g.length);for(let u=0;u<_;u+=1)d[u]=t.dirty[u]|g[u];return d}return t.dirty|g}return t.dirty}function Ht(s,t,e,i,g,d){if(g){const _=js(t,e,i,d);s.p(_,g)}}function Vt(s){if(s.ctx.length>32){const t=[],e=s.ctx.length/32;for(let i=0;i<e;i++)t[i]=-1;return t}return-1}function yt(s){const t={};for(const e in s)e[0]!=="$"&&(t[e]=s[e]);return t}function Ct(s,t){const e={};t=new Set(t);for(const i in s)!t.has(i)&&i[0]!=="$"&&(e[i]=s[i]);return e}function Bs(s){const t={};for(const e in s)t[e]=!0;return t}function ie(s,t,e){return s.set(e),t}function Wt(s){return s&&$t(s.destroy)?s.destroy:vt}const Ns=typeof window<"u";let Qo=Ns?()=>window.performance.now():()=>Date.now(),Tr=Ns?s=>requestAnimationFrame(s):vt;const He=new Set;function Xs(s){He.forEach(t=>{t.c(s)||(He.delete(t),t.f())}),He.size!==0&&Tr(Xs)}function Zo(s){let t;return He.size===0&&Tr(Xs),{promise:new Promise(e=>{He.add(t={c:s,f:e})}),abort(){He.delete(t)}}}function ut(s,t){s.appendChild(t)}function Ws(s){if(!s)return document;const t=s.getRootNode?s.getRootNode():s.ownerDocument;return t&&t.host?t:s.ownerDocument}function $o(s){const t=mt("style");return t.textContent="/* empty */",ta(Ws(s),t),t.sheet}function ta(s,t){return ut(s.head||s,t),t.sheet}function st(s,t,e){s.insertBefore(t,e||null)}function it(s){s.parentNode&&s.parentNode.removeChild(s)}function ea(s,t){for(let e=0;e<s.length;e+=1)s[e]&&s[e].d(t)}function mt(s){return document.createElement(s)}function Pt(s){return document.createTextNode(s)}function ft(){return Pt(" ")}function oe(){return Pt("")}function Me(s,t,e,i){return s.addEventListener(t,e,i),()=>s.removeEventListener(t,e,i)}function zs(s){return function(t){return t.preventDefault(),s.call(this,t)}}function ia(s){return function(t){return t.stopPropagation(),s.call(this,t)}}function St(s,t,e){e==null?s.removeAttribute(t):s.getAttribute(t)!==e&&s.setAttribute(t,e)}const na=["width","height"];function ni(s,t){const e=Object.getOwnPropertyDescriptors(s.__proto__);for(const i in t)t[i]==null?s.removeAttribute(i):i==="style"?s.style.cssText=t[i]:i==="__value"?s.value=s[i]=t[i]:e[i]&&e[i].set&&na.indexOf(i)===-1?s[i]=t[i]:St(s,i,t[i])}function ra(s,t){Object.keys(t).forEach(e=>{$e(s,e,t[e])})}function $e(s,t,e){t in s?s[t]=typeof s[t]=="boolean"&&e===""?!0:e:St(s,t,e)}function Oi(s){return/-/.test(s)?ra:ni}function sa(s){return Array.from(s.childNodes)}function ui(s,t){t=""+t,s.data!==t&&(s.data=t)}function ki(s,t){s.value=t??""}let yi;function oa(){if(yi===void 0){yi=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{yi=!0}}return yi}function aa(s,t){getComputedStyle(s).position==="static"&&(s.style.position="relative");const i=mt("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const g=oa();let d;return g?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",d=Me(window,"message",_=>{_.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{d=Me(i.contentWindow,"resize",t),t()}),ut(s,i),()=>{(g||d&&i.contentWindow)&&d(),it(i)}}function Ys(s,t,{bubbles:e=!1,cancelable:i=!1}={}){return new CustomEvent(s,{detail:t,bubbles:e,cancelable:i})}const Pi=new Map;let Ei=0;function la(s){let t=5381,e=s.length;for(;e--;)t=(t<<5)-t^s.charCodeAt(e);return t>>>0}function ca(s,t){const e={stylesheet:$o(t),rules:{}};return Pi.set(s,e),e}function Rr(s,t,e,i,g,d,_,u=0){const n=16.666/i;let c=`{
`;for(let a=0;a<=1;a+=n){const p=t+(e-t)*d(a);c+=a*100+`%{${_(p,1-p)}}
`}const h=c+`100% {${_(e,1-e)}}
}`,r=`__svelte_${la(h)}_${u}`,l=Ws(s),{stylesheet:o,rules:f}=Pi.get(l)||ca(l,s);f[r]||(f[r]=!0,o.insertRule(`@keyframes ${r} ${h}`,o.cssRules.length));const m=s.style.animation||"";return s.style.animation=`${m?`${m}, `:""}${r} ${i}ms linear ${g}ms 1 both`,Ei+=1,r}function fa(s,t){const e=(s.style.animation||"").split(", "),i=e.filter(t?d=>d.indexOf(t)<0:d=>d.indexOf("__svelte")===-1),g=e.length-i.length;g&&(s.style.animation=i.join(", "),Ei-=g,Ei||ua())}function ua(){Tr(()=>{Ei||(Pi.forEach(s=>{const{ownerNode:t}=s.stylesheet;t&&it(t)}),Pi.clear())})}let ri;function ti(s){ri=s}function Rt(){if(!ri)throw new Error("Function called outside component initialization");return ri}function Le(s){Rt().$$.on_mount.push(s)}function hi(){const s=Rt();return(t,e,{cancelable:i=!1}={})=>{const g=s.$$.callbacks[t];if(g){const d=Ys(t,e,{cancelable:i});return g.slice().forEach(_=>{_.call(s,d)}),!d.defaultPrevented}return!0}}function ha(s,t){return Rt().$$.context.set(s,t),t}function da(s){return Rt().$$.context.get(s)}function Hs(s,t){const e=s.$$.callbacks[t.type];e&&e.slice().forEach(i=>i.call(this,t))}const Ye=[],Ut=[];let Ve=[];const cr=[],ga=Promise.resolve();let fr=!1;function ma(){fr||(fr=!0,ga.then(Vs))}function te(s){Ve.push(s)}function ne(s){cr.push(s)}const Zn=new Set;let Xe=0;function Vs(){if(Xe!==0)return;const s=ri;do{try{for(;Xe<Ye.length;){const t=Ye[Xe];Xe++,ti(t),pa(t.$$)}}catch(t){throw Ye.length=0,Xe=0,t}for(ti(null),Ye.length=0,Xe=0;Ut.length;)Ut.pop()();for(let t=0;t<Ve.length;t+=1){const e=Ve[t];Zn.has(e)||(Zn.add(e),e())}Ve.length=0}while(Ye.length);for(;cr.length;)cr.pop()();fr=!1,Zn.clear(),ti(s)}function pa(s){if(s.fragment!==null){s.update(),de(s.before_update);const t=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,t),s.after_update.forEach(te)}}function va(s){const t=[],e=[];Ve.forEach(i=>s.indexOf(i)===-1?t.push(i):e.push(i)),e.forEach(i=>i()),Ve=t}let Ke;function _a(){return Ke||(Ke=Promise.resolve(),Ke.then(()=>{Ke=null})),Ke}function $n(s,t,e){s.dispatchEvent(Ys(`${t?"intro":"outro"}${e}`))}const wi=new Set;let _e;function Bt(){_e={r:0,c:[],p:_e}}function Nt(){_e.r||de(_e.c),_e=_e.p}function P(s,t){s&&s.i&&(wi.delete(s),s.i(t))}function M(s,t,e,i){if(s&&s.o){if(wi.has(s))return;wi.add(s),_e.c.push(()=>{wi.delete(s),i&&(e&&s.d(1),i())}),s.o(t)}else i&&i()}const ba={duration:0};function qt(s,t,e,i){let d=t(s,e,{direction:"both"}),_=i?0:1,u=null,n=null,c=null,h;function r(){c&&fa(s,c)}function l(f,m){const a=f.b-_;return m*=Math.abs(a),{a:_,b:f.b,d:a,duration:m,start:f.start,end:f.start+m,group:f.group}}function o(f){const{delay:m=0,duration:a=300,easing:p=Ko,tick:v=vt,css:b}=d||ba,y={start:Qo()+m,b:f};f||(y.group=_e,_e.r+=1),"inert"in s&&(f?h!==void 0&&(s.inert=h):(h=s.inert,s.inert=!0)),u||n?n=y:(b&&(r(),c=Rr(s,_,f,a,m,p,b)),f&&v(0,1),u=l(y,a),te(()=>$n(s,f,"start")),Zo(C=>{if(n&&C>n.start&&(u=l(n,a),n=null,$n(s,u.b,"start"),b&&(r(),c=Rr(s,_,u.b,u.duration,0,p,d.css))),u){if(C>=u.end)v(_=u.b,1-_),$n(s,u.b,"end"),n||(u.b?r():--u.group.r||de(u.group.c)),u=null;else if(C>=u.start){const S=C-u.start;_=u.a+u.d*p(S/u.duration),v(_,1-_)}}return!!(u||n)}))}return{run(f){$t(d)?_a().then(()=>{d=d({direction:f?"in":"out"}),o(f)}):o(f)},end(){r(),u=n=null}}}function jr(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Lt(s,t){const e={},i={},g={$$scope:1};let d=s.length;for(;d--;){const _=s[d],u=t[d];if(u){for(const n in _)n in u||(i[n]=1);for(const n in u)g[n]||(e[n]=u[n],g[n]=1);s[d]=u}else for(const n in _)g[n]=1}for(const _ in i)_ in e||(e[_]=void 0);return e}function kt(s){return typeof s=="object"&&s!==null?s:{}}function re(s,t,e){const i=s.$$.props[t];i!==void 0&&(s.$$.bound[i]=e,e(s.$$.ctx[i]))}function B(s){s&&s.c()}function R(s,t,e){const{fragment:i,after_update:g}=s.$$;i&&i.m(t,e),te(()=>{const d=s.$$.on_mount.map(Rs).filter($t);s.$$.on_destroy?s.$$.on_destroy.push(...d):de(d),s.$$.on_mount=[]}),g.forEach(te)}function j(s,t){const e=s.$$;e.fragment!==null&&(va(e.after_update),de(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function ya(s,t){s.$$.dirty[0]===-1&&(Ye.push(s),ma(),s.$$.dirty.fill(0)),s.$$.dirty[t/31|0]|=1<<t%31}function At(s,t,e,i,g,d,_=null,u=[-1]){const n=ri;ti(s);const c=s.$$={fragment:null,ctx:[],props:d,update:vt,not_equal:g,bound:Ir(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(n?n.$$.context:[])),callbacks:Ir(),dirty:u,skip_bound:!1,root:t.target||n.$$.root};_&&_(c.root);let h=!1;if(c.ctx=e?e(s,t.props||{},(r,l,...o)=>{const f=o.length?o[0]:l;return c.ctx&&g(c.ctx[r],c.ctx[r]=f)&&(!c.skip_bound&&c.bound[r]&&c.bound[r](f),h&&ya(s,r)),l}):[],c.update(),h=!0,de(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const r=sa(t.target);c.fragment&&c.fragment.l(r),r.forEach(it)}else c.fragment&&c.fragment.c();t.intro&&P(s.$$.fragment),R(s,t.target,t.anchor),Vs()}ti(n)}class Mt{constructor(){Xt(this,"$$");Xt(this,"$$set")}$destroy(){j(this,1),this.$destroy=vt}$on(t,e){if(!$t(e))return vt;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const g=i.indexOf(e);g!==-1&&i.splice(g,1)}}$set(t){this.$$set&&!Jo(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ca="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ca);const Sa="/call/assets/tabler.min-e4d0db7f.css",We=[];function ce(s,t=vt){let e;const i=new Set;function g(u){if(Et(s,u)&&(s=u,e)){const n=!We.length;for(const c of i)c[1](),We.push(c,s);if(n){for(let c=0;c<We.length;c+=2)We[c][0](We[c+1]);We.length=0}}}function d(u){g(u(s))}function _(u,n=vt){const c=[u,n];return i.add(c),i.size===1&&(e=t(g,d)||vt),u(s),()=>{i.delete(c),i.size===0&&e&&(e(),e=null)}}return{set:g,update:d,subscribe:_}}var Ai=function(){return Ai=Object.assign||function(t){for(var e,i=1,g=arguments.length;i<g;i++){e=arguments[i];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(t[d]=e[d])}return t},Ai.apply(this,arguments)};function wa(s){return s.toLowerCase()}var Ta=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],xa=/[^A-Z0-9]+/gi;function Oa(s,t){t===void 0&&(t={});for(var e=t.splitRegexp,i=e===void 0?Ta:e,g=t.stripRegexp,d=g===void 0?xa:g,_=t.transform,u=_===void 0?wa:_,n=t.delimiter,c=n===void 0?" ":n,h=Br(Br(s,i,"$1\0$2"),d,"\0"),r=0,l=h.length;h.charAt(r)==="\0";)r++;for(;h.charAt(l-1)==="\0";)l--;return h.slice(r,l).split("\0").map(u).join(c)}function Br(s,t,e){return t instanceof RegExp?s.replace(t,e):t.reduce(function(i,g){return i.replace(g,e)},s)}function ka(s,t){return t===void 0&&(t={}),Oa(s,Ai({delimiter:"."},t))}function Nr(s,t){return t===void 0&&(t={}),ka(s,Ai({delimiter:"-"},t))}const Pa="y",we=(s,t,e)=>{if(!s)return;s=Nr(s);const i=`${Pa}-${s}`,g=[i];if(t){const d=Object.entries(t);for(const[_,u]of d){const n=Nr(_);if(!(typeof u>"u"||u===!1))if(u===!0)g.push(`${i}-${n}`);else if(typeof u=="number"||typeof u=="string")g.push(`${i}-${n}-${u}`);else continue}}return e&&g.push(e),g.join(" ")||void 0};function Xr(s,t){var e;return console.log(t),typeof t>"u"?"":(e=we(s,{show:t}))==null?void 0:e.split(" ")[1]}function Ea({element:s,componentName:t,show:e}){if(typeof window>"u")return;let g=getComputedStyle(s).getPropertyValue("--show-config").trim()??"default",d=typeof e<"u"?e?"opened":"closed":void 0,_,u=" "+Xr(t,d);const{subscribe:n,set:c}=ce({classes:u,styles:""});function h(m){clearTimeout(_),d=m;let a=" "+Xr(t,d),p="";g==="height"&&(["open","closing"].includes(d)&&(p="max-height: 0;"),["opening","close"].includes(d)&&(p=`max-height: ${s.scrollHeight}px;`),["opened","closed"].includes(d)&&(p="")),c({styles:p,classes:a})}function r(){try{const m=window.getComputedStyle(s),a=[m.animationDelay,m.transitionDelay,m.animationDuration,m.transitionDuration].map((p="0s")=>parseFloat(p)*(/ms/g.test(p)?1:1e3));return Math.max(...a.slice(0,2))+Math.max(...a.slice(2))}catch{return 0}}function l(m){requestAnimationFrame(()=>setTimeout(m))}function o(){d!=="opened"&&l(()=>{h("open"),l(()=>{h("opening"),l(()=>{_=setTimeout(()=>{e=void 0,h("opened")},r())})})})}function f(){d!=="closed"&&l(()=>{h("close"),l(()=>{h("closing"),l(()=>{_=setTimeout(()=>{e=void 0,h("closed")},r())})})})}return{enter:o,leave:f,subscribe:n}}const ur="!",Aa=new RegExp(`^[^${ur}]+(?:${ur}(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$`);function ze(s,t=[]){let e;const i=[];s.$on=(d,_)=>{const u=d;let n=()=>{};for(const c of t){if(typeof c=="string"&&c===u){const h=s.$$.callbacks[u]||(s.$$.callbacks[u]=[]);return h.push(_),()=>{const r=h.indexOf(_);r!==-1&&h.splice(r,1)}}if(typeof c=="object"&&c.name===u){const h=_;_=(...r)=>{typeof c=="object"&&c.shouldExclude()||h(...r)}}}return e?n=e(u,_):i.push([u,_]),()=>{n()}};function g(d){Hs(s,d)}return d=>{const _=[],u={};e=(n,c)=>{let h=n,r=c,l=!1;if(h.match(Aa)){const a=h.split(ur);h=a[0];const p=Object.fromEntries(a.slice(1).map(v=>[v,!0]));p.passive&&(l=l||{},l.passive=!0),p.nonpassive&&(l=l||{},l.passive=!1),p.capture&&(l=l||{},l.capture=!0),p.once&&(l=l||{},l.once=!0),p.preventDefault&&(r=zs(r)),p.stopPropagation&&(r=ia(r))}const f=Me(d,h,r,l),m=()=>{f();const a=_.indexOf(m);a>-1&&_.splice(a,1)};return _.push(m),h in u||(u[h]=Me(d,h,g)),m};for(let n=0;n<i.length;n++)e(i[n][0],i[n][1]);return{destroy:()=>{for(let n=0;n<_.length;n++)_[n]();for(const n of Object.entries(u))n[1]()}}}}function Ma(s){let t=s[2],e,i=s[2]&&tr(s);return{c(){i&&i.c(),e=oe()},m(g,d){i&&i.m(g,d),st(g,e,d)},p(g,d){g[2]?t?Et(t,g[2])?(i.d(1),i=tr(g),t=g[2],i.c(),i.m(e.parentNode,e)):i.p(g,d):(i=tr(g),t=g[2],i.c(),i.m(e.parentNode,e)):t&&(i.d(1),i=null,t=g[2])},i:vt,o:vt,d(g){g&&it(e),i&&i.d(g)}}}function Da(s){let t,e,i,g=[s[12],s[4]],d={};for(let _=0;_<g.length;_+=1)d=gt(d,g[_]);return{c(){t=mt("textarea"),ni(t,d)},m(_,u){st(_,t,u),t.autofocus&&t.focus(),s[144](t),ki(t,s[1]),e||(i=[Wt(s[6].call(null,t)),Wt(s[7].call(null,t)),Wt(s[8].call(null,t)),Wt(s[9].call(null,t)),Wt(s[10].call(null,t)),Wt(s[5].call(null,t)),Me(t,"input",s[145])],e=!0)},p(_,u){ni(t,d=Lt(g,[u[0]&4096&&_[12],u[0]&16&&_[4]])),u[0]&2&&ki(t,_[1])},i:vt,o:vt,d(_){_&&it(t),s[144](null),e=!1,de(i)}}}function La(s){let t,e,i,g=[s[12],s[4]],d={};for(let _=0;_<g.length;_+=1)d=gt(d,g[_]);return{c(){t=mt("input"),ni(t,d)},m(_,u){st(_,t,u),t.autofocus&&t.focus(),s[142](t),ki(t,s[1]),e||(i=[Wt(s[6].call(null,t)),Wt(s[7].call(null,t)),Wt(s[8].call(null,t)),Wt(s[9].call(null,t)),Wt(s[10].call(null,t)),Wt(s[5].call(null,t)),Me(t,"input",s[143])],e=!0)},p(_,u){ni(t,d=Lt(g,[u[0]&4096&&_[12],u[0]&16&&_[4]])),u[0]&2&&t.value!==_[1]&&ki(t,_[1])},i:vt,o:vt,d(_){_&&it(t),s[142](null),e=!1,de(i)}}}function Fa(s){let t=s[2],e,i,g=s[2]&&er(s);return{c(){g&&g.c(),e=oe()},m(d,_){g&&g.m(d,_),st(d,e,_),i=!0},p(d,_){d[2]?t?Et(t,d[2])?(g.d(1),g=er(d),t=d[2],g.c(),g.m(e.parentNode,e)):g.p(d,_):(g=er(d),t=d[2],g.c(),g.m(e.parentNode,e)):t&&(g.d(1),g=null,t=d[2])},i(d){i||(P(g,d),i=!0)},o(d){M(g,d),i=!1},d(d){d&&it(e),g&&g.d(d)}}}function tr(s){let t,e,i,g=[s[12],s[4]],d={};for(let _=0;_<g.length;_+=1)d=gt(d,g[_]);return{c(){t=mt(s[2]),Oi(s[2])(t,d)},m(_,u){st(_,t,u),s[146](t),e||(i=[Wt(s[6].call(null,t)),Wt(s[7].call(null,t)),Wt(s[8].call(null,t)),Wt(s[9].call(null,t)),Wt(s[10].call(null,t)),Wt(s[5].call(null,t))],e=!0)},p(_,u){Oi(_[2])(t,d=Lt(g,[u[0]&4096&&_[12],u[0]&16&&_[4]]))},d(_){_&&it(t),s[146](null),e=!1,de(i)}}}function er(s){let t,e,i,g;const d=s[140].default,_=zt(d,s,s[139],null);let u=[s[12],s[4]],n={};for(let c=0;c<u.length;c+=1)n=gt(n,u[c]);return{c(){t=mt(s[2]),_&&_.c(),Oi(s[2])(t,n)},m(c,h){st(c,t,h),_&&_.m(t,null),s[141](t),e=!0,i||(g=[Wt(s[6].call(null,t)),Wt(s[7].call(null,t)),Wt(s[8].call(null,t)),Wt(s[9].call(null,t)),Wt(s[10].call(null,t)),Wt(s[5].call(null,t))],i=!0)},p(c,h){_&&_.p&&(!e||h[4]&32768)&&Ht(_,d,c,c[139],e?Yt(d,c[139],h,null):Vt(c[139]),null),Oi(c[2])(t,n=Lt(u,[h[0]&4096&&c[12],h[0]&16&&c[4]]))},i(c){e||(P(_,c),e=!0)},o(c){M(_,c),e=!1},d(c){c&&it(t),_&&_.d(c),s[141](null),i=!1,de(g)}}}function Ia(s){let t,e,i,g;const d=[Fa,La,Da,Ma],_=[];function u(n,c){return n[11].default?0:n[2]==="input"?1:n[2]==="textarea"?2:3}return t=u(s),e=_[t]=d[t](s),{c(){e.c(),i=oe()},m(n,c){_[t].m(n,c),st(n,i,c),g=!0},p(n,c){let h=t;t=u(n),t===h?_[t].p(n,c):(Bt(),M(_[h],1,1,()=>{_[h]=null}),Nt(),e=_[t],e?e.p(n,c):(e=_[t]=d[t](n),e.c()),P(e,1),e.m(i.parentNode,i))},i(n){g||(P(e),g=!0)},o(n){M(e),g=!1},d(n){n&&it(i),_[t].d(n)}}}let Ra=0;const ir="el",ja="div";function Ba(s,t,e){const i=["element","componentName","id","tag","cssProps","value","title","tabindex","role","ariaCurrent","ariaLabel","ariaValuenow","style","show","components","gap","vAlign","shadow","hidden","bgColor","bgGradient","bgOpacity","border","borderTop","borderStart","borderEnd","borderBottom","borderColor","borderRadius","borderRoundSize","borderOpacity","p","pt","pb","ps","pe","px","py","m","mt","mb","ms","me","mx","my","clearfix","ratio","sticky","fixed","d","dSm","dMd","dLg","dXl","dXxl","dPrint","w","h","mw","mh","position","top","start","bottom","end","textColor","textAlign","textAlignSm","textAlignMd","textAlignLg","textAlignXl","textWrap","textTransform","textDecoration","lineHeight","textMuted","textLead","textHeading","textTruncate","textOpacity","fontSize","fontWeight","fontStyle","float","floatSm","floatMd","floatLg","floatXl","floatXxl","container","col","colSm","colMd","colLg","colXl","colXxl","order","orderSm","orderMd","orderLg","orderXl","orderXxl","offset","offsetSm","offsetMd","offsetLg","offsetXl","offsetXxl","row","rowCols","rowColsSm","rowColsMd","rowColsLg","rowColsXl","rowColsXxl","g","gSm","gMd","gLg","gXl","gXxl","gx","gy","alignItems","alignSelf","justifyContent"];let g=Ct(t,i),d,_=vt,u=()=>(_(),_=wr(V,A=>e(138,d=A)),V);s.$$.on_destroy.push(()=>_());let{$$slots:n={},$$scope:c}=t;const h=Bs(n);let{element:r=void 0}=t,{componentName:l=ir}=t,{id:o=l+"_"+Ra++}=t,{tag:f=ja}=t,{cssProps:m={}}=t,{value:a=void 0}=t,{title:p=void 0}=t,{tabindex:v=void 0}=t,{role:b=void 0}=t,{ariaCurrent:y=void 0}=t,{ariaLabel:C=void 0}=t,{ariaValuenow:S=void 0}=t,{style:w=void 0}=t,{show:k=void 0}=t,{components:F=[]}=t,V;u();let z,Y,et={},{gap:H=void 0}=t,{vAlign:Q=void 0}=t,{shadow:ct=void 0}=t,{hidden:G=void 0}=t,{bgColor:lt=void 0}=t,{bgGradient:T=void 0}=t,{bgOpacity:L=void 0}=t,{border:D=void 0}=t,{borderTop:E=void 0}=t,{borderStart:U=void 0}=t,{borderEnd:x=void 0}=t,{borderBottom:O=void 0}=t,{borderColor:I=void 0}=t,{borderRadius:W=void 0}=t,{borderRoundSize:Z=void 0}=t,{borderOpacity:q=void 0}=t,{p:nt=void 0}=t,{pt:at=void 0}=t,{pb:ht=void 0}=t,{ps:J=void 0}=t,{pe:N=void 0}=t,{px:tt=void 0}=t,{py:$=void 0}=t,{m:K=void 0}=t,{mt:rt=void 0}=t,{mb:dt=void 0}=t,{ms:_t=void 0}=t,{me:ot=void 0}=t,{mx:X=void 0}=t,{my:pt=void 0}=t,{clearfix:bt=void 0}=t,{ratio:wt=void 0}=t,{sticky:Dt=void 0}=t,{fixed:Ot=void 0}=t,{d:Gt=void 0}=t,{dSm:It=void 0}=t,{dMd:Zt=void 0}=t,{dLg:ae=void 0}=t,{dXl:Jt=void 0}=t,{dXxl:ge=void 0}=t,{dPrint:me=void 0}=t,{w:pe=void 0}=t,{h:Se=void 0}=t,{mw:Pe=void 0}=t,{mh:Fe=void 0}=t,{position:Ee=void 0}=t,{top:Ie=void 0}=t,{start:Re=void 0}=t,{bottom:je=void 0}=t,{end:Be=void 0}=t,{textColor:Ne=void 0}=t,{textAlign:Vi=void 0}=t,{textAlignSm:Ui=void 0}=t,{textAlignMd:Gi=void 0}=t,{textAlignLg:qi=void 0}=t,{textAlignXl:Ki=void 0}=t,{textWrap:Ji=void 0}=t,{textTransform:Qi=void 0}=t,{textDecoration:Zi=void 0}=t,{lineHeight:$i=void 0}=t,{textMuted:tn=void 0}=t,{textLead:en=void 0}=t,{textHeading:nn=void 0}=t,{textTruncate:rn=void 0}=t,{textOpacity:sn=void 0}=t,{fontSize:on=void 0}=t,{fontWeight:an=void 0}=t,{fontStyle:ln=void 0}=t,{float:cn=void 0}=t,{floatSm:fn=void 0}=t,{floatMd:un=void 0}=t,{floatLg:hn=void 0}=t,{floatXl:dn=void 0}=t,{floatXxl:gn=void 0}=t,{container:mn=void 0}=t,{col:pn=void 0}=t,{colSm:vn=void 0}=t,{colMd:_n=void 0}=t,{colLg:bn=void 0}=t,{colXl:yn=void 0}=t,{colXxl:Cn=void 0}=t,{order:Sn=void 0}=t,{orderSm:wn=void 0}=t,{orderMd:Tn=void 0}=t,{orderLg:xn=void 0}=t,{orderXl:On=void 0}=t,{orderXxl:kn=void 0}=t,{offset:Pn=void 0}=t,{offsetSm:En=void 0}=t,{offsetMd:An=void 0}=t,{offsetLg:Mn=void 0}=t,{offsetXl:Dn=void 0}=t,{offsetXxl:Ln=void 0}=t,{row:Fn=void 0}=t,{rowCols:In=void 0}=t,{rowColsSm:Rn=void 0}=t,{rowColsMd:jn=void 0}=t,{rowColsLg:Bn=void 0}=t,{rowColsXl:Nn=void 0}=t,{rowColsXxl:Xn=void 0}=t,{g:Wn=void 0}=t,{gSm:zn=void 0}=t,{gMd:Yn=void 0}=t,{gLg:Hn=void 0}=t,{gXl:Vn=void 0}=t,{gXxl:Un=void 0}=t,{gx:Gn=void 0}=t,{gy:qn=void 0}=t,{alignItems:Kn=void 0}=t,{alignSelf:Jn=void 0}=t,{justifyContent:Qn=void 0}=t;const Fo=ze(Rt()),Io=F!=null&&F[0]?ze(F[0].component,F[0].except):vt,Ro=F!=null&&F[1]?ze(F[1].component,F[1].except):vt,jo=F!=null&&F[2]?ze(F[2].component,F[2].except):vt,Bo=F!=null&&F[3]?ze(F[3].component,F[3].except):vt,No=F!=null&&F[4]?ze(F[4].component,F[4].except):vt;Le(()=>{r&&u(e(3,V=Ea({element:r,componentName:l,show:k})))});function Xo(A){Ut[A?"unshift":"push"](()=>{r=A,e(0,r)})}function Wo(A){Ut[A?"unshift":"push"](()=>{r=A,e(0,r)})}function zo(){a=this.value,e(1,a)}function Yo(A){Ut[A?"unshift":"push"](()=>{r=A,e(0,r)})}function Ho(){a=this.value,e(1,a)}function Vo(A){Ut[A?"unshift":"push"](()=>{r=A,e(0,r)})}return s.$$set=A=>{e(147,t=gt(gt({},t),yt(A))),e(12,g=Ct(t,i)),"element"in A&&e(0,r=A.element),"componentName"in A&&e(13,l=A.componentName),"id"in A&&e(14,o=A.id),"tag"in A&&e(2,f=A.tag),"cssProps"in A&&e(15,m=A.cssProps),"value"in A&&e(1,a=A.value),"title"in A&&e(16,p=A.title),"tabindex"in A&&e(17,v=A.tabindex),"role"in A&&e(18,b=A.role),"ariaCurrent"in A&&e(19,y=A.ariaCurrent),"ariaLabel"in A&&e(20,C=A.ariaLabel),"ariaValuenow"in A&&e(21,S=A.ariaValuenow),"style"in A&&e(22,w=A.style),"show"in A&&e(23,k=A.show),"components"in A&&e(24,F=A.components),"gap"in A&&e(25,H=A.gap),"vAlign"in A&&e(26,Q=A.vAlign),"shadow"in A&&e(27,ct=A.shadow),"hidden"in A&&e(28,G=A.hidden),"bgColor"in A&&e(29,lt=A.bgColor),"bgGradient"in A&&e(30,T=A.bgGradient),"bgOpacity"in A&&e(31,L=A.bgOpacity),"border"in A&&e(32,D=A.border),"borderTop"in A&&e(33,E=A.borderTop),"borderStart"in A&&e(34,U=A.borderStart),"borderEnd"in A&&e(35,x=A.borderEnd),"borderBottom"in A&&e(36,O=A.borderBottom),"borderColor"in A&&e(37,I=A.borderColor),"borderRadius"in A&&e(38,W=A.borderRadius),"borderRoundSize"in A&&e(39,Z=A.borderRoundSize),"borderOpacity"in A&&e(40,q=A.borderOpacity),"p"in A&&e(41,nt=A.p),"pt"in A&&e(42,at=A.pt),"pb"in A&&e(43,ht=A.pb),"ps"in A&&e(44,J=A.ps),"pe"in A&&e(45,N=A.pe),"px"in A&&e(46,tt=A.px),"py"in A&&e(47,$=A.py),"m"in A&&e(48,K=A.m),"mt"in A&&e(49,rt=A.mt),"mb"in A&&e(50,dt=A.mb),"ms"in A&&e(51,_t=A.ms),"me"in A&&e(52,ot=A.me),"mx"in A&&e(53,X=A.mx),"my"in A&&e(54,pt=A.my),"clearfix"in A&&e(55,bt=A.clearfix),"ratio"in A&&e(56,wt=A.ratio),"sticky"in A&&e(57,Dt=A.sticky),"fixed"in A&&e(58,Ot=A.fixed),"d"in A&&e(59,Gt=A.d),"dSm"in A&&e(60,It=A.dSm),"dMd"in A&&e(61,Zt=A.dMd),"dLg"in A&&e(62,ae=A.dLg),"dXl"in A&&e(63,Jt=A.dXl),"dXxl"in A&&e(64,ge=A.dXxl),"dPrint"in A&&e(65,me=A.dPrint),"w"in A&&e(66,pe=A.w),"h"in A&&e(67,Se=A.h),"mw"in A&&e(68,Pe=A.mw),"mh"in A&&e(69,Fe=A.mh),"position"in A&&e(70,Ee=A.position),"top"in A&&e(71,Ie=A.top),"start"in A&&e(72,Re=A.start),"bottom"in A&&e(73,je=A.bottom),"end"in A&&e(74,Be=A.end),"textColor"in A&&e(75,Ne=A.textColor),"textAlign"in A&&e(76,Vi=A.textAlign),"textAlignSm"in A&&e(77,Ui=A.textAlignSm),"textAlignMd"in A&&e(78,Gi=A.textAlignMd),"textAlignLg"in A&&e(79,qi=A.textAlignLg),"textAlignXl"in A&&e(80,Ki=A.textAlignXl),"textWrap"in A&&e(81,Ji=A.textWrap),"textTransform"in A&&e(82,Qi=A.textTransform),"textDecoration"in A&&e(83,Zi=A.textDecoration),"lineHeight"in A&&e(84,$i=A.lineHeight),"textMuted"in A&&e(85,tn=A.textMuted),"textLead"in A&&e(86,en=A.textLead),"textHeading"in A&&e(87,nn=A.textHeading),"textTruncate"in A&&e(88,rn=A.textTruncate),"textOpacity"in A&&e(89,sn=A.textOpacity),"fontSize"in A&&e(90,on=A.fontSize),"fontWeight"in A&&e(91,an=A.fontWeight),"fontStyle"in A&&e(92,ln=A.fontStyle),"float"in A&&e(93,cn=A.float),"floatSm"in A&&e(94,fn=A.floatSm),"floatMd"in A&&e(95,un=A.floatMd),"floatLg"in A&&e(96,hn=A.floatLg),"floatXl"in A&&e(97,dn=A.floatXl),"floatXxl"in A&&e(98,gn=A.floatXxl),"container"in A&&e(99,mn=A.container),"col"in A&&e(100,pn=A.col),"colSm"in A&&e(101,vn=A.colSm),"colMd"in A&&e(102,_n=A.colMd),"colLg"in A&&e(103,bn=A.colLg),"colXl"in A&&e(104,yn=A.colXl),"colXxl"in A&&e(105,Cn=A.colXxl),"order"in A&&e(106,Sn=A.order),"orderSm"in A&&e(107,wn=A.orderSm),"orderMd"in A&&e(108,Tn=A.orderMd),"orderLg"in A&&e(109,xn=A.orderLg),"orderXl"in A&&e(110,On=A.orderXl),"orderXxl"in A&&e(111,kn=A.orderXxl),"offset"in A&&e(112,Pn=A.offset),"offsetSm"in A&&e(113,En=A.offsetSm),"offsetMd"in A&&e(114,An=A.offsetMd),"offsetLg"in A&&e(115,Mn=A.offsetLg),"offsetXl"in A&&e(116,Dn=A.offsetXl),"offsetXxl"in A&&e(117,Ln=A.offsetXxl),"row"in A&&e(118,Fn=A.row),"rowCols"in A&&e(119,In=A.rowCols),"rowColsSm"in A&&e(120,Rn=A.rowColsSm),"rowColsMd"in A&&e(121,jn=A.rowColsMd),"rowColsLg"in A&&e(122,Bn=A.rowColsLg),"rowColsXl"in A&&e(123,Nn=A.rowColsXl),"rowColsXxl"in A&&e(124,Xn=A.rowColsXxl),"g"in A&&e(125,Wn=A.g),"gSm"in A&&e(126,zn=A.gSm),"gMd"in A&&e(127,Yn=A.gMd),"gLg"in A&&e(128,Hn=A.gLg),"gXl"in A&&e(129,Vn=A.gXl),"gXxl"in A&&e(130,Un=A.gXxl),"gx"in A&&e(131,Gn=A.gx),"gy"in A&&e(132,qn=A.gy),"alignItems"in A&&e(133,Kn=A.alignItems),"alignSelf"in A&&e(134,Jn=A.alignSelf),"justifyContent"in A&&e(135,Qn=A.justifyContent),"$$scope"in A&&e(139,c=A.$$scope)},s.$$.update=()=>{var A;s.$$.dirty[0]&8388616&&(V&&k===!1&&V.leave(),V&&k===!0&&V.enter());{e(137,Y={bgColor:lt,bgGradient:T,bgOpacity:L,border:D,borderTop:E,borderStart:U,borderEnd:x,borderBottom:O,borderColor:I,borderRadius:W,borderRoundSize:Z,borderOpacity:q,p:nt,pt:at,pb:ht,ps:J,pe:N,px:tt,py:$,m:K,mt:rt,mb:dt,ms:_t,me:ot,mx:X,my:pt,gap:H,clearfix:bt,ratio:wt,sticky:Dt,fixed:Ot,d:Gt,dSm:It,dMd:Zt,dLg:ae,dXl:Jt,dXxl:ge,dPrint:me,shadow:ct,w:pe,h:Se,mw:Pe,mh:Fe,position:Ee,top:Ie,start:Re,bottom:je,end:Be,vAlign:Q,textColor:Ne,textAlign:Vi,textAlignSm:Ui,textAlignMd:Gi,textAlignLg:qi,textAlignXl:Ki,textWrap:Ji,textTransform:Qi,textDecoration:Zi,lineHeight:$i,textMuted:tn,textLead:en,textHeading:nn,textTruncate:rn,textOpacity:sn,fontSize:on,fontWeight:an,fontStyle:ln,hidden:G,float:cn,floatSm:fn,floatMd:un,floatLg:hn,floatXl:dn,floatXxl:gn,container:mn,col:pn,colSm:vn,colMd:_n,colLg:bn,colXl:yn,colXxl:Cn,order:Sn,orderSm:wn,orderMd:Tn,orderLg:xn,orderXl:On,orderXxl:kn,offset:Pn,offsetSm:En,offsetMd:An,offsetLg:Mn,offsetXl:Dn,offsetXxl:Ln,row:Fn,rowCols:In,rowColsSm:Rn,rowColsMd:jn,rowColsLg:Bn,rowColsXl:Nn,rowColsXxl:Xn,g:Wn,gSm:zn,gMd:Yn,gLg:Hn,gXl:Vn,gXxl:Un,gx:Gn,gy:qn,alignItems:Kn,alignSelf:Jn,justifyContent:Qn}),e(136,z=((A=we(ir,Y,t.class))==null?void 0:A.replace("y-el ",""))??""),l!==ir&&e(136,z+=" "+we(l,m)),e(136,z+=(d==null?void 0:d.classes)||"");const Uo=`${w?w+";":""}${(d==null?void 0:d.styles)||""}`||void 0;e(4,et={id:o,class:z,title:p,tabindex:v,role:b,ariaCurrent:y,ariaLabel:C,ariaValuenow:S,style:Uo})}},t=yt(t),[r,a,f,V,et,Fo,Io,Ro,jo,Bo,No,h,g,l,o,m,p,v,b,y,C,S,w,k,F,H,Q,ct,G,lt,T,L,D,E,U,x,O,I,W,Z,q,nt,at,ht,J,N,tt,$,K,rt,dt,_t,ot,X,pt,bt,wt,Dt,Ot,Gt,It,Zt,ae,Jt,ge,me,pe,Se,Pe,Fe,Ee,Ie,Re,je,Be,Ne,Vi,Ui,Gi,qi,Ki,Ji,Qi,Zi,$i,tn,en,nn,rn,sn,on,an,ln,cn,fn,un,hn,dn,gn,mn,pn,vn,_n,bn,yn,Cn,Sn,wn,Tn,xn,On,kn,Pn,En,An,Mn,Dn,Ln,Fn,In,Rn,jn,Bn,Nn,Xn,Wn,zn,Yn,Hn,Vn,Un,Gn,qn,Kn,Jn,Qn,z,Y,d,c,n,Xo,Wo,zo,Yo,Ho,Vo]}class Na extends Mt{constructor(t){super(),At(this,t,Ba,Ia,Et,{element:0,componentName:13,id:14,tag:2,cssProps:15,value:1,title:16,tabindex:17,role:18,ariaCurrent:19,ariaLabel:20,ariaValuenow:21,style:22,show:23,components:24,gap:25,vAlign:26,shadow:27,hidden:28,bgColor:29,bgGradient:30,bgOpacity:31,border:32,borderTop:33,borderStart:34,borderEnd:35,borderBottom:36,borderColor:37,borderRadius:38,borderRoundSize:39,borderOpacity:40,p:41,pt:42,pb:43,ps:44,pe:45,px:46,py:47,m:48,mt:49,mb:50,ms:51,me:52,mx:53,my:54,clearfix:55,ratio:56,sticky:57,fixed:58,d:59,dSm:60,dMd:61,dLg:62,dXl:63,dXxl:64,dPrint:65,w:66,h:67,mw:68,mh:69,position:70,top:71,start:72,bottom:73,end:74,textColor:75,textAlign:76,textAlignSm:77,textAlignMd:78,textAlignLg:79,textAlignXl:80,textWrap:81,textTransform:82,textDecoration:83,lineHeight:84,textMuted:85,textLead:86,textHeading:87,textTruncate:88,textOpacity:89,fontSize:90,fontWeight:91,fontStyle:92,float:93,floatSm:94,floatMd:95,floatLg:96,floatXl:97,floatXxl:98,container:99,col:100,colSm:101,colMd:102,colLg:103,colXl:104,colXxl:105,order:106,orderSm:107,orderMd:108,orderLg:109,orderXl:110,orderXxl:111,offset:112,offsetSm:113,offsetMd:114,offsetLg:115,offsetXl:116,offsetXxl:117,row:118,rowCols:119,rowColsSm:120,rowColsMd:121,rowColsLg:122,rowColsXl:123,rowColsXxl:124,g:125,gSm:126,gMd:127,gLg:128,gXl:129,gXxl:130,gx:131,gy:132,alignItems:133,alignSelf:134,justifyContent:135},null,[-1,-1,-1,-1,-1])}}const Tt=Na;var Ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gd(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Xa(s){if(s.__esModule)return s;var t=s.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(s).forEach(function(i){var g=Object.getOwnPropertyDescriptor(s,i);Object.defineProperty(e,i,g.get?g:{enumerable:!0,get:function(){return s[i]}})}),e}const si=Math.min,Ue=Math.max,Mi=Math.round,Te=s=>({x:s,y:s}),Wa={left:"right",right:"left",bottom:"top",top:"bottom"},za={start:"end",end:"start"};function hr(s,t,e){return Ue(s,si(t,e))}function di(s,t){return typeof s=="function"?s(t):s}function De(s){return s.split("-")[0]}function gi(s){return s.split("-")[1]}function Us(s){return s==="x"?"y":"x"}function xr(s){return s==="y"?"height":"width"}function Bi(s){return["top","bottom"].includes(De(s))?"y":"x"}function Or(s){return Us(Bi(s))}function Ya(s,t,e){e===void 0&&(e=!1);const i=gi(s),g=Or(s),d=xr(g);let _=g==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[d]>t.floating[d]&&(_=Di(_)),[_,Di(_)]}function Ha(s){const t=Di(s);return[dr(s),t,dr(t)]}function dr(s){return s.replace(/start|end/g,t=>za[t])}function Va(s,t,e){const i=["left","right"],g=["right","left"],d=["top","bottom"],_=["bottom","top"];switch(s){case"top":case"bottom":return e?t?g:i:t?i:g;case"left":case"right":return t?d:_;default:return[]}}function Ua(s,t,e,i){const g=gi(s);let d=Va(De(s),e==="start",i);return g&&(d=d.map(_=>_+"-"+g),t&&(d=d.concat(d.map(dr)))),d}function Di(s){return s.replace(/left|right|bottom|top/g,t=>Wa[t])}function Ga(s){return{top:0,right:0,bottom:0,left:0,...s}}function Gs(s){return typeof s!="number"?Ga(s):{top:s,right:s,bottom:s,left:s}}function Li(s){return{...s,top:s.y,left:s.x,right:s.x+s.width,bottom:s.y+s.height}}function Wr(s,t,e){let{reference:i,floating:g}=s;const d=Bi(t),_=Or(t),u=xr(_),n=De(t),c=d==="y",h=i.x+i.width/2-g.width/2,r=i.y+i.height/2-g.height/2,l=i[u]/2-g[u]/2;let o;switch(n){case"top":o={x:h,y:i.y-g.height};break;case"bottom":o={x:h,y:i.y+i.height};break;case"right":o={x:i.x+i.width,y:r};break;case"left":o={x:i.x-g.width,y:r};break;default:o={x:i.x,y:i.y}}switch(gi(t)){case"start":o[_]-=l*(e&&c?-1:1);break;case"end":o[_]+=l*(e&&c?-1:1);break}return o}const qa=async(s,t,e)=>{const{placement:i="bottom",strategy:g="absolute",middleware:d=[],platform:_}=e,u=d.filter(Boolean),n=await(_.isRTL==null?void 0:_.isRTL(t));let c=await _.getElementRects({reference:s,floating:t,strategy:g}),{x:h,y:r}=Wr(c,i,n),l=i,o={},f=0;for(let m=0;m<u.length;m++){const{name:a,fn:p}=u[m],{x:v,y:b,data:y,reset:C}=await p({x:h,y:r,initialPlacement:i,placement:l,strategy:g,middlewareData:o,rects:c,platform:_,elements:{reference:s,floating:t}});if(h=v??h,r=b??r,o={...o,[a]:{...o[a],...y}},C&&f<=50){f++,typeof C=="object"&&(C.placement&&(l=C.placement),C.rects&&(c=C.rects===!0?await _.getElementRects({reference:s,floating:t,strategy:g}):C.rects),{x:h,y:r}=Wr(c,l,n)),m=-1;continue}}return{x:h,y:r,placement:l,strategy:g,middlewareData:o}};async function qs(s,t){var e;t===void 0&&(t={});const{x:i,y:g,platform:d,rects:_,elements:u,strategy:n}=s,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:r="floating",altBoundary:l=!1,padding:o=0}=di(t,s),f=Gs(o),a=u[l?r==="floating"?"reference":"floating":r],p=Li(await d.getClippingRect({element:(e=await(d.isElement==null?void 0:d.isElement(a)))==null||e?a:a.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(u.floating)),boundary:c,rootBoundary:h,strategy:n})),v=r==="floating"?{..._.floating,x:i,y:g}:_.reference,b=await(d.getOffsetParent==null?void 0:d.getOffsetParent(u.floating)),y=await(d.isElement==null?void 0:d.isElement(b))?await(d.getScale==null?void 0:d.getScale(b))||{x:1,y:1}:{x:1,y:1},C=Li(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:b,strategy:n}):v);return{top:(p.top-C.top+f.top)/y.y,bottom:(C.bottom-p.bottom+f.bottom)/y.y,left:(p.left-C.left+f.left)/y.x,right:(C.right-p.right+f.right)/y.x}}const Ka=s=>({name:"arrow",options:s,async fn(t){const{x:e,y:i,placement:g,rects:d,platform:_,elements:u,middlewareData:n}=t,{element:c,padding:h=0}=di(s,t)||{};if(c==null)return{};const r=Gs(h),l={x:e,y:i},o=Or(g),f=xr(o),m=await _.getDimensions(c),a=o==="y",p=a?"top":"left",v=a?"bottom":"right",b=a?"clientHeight":"clientWidth",y=d.reference[f]+d.reference[o]-l[o]-d.floating[f],C=l[o]-d.reference[o],S=await(_.getOffsetParent==null?void 0:_.getOffsetParent(c));let w=S?S[b]:0;(!w||!await(_.isElement==null?void 0:_.isElement(S)))&&(w=u.floating[b]||d.floating[f]);const k=y/2-C/2,F=w/2-m[f]/2-1,V=si(r[p],F),z=si(r[v],F),Y=V,et=w-m[f]-z,H=w/2-m[f]/2+k,Q=hr(Y,H,et),ct=!n.arrow&&gi(g)!=null&&H!=Q&&d.reference[f]/2-(H<Y?V:z)-m[f]/2<0,G=ct?H<Y?H-Y:H-et:0;return{[o]:l[o]+G,data:{[o]:Q,centerOffset:H-Q-G,...ct&&{alignmentOffset:G}},reset:ct}}}),Ja=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(t){var e,i;const{placement:g,middlewareData:d,rects:_,initialPlacement:u,platform:n,elements:c}=t,{mainAxis:h=!0,crossAxis:r=!0,fallbackPlacements:l,fallbackStrategy:o="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...a}=di(s,t);if((e=d.arrow)!=null&&e.alignmentOffset)return{};const p=De(g),v=De(u)===u,b=await(n.isRTL==null?void 0:n.isRTL(c.floating)),y=l||(v||!m?[Di(u)]:Ha(u));!l&&f!=="none"&&y.push(...Ua(u,m,f,b));const C=[u,...y],S=await qs(t,a),w=[];let k=((i=d.flip)==null?void 0:i.overflows)||[];if(h&&w.push(S[p]),r){const Y=Ya(g,_,b);w.push(S[Y[0]],S[Y[1]])}if(k=[...k,{placement:g,overflows:w}],!w.every(Y=>Y<=0)){var F,V;const Y=(((F=d.flip)==null?void 0:F.index)||0)+1,et=C[Y];if(et)return{data:{index:Y,overflows:k},reset:{placement:et}};let H=(V=k.filter(Q=>Q.overflows[0]<=0).sort((Q,ct)=>Q.overflows[1]-ct.overflows[1])[0])==null?void 0:V.placement;if(!H)switch(o){case"bestFit":{var z;const Q=(z=k.map(ct=>[ct.placement,ct.overflows.filter(G=>G>0).reduce((G,lt)=>G+lt,0)]).sort((ct,G)=>ct[1]-G[1])[0])==null?void 0:z[0];Q&&(H=Q);break}case"initialPlacement":H=u;break}if(g!==H)return{reset:{placement:H}}}return{}}}};async function Qa(s,t){const{placement:e,platform:i,elements:g}=s,d=await(i.isRTL==null?void 0:i.isRTL(g.floating)),_=De(e),u=gi(e),n=Bi(e)==="y",c=["left","top"].includes(_)?-1:1,h=d&&n?-1:1,r=di(t,s);let{mainAxis:l,crossAxis:o,alignmentAxis:f}=typeof r=="number"?{mainAxis:r,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...r};return u&&typeof f=="number"&&(o=u==="end"?f*-1:f),n?{x:o*h,y:l*c}:{x:l*c,y:o*h}}const Za=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(t){const{x:e,y:i}=t,g=await Qa(t,s);return{x:e+g.x,y:i+g.y,data:g}}}},$a=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(t){const{x:e,y:i,placement:g}=t,{mainAxis:d=!0,crossAxis:_=!1,limiter:u={fn:a=>{let{x:p,y:v}=a;return{x:p,y:v}}},...n}=di(s,t),c={x:e,y:i},h=await qs(t,n),r=Bi(De(g)),l=Us(r);let o=c[l],f=c[r];if(d){const a=l==="y"?"top":"left",p=l==="y"?"bottom":"right",v=o+h[a],b=o-h[p];o=hr(v,o,b)}if(_){const a=r==="y"?"top":"left",p=r==="y"?"bottom":"right",v=f+h[a],b=f-h[p];f=hr(v,f,b)}const m=u.fn({...t,[l]:o,[r]:f});return{...m,data:{x:m.x-e,y:m.y-i}}}}};function xe(s){return Ks(s)?(s.nodeName||"").toLowerCase():"#document"}function se(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function ke(s){var t;return(t=(Ks(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function Ks(s){return s instanceof Node||s instanceof se(s).Node}function Ce(s){return s instanceof Element||s instanceof se(s).Element}function ue(s){return s instanceof HTMLElement||s instanceof se(s).HTMLElement}function zr(s){return typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof se(s).ShadowRoot}function mi(s){const{overflow:t,overflowX:e,overflowY:i,display:g}=le(s);return/auto|scroll|overlay|hidden|clip/.test(t+i+e)&&!["inline","contents"].includes(g)}function tl(s){return["table","td","th"].includes(xe(s))}function kr(s){const t=Pr(),e=le(s);return e.transform!=="none"||e.perspective!=="none"||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(e.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(e.contain||"").includes(i))}function el(s){let t=qe(s);for(;ue(t)&&!Ni(t);){if(kr(t))return t;t=qe(t)}return null}function Pr(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ni(s){return["html","body","#document"].includes(xe(s))}function le(s){return se(s).getComputedStyle(s)}function Xi(s){return Ce(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.pageXOffset,scrollTop:s.pageYOffset}}function qe(s){if(xe(s)==="html")return s;const t=s.assignedSlot||s.parentNode||zr(s)&&s.host||ke(s);return zr(t)?t.host:t}function Js(s){const t=qe(s);return Ni(t)?s.ownerDocument?s.ownerDocument.body:s.body:ue(t)&&mi(t)?t:Js(t)}function gr(s,t,e){var i;t===void 0&&(t=[]),e===void 0&&(e=!0);const g=Js(s),d=g===((i=s.ownerDocument)==null?void 0:i.body),_=se(g);return d?t.concat(_,_.visualViewport||[],mi(g)?g:[],_.frameElement&&e?gr(_.frameElement):[]):t.concat(g,gr(g,[],e))}function Qs(s){const t=le(s);let e=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const g=ue(s),d=g?s.offsetWidth:e,_=g?s.offsetHeight:i,u=Mi(e)!==d||Mi(i)!==_;return u&&(e=d,i=_),{width:e,height:i,$:u}}function Zs(s){return Ce(s)?s:s.contextElement}function Ge(s){const t=Zs(s);if(!ue(t))return Te(1);const e=t.getBoundingClientRect(),{width:i,height:g,$:d}=Qs(t);let _=(d?Mi(e.width):e.width)/i,u=(d?Mi(e.height):e.height)/g;return(!_||!Number.isFinite(_))&&(_=1),(!u||!Number.isFinite(u))&&(u=1),{x:_,y:u}}const il=Te(0);function $s(s){const t=se(s);return!Pr()||!t.visualViewport?il:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nl(s,t,e){return t===void 0&&(t=!1),!e||t&&e!==se(s)?!1:t}function oi(s,t,e,i){t===void 0&&(t=!1),e===void 0&&(e=!1);const g=s.getBoundingClientRect(),d=Zs(s);let _=Te(1);t&&(i?Ce(i)&&(_=Ge(i)):_=Ge(s));const u=nl(d,e,i)?$s(d):Te(0);let n=(g.left+u.x)/_.x,c=(g.top+u.y)/_.y,h=g.width/_.x,r=g.height/_.y;if(d){const l=se(d),o=i&&Ce(i)?se(i):i;let f=l.frameElement;for(;f&&i&&o!==l;){const m=Ge(f),a=f.getBoundingClientRect(),p=le(f),v=a.left+(f.clientLeft+parseFloat(p.paddingLeft))*m.x,b=a.top+(f.clientTop+parseFloat(p.paddingTop))*m.y;n*=m.x,c*=m.y,h*=m.x,r*=m.y,n+=v,c+=b,f=se(f).frameElement}}return Li({width:h,height:r,x:n,y:c})}function rl(s){let{rect:t,offsetParent:e,strategy:i}=s;const g=ue(e),d=ke(e);if(e===d)return t;let _={scrollLeft:0,scrollTop:0},u=Te(1);const n=Te(0);if((g||!g&&i!=="fixed")&&((xe(e)!=="body"||mi(d))&&(_=Xi(e)),ue(e))){const c=oi(e);u=Ge(e),n.x=c.x+e.clientLeft,n.y=c.y+e.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-_.scrollLeft*u.x+n.x,y:t.y*u.y-_.scrollTop*u.y+n.y}}function sl(s){return Array.from(s.getClientRects())}function to(s){return oi(ke(s)).left+Xi(s).scrollLeft}function ol(s){const t=ke(s),e=Xi(s),i=s.ownerDocument.body,g=Ue(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),d=Ue(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let _=-e.scrollLeft+to(s);const u=-e.scrollTop;return le(i).direction==="rtl"&&(_+=Ue(t.clientWidth,i.clientWidth)-g),{width:g,height:d,x:_,y:u}}function al(s,t){const e=se(s),i=ke(s),g=e.visualViewport;let d=i.clientWidth,_=i.clientHeight,u=0,n=0;if(g){d=g.width,_=g.height;const c=Pr();(!c||c&&t==="fixed")&&(u=g.offsetLeft,n=g.offsetTop)}return{width:d,height:_,x:u,y:n}}function ll(s,t){const e=oi(s,!0,t==="fixed"),i=e.top+s.clientTop,g=e.left+s.clientLeft,d=ue(s)?Ge(s):Te(1),_=s.clientWidth*d.x,u=s.clientHeight*d.y,n=g*d.x,c=i*d.y;return{width:_,height:u,x:n,y:c}}function Yr(s,t,e){let i;if(t==="viewport")i=al(s,e);else if(t==="document")i=ol(ke(s));else if(Ce(t))i=ll(t,e);else{const g=$s(s);i={...t,x:t.x-g.x,y:t.y-g.y}}return Li(i)}function eo(s,t){const e=qe(s);return e===t||!Ce(e)||Ni(e)?!1:le(e).position==="fixed"||eo(e,t)}function cl(s,t){const e=t.get(s);if(e)return e;let i=gr(s,[],!1).filter(u=>Ce(u)&&xe(u)!=="body"),g=null;const d=le(s).position==="fixed";let _=d?qe(s):s;for(;Ce(_)&&!Ni(_);){const u=le(_),n=kr(_);!n&&u.position==="fixed"&&(g=null),(d?!n&&!g:!n&&u.position==="static"&&!!g&&["absolute","fixed"].includes(g.position)||mi(_)&&!n&&eo(s,_))?i=i.filter(h=>h!==_):g=u,_=qe(_)}return t.set(s,i),i}function fl(s){let{element:t,boundary:e,rootBoundary:i,strategy:g}=s;const _=[...e==="clippingAncestors"?cl(t,this._c):[].concat(e),i],u=_[0],n=_.reduce((c,h)=>{const r=Yr(t,h,g);return c.top=Ue(r.top,c.top),c.right=si(r.right,c.right),c.bottom=si(r.bottom,c.bottom),c.left=Ue(r.left,c.left),c},Yr(t,u,g));return{width:n.right-n.left,height:n.bottom-n.top,x:n.left,y:n.top}}function ul(s){return Qs(s)}function hl(s,t,e){const i=ue(t),g=ke(t),d=e==="fixed",_=oi(s,!0,d,t);let u={scrollLeft:0,scrollTop:0};const n=Te(0);if(i||!i&&!d)if((xe(t)!=="body"||mi(g))&&(u=Xi(t)),i){const c=oi(t,!0,d,t);n.x=c.x+t.clientLeft,n.y=c.y+t.clientTop}else g&&(n.x=to(g));return{x:_.left+u.scrollLeft-n.x,y:_.top+u.scrollTop-n.y,width:_.width,height:_.height}}function Hr(s,t){return!ue(s)||le(s).position==="fixed"?null:t?t(s):s.offsetParent}function io(s,t){const e=se(s);if(!ue(s))return e;let i=Hr(s,t);for(;i&&tl(i)&&le(i).position==="static";)i=Hr(i,t);return i&&(xe(i)==="html"||xe(i)==="body"&&le(i).position==="static"&&!kr(i))?e:i||el(s)||e}const dl=async function(s){let{reference:t,floating:e,strategy:i}=s;const g=this.getOffsetParent||io,d=this.getDimensions;return{reference:hl(t,await g(e),i),floating:{x:0,y:0,...await d(e)}}};function gl(s){return le(s).direction==="rtl"}const ml={convertOffsetParentRelativeRectToViewportRelativeRect:rl,getDocumentElement:ke,getClippingRect:fl,getOffsetParent:io,getElementRects:dl,getClientRects:sl,getDimensions:ul,getScale:Ge,isElement:Ce,isRTL:gl},pl=(s,t,e)=>{const i=new Map,g={platform:ml,...e},d={...g.platform,_c:i};return qa(s,t,{...g,platform:d})};function Vr(s){let t,e,i;const g=[s[3]];function d(u){s[21](u)}let _={};for(let u=0;u<g.length;u+=1)_=gt(_,g[u]);return s[2]!==void 0&&(_.element=s[2]),t=new Tt({props:_}),Ut.push(()=>re(t,"element",d)),{c(){B(t.$$.fragment)},m(u,n){R(t,u,n),i=!0},p(u,n){const c=n[0]&8?Lt(g,[kt(u[3])]):{};!e&&n[0]&4&&(e=!0,c.element=u[2],ne(()=>e=!1)),t.$set(c)},i(u){i||(P(t.$$.fragment,u),i=!0)},o(u){M(t.$$.fragment,u),i=!1},d(u){j(t,u)}}}function vl(s){let t,e,i=s[0]&&Vr(s);const g=s[20].default,d=zt(g,s,s[23],null);return{c(){i&&i.c(),t=ft(),d&&d.c()},m(_,u){i&&i.m(_,u),st(_,t,u),d&&d.m(_,u),e=!0},p(_,u){_[0]?i?(i.p(_,u),u[0]&1&&P(i,1)):(i=Vr(_),i.c(),P(i,1),i.m(t.parentNode,t)):i&&(Bt(),M(i,1,1,()=>{i=null}),Nt()),d&&d.p&&(!e||u[0]&8388608)&&Ht(d,g,_,_[23],e?Yt(g,_[23],u,null):Vt(_[23]),null)},i(_){e||(P(i),P(d,_),e=!0)},o(_){M(i),M(d,_),e=!1},d(_){_&&it(t),i&&i.d(_),d&&d.d(_)}}}function _l(s){let t,e,i;const g=[{components:s[5]},s[6],s[4]];function d(u){s[22](u)}let _={$$slots:{default:[vl]},$$scope:{ctx:s}};for(let u=0;u<g.length;u+=1)_=gt(_,g[u]);return s[1]!==void 0&&(_.element=s[1]),t=new Tt({props:_}),Ut.push(()=>re(t,"element",d)),{c(){B(t.$$.fragment)},m(u,n){R(t,u,n),i=!0},p(u,n){const c=n[0]&112?Lt(g,[n[0]&32&&{components:u[5]},n[0]&64&&kt(u[6]),n[0]&16&&kt(u[4])]):{};n[0]&8388621&&(c.$$scope={dirty:n,ctx:u}),!e&&n[0]&2&&(e=!0,c.element=u[1],ne(()=>e=!1)),t.$set(c)},i(u){i||(P(t.$$.fragment,u),i=!0)},o(u){M(t.$$.fragment,u),i=!1},d(u){j(t,u)}}}function bl(s,t,e){let i,g;const d=["target","placement","trigger","popupOffset","autoClose","arrow","componentName","show"];let _=Ct(t,d),{$$slots:u={},$$scope:n}=t,{target:c=void 0}=t,{placement:h=void 0}=t,{trigger:r=void 0}=t,{popupOffset:l=void 0}=t,{autoClose:o="outside"}=t,{arrow:f=void 0}=t,{componentName:m="popup"}=t,{show:a=void 0}=t;const p=[{component:Rt(),except:[]},...t.components??[]];let v,b,y,C,S,w,k,F,V="",z="";function Y(){F&&r==="hover"&&clearTimeout(F),e(7,a=!0);let E=[];l&&E.push(Za(l)),E.push($a({padding:l})),E.push(Ja()),f&&E.push(Ka({element:y})),pl(b,v,{placement:h,middleware:E}).then(({x:U,y:x,...O})=>{if(e(18,V=`${U}px`),e(19,z=`${x}px`),f){e(15,C=O.placement.split("-")[0]);const I=O.middlewareData.arrow;I&&(e(16,S=I.x?`${I.x}px`:""),e(17,w=I.y?`${I.y}px`:""))}})}function et(){r==="hover"?F=setTimeout(()=>{e(7,a=!1)},300):e(7,a=!1)}const H=()=>{a?et():Y()};function Q(E){if(a&&(o===!0||o==="outside")){if(E.composedPath().some(U=>U==v||U==b))return;e(7,a=!1)}}function ct(){(o===!0||o==="inside")&&e(7,a=!1)}function G(E){return E?typeof E=="string"?document.querySelector(E)||v.parentElement:E:v.previousElementSibling||v.parentElement}async function lt(){window&&(window.process={env:{NODE_ENV:"production"}}),k=b,typeof window<"u"&&document.addEventListener("click",Q),v==null||v.addEventListener("click",ct),r==="click"&&(b==null||b.addEventListener("click",H)),r==="hover"&&(b==null||b.addEventListener("mouseenter",Y),b==null||b.addEventListener("mouseleave",et),v==null||v.addEventListener("mouseenter",Y),v==null||v.addEventListener("mouseleave",et)),r==="focus"&&(b==null||b.addEventListener("focus",Y),b==null||b.addEventListener("blur",et))}function T(){k&&(r==="click"&&k.removeEventListener("click",H),typeof window<"u"&&document.removeEventListener("click",Q),v==null||v.removeEventListener("click",ct),r==="hover"&&(k.removeEventListener("mouseenter",Y),k.removeEventListener("mouseleave",et),v==null||v.removeEventListener("mouseenter",Y),v==null||v.removeEventListener("mouseleave",et)),r==="focus"&&(k.removeEventListener("focus",Y),k.removeEventListener("blur",et)))}function L(E){y=E,e(2,y)}function D(E){v=E,e(1,v)}return s.$$set=E=>{e(34,t=gt(gt({},t),yt(E))),e(6,_=Ct(t,d)),"target"in E&&e(8,c=E.target),"placement"in E&&e(9,h=E.placement),"trigger"in E&&e(10,r=E.trigger),"popupOffset"in E&&e(11,l=E.popupOffset),"autoClose"in E&&e(12,o=E.autoClose),"arrow"in E&&e(0,f=E.arrow),"componentName"in E&&e(13,m=E.componentName),"show"in E&&e(7,a=E.show),"$$scope"in E&&e(23,n=E.$$scope)},s.$$.update=()=>{s.$$.dirty[0]&258&&v&&e(14,b=G(c)),s.$$.dirty[0]&16384&&b&&(T(),lt()),e(4,i={componentName:m,class:we("popup",{show:a,arrowPlacement:C},t.class),style:`left: ${V}; top: ${z};`}),s.$$.dirty[0]&204800&&e(3,g={componentName:m+"-arrow",class:we("popup-arrow"),style:`left: ${S}; top: ${w}`})},t=yt(t),[f,v,y,g,i,p,_,a,c,h,r,l,o,m,b,C,S,w,V,z,u,L,D,n]}class yl extends Mt{constructor(t){super(),At(this,t,bl,_l,Et,{target:8,placement:9,trigger:10,popupOffset:11,autoClose:12,arrow:0,componentName:13,show:7},null,[-1,-1])}}const no=yl;/**
* (c) Iconify
*
* For the full copyright and license information, please view the license.txt
* files at https://github.com/iconify/iconify
*
* Licensed under MIT.
*
* @license MIT
* @version 1.0.8
*/const ro=Object.freeze({left:0,top:0,width:16,height:16}),Fi=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),pi=Object.freeze({...ro,...Fi}),mr=Object.freeze({...pi,body:"",hidden:!1}),Cl=Object.freeze({width:null,height:null}),so=Object.freeze({...Cl,...Fi});function Sl(s,t=0){const e=s.replace(/^-?[0-9.]*/,"");function i(g){for(;g<0;)g+=4;return g%4}if(e===""){const g=parseInt(s);return isNaN(g)?0:i(g)}else if(e!==s){let g=0;switch(e){case"%":g=25;break;case"deg":g=90}if(g){let d=parseFloat(s.slice(0,s.length-e.length));return isNaN(d)?0:(d=d/g,d%1===0?i(d):0)}}return t}const wl=/[\s,]+/;function Tl(s,t){t.split(wl).forEach(e=>{switch(e.trim()){case"horizontal":s.hFlip=!0;break;case"vertical":s.vFlip=!0;break}})}const oo={...so,preserveAspectRatio:""};function Ur(s){const t={...oo},e=(i,g)=>s.getAttribute(i)||g;return t.width=e("width",null),t.height=e("height",null),t.rotate=Sl(e("rotate","")),Tl(t,e("flip","")),t.preserveAspectRatio=e("preserveAspectRatio",e("preserveaspectratio","")),t}function xl(s,t){for(const e in oo)if(s[e]!==t[e])return!0;return!1}const ei=/^[a-z0-9]+(-[a-z0-9]+)*$/,vi=(s,t,e,i="")=>{const g=s.split(":");if(s.slice(0,1)==="@"){if(g.length<2||g.length>3)return null;i=g.shift().slice(1)}if(g.length>3||!g.length)return null;if(g.length>1){const u=g.pop(),n=g.pop(),c={provider:g.length>0?g[0]:i,prefix:n,name:u};return t&&!Ti(c)?null:c}const d=g[0],_=d.split("-");if(_.length>1){const u={provider:i,prefix:_.shift(),name:_.join("-")};return t&&!Ti(u)?null:u}if(e&&i===""){const u={provider:i,prefix:"",name:d};return t&&!Ti(u,e)?null:u}return null},Ti=(s,t)=>s?!!((s.provider===""||s.provider.match(ei))&&(t&&s.prefix===""||s.prefix.match(ei))&&s.name.match(ei)):!1;function Ol(s,t){const e={};!s.hFlip!=!t.hFlip&&(e.hFlip=!0),!s.vFlip!=!t.vFlip&&(e.vFlip=!0);const i=((s.rotate||0)+(t.rotate||0))%4;return i&&(e.rotate=i),e}function Gr(s,t){const e=Ol(s,t);for(const i in mr)i in Fi?i in s&&!(i in e)&&(e[i]=Fi[i]):i in t?e[i]=t[i]:i in s&&(e[i]=s[i]);return e}function kl(s,t){const e=s.icons,i=s.aliases||Object.create(null),g=Object.create(null);function d(_){if(e[_])return g[_]=[];if(!(_ in g)){g[_]=null;const u=i[_]&&i[_].parent,n=u&&d(u);n&&(g[_]=[u].concat(n))}return g[_]}return(t||Object.keys(e).concat(Object.keys(i))).forEach(d),g}function Pl(s,t,e){const i=s.icons,g=s.aliases||Object.create(null);let d={};function _(u){d=Gr(i[u]||g[u],d)}return _(t),e.forEach(_),Gr(s,d)}function ao(s,t){const e=[];if(typeof s!="object"||typeof s.icons!="object")return e;s.not_found instanceof Array&&s.not_found.forEach(g=>{t(g,null),e.push(g)});const i=kl(s);for(const g in i){const d=i[g];d&&(t(g,Pl(s,g,d)),e.push(g))}return e}const El={provider:"",aliases:{},not_found:{},...ro};function nr(s,t){for(const e in t)if(e in s&&typeof s[e]!=typeof t[e])return!1;return!0}function lo(s){if(typeof s!="object"||s===null)return null;const t=s;if(typeof t.prefix!="string"||!s.icons||typeof s.icons!="object"||!nr(s,El))return null;const e=t.icons;for(const g in e){const d=e[g];if(!g.match(ei)||typeof d.body!="string"||!nr(d,mr))return null}const i=t.aliases||Object.create(null);for(const g in i){const d=i[g],_=d.parent;if(!g.match(ei)||typeof _!="string"||!e[_]&&!i[_]||!nr(d,mr))return null}return t}const Ii=Object.create(null);function Al(s,t){return{provider:s,prefix:t,icons:Object.create(null),missing:new Set}}function Oe(s,t){const e=Ii[s]||(Ii[s]=Object.create(null));return e[t]||(e[t]=Al(s,t))}function Er(s,t){return lo(t)?ao(t,(e,i)=>{i?s.icons[e]=i:s.missing.add(e)}):[]}function Ml(s,t,e){try{if(typeof e.body=="string")return s.icons[t]={...e},!0}catch{}return!1}function Dl(s,t){let e=[];return(typeof s=="string"?[s]:Object.keys(Ii)).forEach(g=>{(typeof g=="string"&&typeof t=="string"?[t]:Object.keys(Ii[g]||{})).forEach(_=>{const u=Oe(g,_);e=e.concat(Object.keys(u.icons).map(n=>(g!==""?"@"+g+":":"")+_+":"+n))})}),e}let ai=!1;function co(s){return typeof s=="boolean"&&(ai=s),ai}function li(s){const t=typeof s=="string"?vi(s,!0,ai):s;if(t){const e=Oe(t.provider,t.prefix),i=t.name;return e.icons[i]||(e.missing.has(i)?null:void 0)}}function fo(s,t){const e=vi(s,!0,ai);if(!e)return!1;const i=Oe(e.provider,e.prefix);return Ml(i,e.name,t)}function qr(s,t){if(typeof s!="object")return!1;if(typeof t!="string"&&(t=s.provider||""),ai&&!t&&!s.prefix){let g=!1;return lo(s)&&(s.prefix="",ao(s,(d,_)=>{_&&fo(d,_)&&(g=!0)})),g}const e=s.prefix;if(!Ti({provider:t,prefix:e,name:"a"}))return!1;const i=Oe(t,e);return!!Er(i,s)}function Ll(s){return!!li(s)}function Fl(s){const t=li(s);return t?{...pi,...t}:null}function Il(s){const t={loaded:[],missing:[],pending:[]},e=Object.create(null);s.sort((g,d)=>g.provider!==d.provider?g.provider.localeCompare(d.provider):g.prefix!==d.prefix?g.prefix.localeCompare(d.prefix):g.name.localeCompare(d.name));let i={provider:"",prefix:"",name:""};return s.forEach(g=>{if(i.name===g.name&&i.prefix===g.prefix&&i.provider===g.provider)return;i=g;const d=g.provider,_=g.prefix,u=g.name,n=e[d]||(e[d]=Object.create(null)),c=n[_]||(n[_]=Oe(d,_));let h;u in c.icons?h=t.loaded:_===""||c.missing.has(u)?h=t.missing:h=t.pending;const r={provider:d,prefix:_,name:u};h.push(r)}),t}function uo(s,t){s.forEach(e=>{const i=e.loaderCallbacks;i&&(e.loaderCallbacks=i.filter(g=>g.id!==t))})}function Rl(s){s.pendingCallbacksFlag||(s.pendingCallbacksFlag=!0,setTimeout(()=>{s.pendingCallbacksFlag=!1;const t=s.loaderCallbacks?s.loaderCallbacks.slice(0):[];if(!t.length)return;let e=!1;const i=s.provider,g=s.prefix;t.forEach(d=>{const _=d.icons,u=_.pending.length;_.pending=_.pending.filter(n=>{if(n.prefix!==g)return!0;const c=n.name;if(s.icons[c])_.loaded.push({provider:i,prefix:g,name:c});else if(s.missing.has(c))_.missing.push({provider:i,prefix:g,name:c});else return e=!0,!0;return!1}),_.pending.length!==u&&(e||uo([s],d.id),d.callback(_.loaded.slice(0),_.missing.slice(0),_.pending.slice(0),d.abort))})}))}let jl=0;function Bl(s,t,e){const i=jl++,g=uo.bind(null,e,i);if(!t.pending.length)return g;const d={id:i,icons:t,callback:s,abort:g};return e.forEach(_=>{(_.loaderCallbacks||(_.loaderCallbacks=[])).push(d)}),g}const pr=Object.create(null);function Kr(s,t){pr[s]=t}function vr(s){return pr[s]||pr[""]}function Nl(s,t=!0,e=!1){const i=[];return s.forEach(g=>{const d=typeof g=="string"?vi(g,t,e):g;d&&i.push(d)}),i}var Xl={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Wl(s,t,e,i){const g=s.resources.length,d=s.random?Math.floor(Math.random()*g):s.index;let _;if(s.random){let S=s.resources.slice(0);for(_=[];S.length>1;){const w=Math.floor(Math.random()*S.length);_.push(S[w]),S=S.slice(0,w).concat(S.slice(w+1))}_=_.concat(S)}else _=s.resources.slice(d).concat(s.resources.slice(0,d));const u=Date.now();let n="pending",c=0,h,r=null,l=[],o=[];typeof i=="function"&&o.push(i);function f(){r&&(clearTimeout(r),r=null)}function m(){n==="pending"&&(n="aborted"),f(),l.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),l=[]}function a(S,w){w&&(o=[]),typeof S=="function"&&o.push(S)}function p(){return{startTime:u,payload:t,status:n,queriesSent:c,queriesPending:l.length,subscribe:a,abort:m}}function v(){n="failed",o.forEach(S=>{S(void 0,h)})}function b(){l.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),l=[]}function y(S,w,k){const F=w!=="success";switch(l=l.filter(V=>V!==S),n){case"pending":break;case"failed":if(F||!s.dataAfterTimeout)return;break;default:return}if(w==="abort"){h=k,v();return}if(F){h=k,l.length||(_.length?C():v());return}if(f(),b(),!s.random){const V=s.resources.indexOf(S.resource);V!==-1&&V!==s.index&&(s.index=V)}n="completed",o.forEach(V=>{V(k)})}function C(){if(n!=="pending")return;f();const S=_.shift();if(S===void 0){if(l.length){r=setTimeout(()=>{f(),n==="pending"&&(b(),v())},s.timeout);return}v();return}const w={status:"pending",resource:S,callback:(k,F)=>{y(w,k,F)}};l.push(w),c++,r=setTimeout(C,s.rotate),e(S,t,w.callback)}return setTimeout(C),p}function ho(s){const t={...Xl,...s};let e=[];function i(){e=e.filter(u=>u().status==="pending")}function g(u,n,c){const h=Wl(t,u,n,(r,l)=>{i(),c&&c(r,l)});return e.push(h),h}function d(u){return e.find(n=>u(n))||null}return{query:g,find:d,setIndex:u=>{t.index=u},getIndex:()=>t.index,cleanup:i}}function Ar(s){let t;if(typeof s.resources=="string")t=[s.resources];else if(t=s.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:s.path||"/",maxURL:s.maxURL||500,rotate:s.rotate||750,timeout:s.timeout||5e3,random:s.random===!0,index:s.index||0,dataAfterTimeout:s.dataAfterTimeout!==!1}}const Wi=Object.create(null),Je=["https://api.simplesvg.com","https://api.unisvg.com"],xi=[];for(;Je.length>0;)Je.length===1||Math.random()>.5?xi.push(Je.shift()):xi.push(Je.pop());Wi[""]=Ar({resources:["https://api.iconify.design"].concat(xi)});function Jr(s,t){const e=Ar(t);return e===null?!1:(Wi[s]=e,!0)}function zi(s){return Wi[s]}function zl(){return Object.keys(Wi)}function Qr(){}const rr=Object.create(null);function Yl(s){if(!rr[s]){const t=zi(s);if(!t)return;const e=ho(t),i={config:t,redundancy:e};rr[s]=i}return rr[s]}function go(s,t,e){let i,g;if(typeof s=="string"){const d=vr(s);if(!d)return e(void 0,424),Qr;g=d.send;const _=Yl(s);_&&(i=_.redundancy)}else{const d=Ar(s);if(d){i=ho(d);const _=s.resources?s.resources[0]:"",u=vr(_);u&&(g=u.send)}}return!i||!g?(e(void 0,424),Qr):i.query(t,g,e)().abort}const Zr="iconify2",ci="iconify",mo=ci+"-count",$r=ci+"-version",po=36e5,Hl=168;function _r(s,t){try{return s.getItem(t)}catch{}}function Mr(s,t,e){try{return s.setItem(t,e),!0}catch{}}function ts(s,t){try{s.removeItem(t)}catch{}}function br(s,t){return Mr(s,mo,t.toString())}function yr(s){return parseInt(_r(s,mo))||0}const Ae={local:!0,session:!0},vo={local:new Set,session:new Set};let Dr=!1;function Vl(s){Dr=s}let Ci=typeof window>"u"?{}:window;function _o(s){const t=s+"Storage";try{if(Ci&&Ci[t]&&typeof Ci[t].length=="number")return Ci[t]}catch{}Ae[s]=!1}function bo(s,t){const e=_o(s);if(!e)return;const i=_r(e,$r);if(i!==Zr){if(i){const u=yr(e);for(let n=0;n<u;n++)ts(e,ci+n.toString())}Mr(e,$r,Zr),br(e,0);return}const g=Math.floor(Date.now()/po)-Hl,d=u=>{const n=ci+u.toString(),c=_r(e,n);if(typeof c=="string"){try{const h=JSON.parse(c);if(typeof h=="object"&&typeof h.cached=="number"&&h.cached>g&&typeof h.provider=="string"&&typeof h.data=="object"&&typeof h.data.prefix=="string"&&t(h,u))return!0}catch{}ts(e,n)}};let _=yr(e);for(let u=_-1;u>=0;u--)d(u)||(u===_-1?(_--,br(e,_)):vo[s].add(u))}function yo(){if(!Dr){Vl(!0);for(const s in Ae)bo(s,t=>{const e=t.data,i=t.provider,g=e.prefix,d=Oe(i,g);if(!Er(d,e).length)return!1;const _=e.lastModified||-1;return d.lastModifiedCached=d.lastModifiedCached?Math.min(d.lastModifiedCached,_):_,!0})}}function Ul(s,t){const e=s.lastModifiedCached;if(e&&e>=t)return e===t;if(s.lastModifiedCached=t,e)for(const i in Ae)bo(i,g=>{const d=g.data;return g.provider!==s.provider||d.prefix!==s.prefix||d.lastModified===t});return!0}function Gl(s,t){Dr||yo();function e(i){let g;if(!Ae[i]||!(g=_o(i)))return;const d=vo[i];let _;if(d.size)d.delete(_=Array.from(d).shift());else if(_=yr(g),!br(g,_+1))return;const u={cached:Math.floor(Date.now()/po),provider:s.provider,data:t};return Mr(g,ci+_.toString(),JSON.stringify(u))}t.lastModified&&!Ul(s,t.lastModified)||Object.keys(t.icons).length&&(t.not_found&&(t=Object.assign({},t),delete t.not_found),e("local")||e("session"))}function es(){}function ql(s){s.iconsLoaderFlag||(s.iconsLoaderFlag=!0,setTimeout(()=>{s.iconsLoaderFlag=!1,Rl(s)}))}function Kl(s,t){s.iconsToLoad?s.iconsToLoad=s.iconsToLoad.concat(t).sort():s.iconsToLoad=t,s.iconsQueueFlag||(s.iconsQueueFlag=!0,setTimeout(()=>{s.iconsQueueFlag=!1;const{provider:e,prefix:i}=s,g=s.iconsToLoad;delete s.iconsToLoad;let d;if(!g||!(d=vr(e)))return;d.prepare(e,i,g).forEach(u=>{go(e,u,n=>{if(typeof n!="object")u.icons.forEach(c=>{s.missing.add(c)});else try{const c=Er(s,n);if(!c.length)return;const h=s.pendingIcons;h&&c.forEach(r=>{h.delete(r)}),Gl(s,n)}catch(c){console.error(c)}ql(s)})})}))}const Lr=(s,t)=>{const e=Nl(s,!0,co()),i=Il(e);if(!i.pending.length){let n=!0;return t&&setTimeout(()=>{n&&t(i.loaded,i.missing,i.pending,es)}),()=>{n=!1}}const g=Object.create(null),d=[];let _,u;return i.pending.forEach(n=>{const{provider:c,prefix:h}=n;if(h===u&&c===_)return;_=c,u=h,d.push(Oe(c,h));const r=g[c]||(g[c]=Object.create(null));r[h]||(r[h]=[])}),i.pending.forEach(n=>{const{provider:c,prefix:h,name:r}=n,l=Oe(c,h),o=l.pendingIcons||(l.pendingIcons=new Set);o.has(r)||(o.add(r),g[c][h].push(r))}),d.forEach(n=>{const{provider:c,prefix:h}=n;g[c][h].length&&Kl(n,g[c][h])}),t?Bl(t,i,d):es},Jl=s=>new Promise((t,e)=>{const i=typeof s=="string"?vi(s,!0):s;if(!i){e(s);return}Lr([i||s],g=>{if(g.length&&i){const d=li(i);if(d){t({...pi,...d});return}}e(s)})});function Ql(s){try{const t=typeof s=="string"?JSON.parse(s):s;if(typeof t.body=="string")return{...t}}catch{}}function Zl(s,t){const e=typeof s=="string"?vi(s,!0,!0):null;if(!e){const d=Ql(s);return{value:s,data:d}}const i=li(e);if(i!==void 0||!e.prefix)return{value:s,name:e,data:i};const g=Lr([e],()=>t(s,e,li(e)));return{value:s,name:e,loading:g}}function sr(s){return s.hasAttribute("inline")}let Co=!1;try{Co=navigator.vendor.indexOf("Apple")===0}catch{}function $l(s,t){switch(t){case"svg":case"bg":case"mask":return t}return t!=="style"&&(Co||s.indexOf("<a")===-1)?"svg":s.indexOf("currentColor")===-1?"bg":"mask"}const tc=/(-?[0-9.]*[0-9]+[0-9.]*)/g,ec=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Cr(s,t,e){if(t===1)return s;if(e=e||100,typeof s=="number")return Math.ceil(s*t*e)/e;if(typeof s!="string")return s;const i=s.split(tc);if(i===null||!i.length)return s;const g=[];let d=i.shift(),_=ec.test(d);for(;;){if(_){const u=parseFloat(d);isNaN(u)?g.push(d):g.push(Math.ceil(u*t*e)/e)}else g.push(d);if(d=i.shift(),d===void 0)return g.join("");_=!_}}const ic=s=>s==="unset"||s==="undefined"||s==="none";function So(s,t){const e={...pi,...s},i={...so,...t},g={left:e.left,top:e.top,width:e.width,height:e.height};let d=e.body;[e,i].forEach(f=>{const m=[],a=f.hFlip,p=f.vFlip;let v=f.rotate;a?p?v+=2:(m.push("translate("+(g.width+g.left).toString()+" "+(0-g.top).toString()+")"),m.push("scale(-1 1)"),g.top=g.left=0):p&&(m.push("translate("+(0-g.left).toString()+" "+(g.height+g.top).toString()+")"),m.push("scale(1 -1)"),g.top=g.left=0);let b;switch(v<0&&(v-=Math.floor(v/4)*4),v=v%4,v){case 1:b=g.height/2+g.top,m.unshift("rotate(90 "+b.toString()+" "+b.toString()+")");break;case 2:m.unshift("rotate(180 "+(g.width/2+g.left).toString()+" "+(g.height/2+g.top).toString()+")");break;case 3:b=g.width/2+g.left,m.unshift("rotate(-90 "+b.toString()+" "+b.toString()+")");break}v%2===1&&(g.left!==g.top&&(b=g.left,g.left=g.top,g.top=b),g.width!==g.height&&(b=g.width,g.width=g.height,g.height=b)),m.length&&(d='<g transform="'+m.join(" ")+'">'+d+"</g>")});const _=i.width,u=i.height,n=g.width,c=g.height;let h,r;_===null?(r=u===null?"1em":u==="auto"?c:u,h=Cr(r,n/c)):(h=_==="auto"?n:_,r=u===null?Cr(h,c/n):u==="auto"?c:u);const l={},o=(f,m)=>{ic(m)||(l[f]=m.toString())};return o("width",h),o("height",r),l.viewBox=g.left.toString()+" "+g.top.toString()+" "+n.toString()+" "+c.toString(),{attributes:l,body:d}}const nc=()=>{let s;try{if(s=fetch,typeof s=="function")return s}catch{}};let Ri=nc();function rc(s){Ri=s}function sc(){return Ri}function oc(s,t){const e=zi(s);if(!e)return 0;let i;if(!e.maxURL)i=0;else{let g=0;e.resources.forEach(_=>{g=Math.max(g,_.length)});const d=t+".json?icons=";i=e.maxURL-g-e.path.length-d.length}return i}function ac(s){return s===404}const lc=(s,t,e)=>{const i=[],g=oc(s,t),d="icons";let _={type:d,provider:s,prefix:t,icons:[]},u=0;return e.forEach((n,c)=>{u+=n.length+1,u>=g&&c>0&&(i.push(_),_={type:d,provider:s,prefix:t,icons:[]},u=n.length),_.icons.push(n)}),i.push(_),i};function cc(s){if(typeof s=="string"){const t=zi(s);if(t)return t.path}return"/"}const fc=(s,t,e)=>{if(!Ri){e("abort",424);return}let i=cc(t.provider);switch(t.type){case"icons":{const d=t.prefix,u=t.icons.join(","),n=new URLSearchParams({icons:u});i+=d+".json?"+n.toString();break}case"custom":{const d=t.uri;i+=d.slice(0,1)==="/"?d.slice(1):d;break}default:e("abort",400);return}let g=503;Ri(s+i).then(d=>{const _=d.status;if(_!==200){setTimeout(()=>{e(ac(_)?"abort":"next",_)});return}return g=501,d.json()}).then(d=>{if(typeof d!="object"||d===null){setTimeout(()=>{d===404?e("abort",d):e("next",g)});return}setTimeout(()=>{e("success",d)})}).catch(()=>{e("next",g)})},uc={prepare:lc,send:fc};function is(s,t){switch(s){case"local":case"session":Ae[s]=t;break;case"all":for(const e in Ae)Ae[e]=t;break}}const or="data-style";let wo="";function To(s){wo=s}function ns(s,t){let e=Array.from(s.childNodes).find(i=>i.hasAttribute&&i.hasAttribute(or));e||(e=document.createElement("style"),e.setAttribute(or,or),s.appendChild(e)),e.textContent=":host{display:inline-block;vertical-align:"+(t?"-0.125em":"0")+"}span,svg{display:block}"+wo}function xo(){Kr("",uc),co(!0);let s;try{s=window}catch{}if(s){if(yo(),s.IconifyPreload!==void 0){const e=s.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(g=>{try{(typeof g!="object"||g===null||g instanceof Array||typeof g.icons!="object"||typeof g.prefix!="string"||!qr(g))&&console.error(i)}catch{console.error(i)}})}if(s.IconifyProviders!==void 0){const e=s.IconifyProviders;if(typeof e=="object"&&e!==null)for(const i in e){const g="IconifyProviders["+i+"] is invalid.";try{const d=e[i];if(typeof d!="object"||!d||d.resources===void 0)continue;Jr(i,d)||console.error(g)}catch{console.error(g)}}}}return{enableCache:e=>is(e,!0),disableCache:e=>is(e,!1),iconExists:Ll,getIcon:Fl,listIcons:Dl,addIcon:fo,addCollection:qr,calculateSize:Cr,buildIcon:So,loadIcons:Lr,loadIcon:Jl,addAPIProvider:Jr,appendCustomStyle:To,_api:{getAPIConfig:zi,setAPIModule:Kr,sendAPIQuery:go,setFetch:rc,getFetch:sc,listAPIProviders:zl}}}function Oo(s,t){let e=s.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in t)e+=" "+i+'="'+t[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+e+">"+s+"</svg>"}function hc(s){return s.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function dc(s){return"data:image/svg+xml,"+hc(s)}function gc(s){return'url("'+dc(s)+'")'}const Sr={"background-color":"currentColor"},ko={"background-color":"transparent"},rs={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},ss={"-webkit-mask":Sr,mask:Sr,background:ko};for(const s in ss){const t=ss[s];for(const e in rs)t[s+"-"+e]=rs[e]}function os(s){return s?s+(s.match(/^[-0-9.]+$/)?"px":""):"inherit"}function mc(s,t,e){const i=document.createElement("span");let g=s.body;g.indexOf("<a")!==-1&&(g+="<!-- "+Date.now()+" -->");const d=s.attributes,_=Oo(g,{...d,width:t.width+"",height:t.height+""}),u=gc(_),n=i.style,c={"--svg":u,width:os(d.width),height:os(d.height),...e?Sr:ko};for(const h in c)n.setProperty(h,c[h]);return i}let ii;function pc(){try{ii=window.trustedTypes.createPolicy("iconify",{createHTML:s=>s})}catch{ii=null}}function vc(s){return ii===void 0&&pc(),ii?ii.createHTML(s):s}function _c(s){const t=document.createElement("span"),e=s.attributes;let i="";e.width||(i="width: inherit;"),e.height||(i+="height: inherit;"),i&&(e.style=i);const g=Oo(s.body,e);return t.innerHTML=vc(g),t.firstChild}function as(s,t){const e=t.icon.data,i=t.customisations,g=So(e,i);i.preserveAspectRatio&&(g.attributes.preserveAspectRatio=i.preserveAspectRatio);const d=t.renderedMode;let _;switch(d){case"svg":_=_c(g);break;default:_=mc(g,{...pi,...e},d==="mask")}const u=Array.from(s.childNodes).find(n=>{const c=n.tagName&&n.tagName.toUpperCase();return c==="SPAN"||c==="SVG"});u?_.tagName==="SPAN"&&u.tagName===_.tagName?u.setAttribute("style",_.getAttribute("style")):s.replaceChild(_,u):s.appendChild(_)}function ls(s,t,e){const i=e&&(e.rendered?e:e.lastRender);return{rendered:!1,inline:t,icon:s,lastRender:i}}function bc(s="iconify-icon"){let t,e;try{t=window.customElements,e=window.HTMLElement}catch{return}if(!t||!e)return;const i=t.get(s);if(i)return i;const g=["icon","mode","inline","width","height","rotate","flip"],d=class extends e{constructor(){super();Xt(this,"_shadowRoot");Xt(this,"_state");Xt(this,"_checkQueued",!1);const n=this._shadowRoot=this.attachShadow({mode:"open"}),c=sr(this);ns(n,c),this._state=ls({value:""},c),this._queueCheck()}static get observedAttributes(){return g.slice(0)}attributeChangedCallback(n){if(n==="inline"){const c=sr(this),h=this._state;c!==h.inline&&(h.inline=c,ns(this._shadowRoot,c))}else this._queueCheck()}get icon(){const n=this.getAttribute("icon");if(n&&n.slice(0,1)==="{")try{return JSON.parse(n)}catch{}return n}set icon(n){typeof n=="object"&&(n=JSON.stringify(n)),this.setAttribute("icon",n)}get inline(){return sr(this)}set inline(n){n?this.setAttribute("inline","true"):this.removeAttribute("inline")}restartAnimation(){const n=this._state;if(n.rendered){const c=this._shadowRoot;if(n.renderedMode==="svg")try{c.lastChild.setCurrentTime(0);return}catch{}as(c,n)}}get status(){const n=this._state;return n.rendered?"rendered":n.icon.data===null?"failed":"loading"}_queueCheck(){this._checkQueued||(this._checkQueued=!0,setTimeout(()=>{this._check()}))}_check(){if(!this._checkQueued)return;this._checkQueued=!1;const n=this._state,c=this.getAttribute("icon");if(c!==n.icon.value){this._iconChanged(c);return}if(!n.rendered)return;const h=this.getAttribute("mode"),r=Ur(this);(n.attrMode!==h||xl(n.customisations,r))&&this._renderIcon(n.icon,r,h)}_iconChanged(n){const c=Zl(n,(h,r,l)=>{const o=this._state;if(o.rendered||this.getAttribute("icon")!==h)return;const f={value:h,name:r,data:l};f.data?this._gotIconData(f):o.icon=f});c.data?this._gotIconData(c):this._state=ls(c,this._state.inline,this._state)}_gotIconData(n){this._checkQueued=!1,this._renderIcon(n,Ur(this),this.getAttribute("mode"))}_renderIcon(n,c,h){const r=$l(n.data.body,h),l=this._state.inline;as(this._shadowRoot,this._state={rendered:!0,icon:n,inline:l,customisations:c,attrMode:h,renderedMode:r})}};g.forEach(u=>{u in d.prototype||Object.defineProperty(d.prototype,u,{get:function(){return this.getAttribute(u)},set:function(n){n!==null?this.setAttribute(u,n):this.removeAttribute(u)}})});const _=xo();for(const u in _)d[u]=d.prototype[u]=_[u];return t.define(s,d),d}bc()||xo();function cs(s){let t,e;return{c(){t=mt("iconify-icon"),$e(t,"icon",e=s[2]+":"+s[1]),$e(t,"width","100%"),$e(t,"height","100%")},m(i,g){st(i,t,g)},p(i,g){g&6&&e!==(e=i[2]+":"+i[1])&&$e(t,"icon",e)},d(i){i&&it(t)}}}function yc(s){let t,e=s[3]&&cs(s);return{c(){e&&e.c(),t=oe()},m(i,g){e&&e.m(i,g),st(i,t,g)},p(i,g){i[3]?e?e.p(i,g):(e=cs(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(i){i&&it(t),e&&e.d(i)}}}function Cc(s){let t,e;const i=[{componentName:s[0]},{components:s[5]},s[6],{cssProps:s[4]}];let g={$$slots:{default:[yc]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&113?Lt(i,[_&1&&{componentName:d[0]},_&32&&{components:d[5]},_&64&&kt(d[6]),_&16&&{cssProps:d[4]}]):{};_&1038&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}To('svg [stroke-width="2"] { stroke-width: 1.5; }');function Sc(s,t,e){let i;const g=["componentName","color","name","pack","size"];let d=Ct(t,g),{componentName:_="icon"}=t,{color:u=void 0}=t,{name:n=void 0}=t,{pack:c="tabler"}=t,{size:h=void 0}=t;const r=[{component:Rt(),except:[]},...t.components??[]];let l=!1;return Le(()=>{e(3,l=!0)}),s.$$set=o=>{e(9,t=gt(gt({},t),yt(o))),e(6,d=Ct(t,g)),"componentName"in o&&e(0,_=o.componentName),"color"in o&&e(7,u=o.color),"name"in o&&e(1,n=o.name),"pack"in o&&e(2,c=o.pack),"size"in o&&e(8,h=o.size)},s.$$.update=()=>{s.$$.dirty&384&&e(4,i={color:u,size:h})},t=yt(t),[_,n,c,l,i,r,d,u,h]}class wc extends Mt{constructor(t){super(),At(this,t,Sc,Cc,Et,{componentName:0,color:7,name:1,pack:2,size:8})}}const Ft=wc;function Tc(s){let t;const e=s[8].default,i=zt(e,s,s[9],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&512)&&Ht(i,e,g,g[9],t?Yt(e,g[9],d,null):Vt(g[9]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function xc(s){let t,e;const i=[{components:s[2]},{tag:"span"},s[3],{cssProps:s[0]},s[1]];let g={$$slots:{default:[Tc]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&15?Lt(i,[_&4&&{components:d[2]},i[1],_&8&&kt(d[3]),_&1&&{cssProps:d[0]},_&2&&kt(d[1])]):{};_&512&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function Oc(s,t,e){const i=["componentName","color","shape","size"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="avatar"}=t,{color:n=void 0}=t,{shape:c=void 0}=t,{size:h=void 0}=t;const r=[{component:Rt(),except:[]},...t.components??[]];let l={},o={};return s.$$set=f=>{e(10,t=gt(gt({},t),yt(f))),e(3,g=Ct(t,i)),"componentName"in f&&e(4,u=f.componentName),"color"in f&&e(5,n=f.color),"shape"in f&&e(6,c=f.shape),"size"in f&&e(7,h=f.size),"$$scope"in f&&e(9,_=f.$$scope)},s.$$.update=()=>{s.$$.dirty&240&&(e(0,l={color:n,size:h,shape:c}),e(1,o={componentName:u}))},t=yt(t),[l,o,r,g,u,n,c,h,d,_]}class kc extends Mt{constructor(t){super(),At(this,t,Oc,xc,Et,{componentName:4,color:5,shape:6,size:7})}}const Si=kc;function Pc(s){let t;const e=s[19].default,i=zt(e,s,s[22],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&4194304)&&Ht(i,e,g,g[22],t?Yt(e,g[22],d,null):Vt(g[22]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function Ec(s){let t,e,i;const g=[{components:s[3]},s[4],{cssProps:s[1]},s[2]];function d(u){s[20](u)}let _={$$slots:{default:[Pc]},$$scope:{ctx:s}};for(let u=0;u<g.length;u+=1)_=gt(_,g[u]);return s[0]!==void 0&&(_.element=s[0]),t=new Tt({props:_}),Ut.push(()=>re(t,"element",d)),t.$on("click",s[21]),{c(){B(t.$$.fragment)},m(u,n){R(t,u,n),i=!0},p(u,[n]){const c=n&30?Lt(g,[n&8&&{components:u[3]},n&16&&kt(u[4]),n&2&&{cssProps:u[1]},n&4&&kt(u[2])]):{};n&4194304&&(c.$$scope={dirty:n,ctx:u}),!e&&n&1&&(e=!0,c.element=u[0],ne(()=>e=!1)),t.$set(c)},i(u){i||(P(t.$$.fragment,u),i=!0)},o(u){M(t.$$.fragment,u),i=!1},d(u){j(t,u)}}}function Ac(s,t,e){let i;const g=["active","color","componentName","disabled","ghost","href","link","loading","outline","shape","size","target","type"];let d=Ct(t,g),{$$slots:_={},$$scope:u}=t,{active:n=void 0}=t,{color:c=void 0}=t,{componentName:h="button"}=t,{disabled:r=void 0}=t,{ghost:l=void 0}=t,{href:o=void 0}=t,{link:f=void 0}=t,{loading:m=void 0}=t,{outline:a=void 0}=t,{shape:p=void 0}=t,{size:v=void 0}=t,{target:b=void 0}=t,{type:y=void 0}=t;const C=[{component:Rt(),except:[]},...t.components??[]];let S={},w={},k;function F(z){k=z,e(0,k)}function V(z){Hs.call(this,s,z)}return s.$$set=z=>{e(23,t=gt(gt({},t),yt(z))),e(4,d=Ct(t,g)),"active"in z&&e(5,n=z.active),"color"in z&&e(6,c=z.color),"componentName"in z&&e(7,h=z.componentName),"disabled"in z&&e(8,r=z.disabled),"ghost"in z&&e(9,l=z.ghost),"href"in z&&e(10,o=z.href),"link"in z&&e(11,f=z.link),"loading"in z&&e(12,m=z.loading),"outline"in z&&e(13,a=z.outline),"shape"in z&&e(14,p=z.shape),"size"in z&&e(15,v=z.size),"target"in z&&e(16,b=z.target),"type"in z&&e(17,y=z.type),"$$scope"in z&&e(22,u=z.$$scope)},s.$$.update=()=>{s.$$.dirty&1&&e(18,i=!((k==null?void 0:k.textContent)??!0)),s.$$.dirty&524256&&(e(1,S={active:n,color:c,disabled:r,ghost:l,icon:i,link:f,loading:m,outline:a,shape:p,size:v}),e(2,w={componentName:h,href:o,role:"button",tag:o?"a":"button",target:b,type:y??"button"}))},t=yt(t),[k,S,w,C,d,n,c,h,r,l,o,f,m,a,p,v,b,y,i,_,F,V,u]}class Mc extends Mt{constructor(t){super(),At(this,t,Ac,Ec,Et,{active:5,color:6,componentName:7,disabled:8,ghost:9,href:10,link:11,loading:12,outline:13,shape:14,size:15,target:16,type:17})}}const xt=Mc;function Dc(s){let t;const e=s[5].default,i=zt(e,s,s[6],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&64)&&Ht(i,e,g,g[6],t?Yt(e,g[6],d,null):Vt(g[6]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function Lc(s){let t,e;const i=[{components:s[2]},s[3],{cssProps:s[1]},{componentName:s[0]}];let g={$$slots:{default:[Dc]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&15?Lt(i,[_&4&&{components:d[2]},_&8&&kt(d[3]),_&2&&{cssProps:d[1]},_&1&&{componentName:d[0]}]):{};_&64&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function Fc(s,t,e){const i=["componentName","light"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="card-header"}=t,{light:n=void 0}=t;const c=[{component:Rt(),except:[]},...t.components??[]];let h={};return s.$$set=r=>{e(7,t=gt(gt({},t),yt(r))),e(3,g=Ct(t,i)),"componentName"in r&&e(0,u=r.componentName),"light"in r&&e(4,n=r.light),"$$scope"in r&&e(6,_=r.$$scope)},s.$$.update=()=>{s.$$.dirty&16&&e(1,h={light:n})},t=yt(t),[u,h,c,g,n,d,_]}class Ic extends Mt{constructor(t){super(),At(this,t,Fc,Lc,Et,{componentName:0,light:4})}}const Yi=Ic;function Rc(s){let t;const e=s[3].default,i=zt(e,s,s[4],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&16)&&Ht(i,e,g,g[4],t?Yt(e,g[4],d,null):Vt(g[4]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function jc(s){let t,e;const i=[{components:s[1]},s[2],{componentName:s[0]}];let g={$$slots:{default:[Rc]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&7?Lt(i,[_&2&&{components:d[1]},_&4&&kt(d[2]),_&1&&{componentName:d[0]}]):{};_&16&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function Bc(s,t,e){const i=["componentName"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="card-title"}=t;const n=[{component:Rt(),except:[]},...t.components??[]];return s.$$set=c=>{e(5,t=gt(gt({},t),yt(c))),e(2,g=Ct(t,i)),"componentName"in c&&e(0,u=c.componentName),"$$scope"in c&&e(4,_=c.$$scope)},t=yt(t),[u,n,g,d,_]}class Nc extends Mt{constructor(t){super(),At(this,t,Bc,jc,Et,{componentName:0})}}const Hi=Nc;function fs(s){let t,e;return t=new Tt({props:{componentName:s[0]+"-status",cssProps:s[5]}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&1&&(d.componentName=i[0]+"-status"),g&32&&(d.cssProps=i[5]),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function us(s){let t,e;return t=new Yi({props:{$$slots:{default:[Wc]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&262146&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Xc(s){let t;return{c(){t=Pt(s[1])},m(e,i){st(e,t,i)},p(e,i){i&2&&ui(t,e[1])},d(e){e&&it(t)}}}function Wc(s){let t,e;return t=new Hi({props:{$$slots:{default:[Xc]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&262146&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function zc(s){let t,e,i,g=s[2]&&fs(s),d=s[1]&&us(s);const _=s[17].default,u=zt(_,s,s[18],null);return{c(){g&&g.c(),t=ft(),d&&d.c(),e=ft(),u&&u.c()},m(n,c){g&&g.m(n,c),st(n,t,c),d&&d.m(n,c),st(n,e,c),u&&u.m(n,c),i=!0},p(n,c){n[2]?g?(g.p(n,c),c&4&&P(g,1)):(g=fs(n),g.c(),P(g,1),g.m(t.parentNode,t)):g&&(Bt(),M(g,1,1,()=>{g=null}),Nt()),n[1]?d?(d.p(n,c),c&2&&P(d,1)):(d=us(n),d.c(),P(d,1),d.m(e.parentNode,e)):d&&(Bt(),M(d,1,1,()=>{d=null}),Nt()),u&&u.p&&(!i||c&262144)&&Ht(u,_,n,n[18],i?Yt(_,n[18],c,null):Vt(n[18]),null)},i(n){i||(P(g),P(d),P(u,n),i=!0)},o(n){M(g),M(d),M(u,n),i=!1},d(n){n&&(it(t),it(e)),g&&g.d(n),d&&d.d(n),u&&u.d(n)}}}function Yc(s){let t,e;const i=[{components:s[6]},s[7],{cssProps:s[3]},s[4]];let g={$$slots:{default:[zc]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&216?Lt(i,[_&64&&{components:d[6]},_&128&&kt(d[7]),_&8&&{cssProps:d[3]},_&16&&kt(d[4])]):{};_&262183&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function Hc(s,t,e){const i=["componentName","title","stacked","statusColor","statusPosition","statusSize","status","bgColor","borderless","rotate","state","size"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="card"}=t,{title:n=void 0}=t,{stacked:c=void 0}=t,{statusColor:h="primary"}=t,{statusPosition:r="top"}=t,{statusSize:l="md"}=t,{status:o=void 0}=t,{bgColor:f=void 0}=t,{borderless:m=void 0}=t,{rotate:a=void 0}=t,{state:p=void 0}=t,{size:v=void 0}=t;const b=[{component:Rt(),except:[]},...t.components??[]];let y={},C={},S={};return s.$$set=w=>{e(19,t=gt(gt({},t),yt(w))),e(7,g=Ct(t,i)),"componentName"in w&&e(0,u=w.componentName),"title"in w&&e(1,n=w.title),"stacked"in w&&e(8,c=w.stacked),"statusColor"in w&&e(9,h=w.statusColor),"statusPosition"in w&&e(10,r=w.statusPosition),"statusSize"in w&&e(11,l=w.statusSize),"status"in w&&e(2,o=w.status),"bgColor"in w&&e(12,f=w.bgColor),"borderless"in w&&e(13,m=w.borderless),"rotate"in w&&e(14,a=w.rotate),"state"in w&&e(15,p=w.state),"size"in w&&e(16,v=w.size),"$$scope"in w&&e(18,_=w.$$scope)},s.$$.update=()=>{s.$$.dirty&130817&&(e(3,y={stacked:c,bgColor:f,borderless:m,rotate:a,state:p,size:v}),e(4,C={componentName:u}),e(5,S={size:l,position:r,color:h}))},t=yt(t),[u,n,o,y,C,S,b,g,c,h,r,l,f,m,a,p,v,d,_]}class Vc extends Mt{constructor(t){super(),At(this,t,Hc,Yc,Et,{componentName:0,title:1,stacked:8,statusColor:9,statusPosition:10,statusSize:11,status:2,bgColor:12,borderless:13,rotate:14,state:15,size:16})}}const _i=Vc;function Uc(s){let t;const e=s[3].default,i=zt(e,s,s[4],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&16)&&Ht(i,e,g,g[4],t?Yt(e,g[4],d,null):Vt(g[4]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function Gc(s){let t,e;const i=[{components:s[1]},s[2],{componentName:s[0]}];let g={$$slots:{default:[Uc]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&7?Lt(i,[_&2&&{components:d[1]},_&4&&kt(d[2]),_&1&&{componentName:d[0]}]):{};_&16&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function qc(s,t,e){const i=["componentName"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="card-body"}=t;const n=[{component:Rt(),except:[]},...t.components??[]];return s.$$set=c=>{e(5,t=gt(gt({},t),yt(c))),e(2,g=Ct(t,i)),"componentName"in c&&e(0,u=c.componentName),"$$scope"in c&&e(4,_=c.$$scope)},t=yt(t),[u,n,g,d,_]}class Kc extends Mt{constructor(t){super(),At(this,t,qc,Gc,Et,{componentName:0})}}const bi=Kc,Jc="modulepreload",Qc=function(s){return"/call/"+s},hs={},Fr=function(t,e,i){if(!e||e.length===0)return t();const g=document.getElementsByTagName("link");return Promise.all(e.map(d=>{if(d=Qc(d),d in hs)return;hs[d]=!0;const _=d.endsWith(".css"),u=_?'[rel="stylesheet"]':"";if(!!i)for(let h=g.length-1;h>=0;h--){const r=g[h];if(r.href===d&&(!_||r.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${u}`))return;const c=document.createElement("link");if(c.rel=_?"stylesheet":Jc,_||(c.as="script",c.crossOrigin=""),c.href=d,document.head.appendChild(c),_)return new Promise((h,r)=>{c.addEventListener("load",h),c.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>t()).catch(d=>{const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=d,window.dispatchEvent(_),!_.defaultPrevented)throw d})};function ds(s){let t,e,i,g,d,_;return t=new Tt({props:{componentName:"dot-indicator-circle"}}),i=new Tt({props:{componentName:"dot-indicator-circle"}}),d=new Tt({props:{componentName:"dot-indicator-circle"}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment),g=ft(),B(d.$$.fragment)},m(u,n){R(t,u,n),st(u,e,n),R(i,u,n),st(u,g,n),R(d,u,n),_=!0},i(u){_||(P(t.$$.fragment,u),P(i.$$.fragment,u),P(d.$$.fragment,u),_=!0)},o(u){M(t.$$.fragment,u),M(i.$$.fragment,u),M(d.$$.fragment,u),_=!1},d(u){u&&(it(e),it(g)),j(t,u),j(i,u),j(d,u)}}}function Zc(s){let t,e,i=s[0]&&ds();return{c(){i&&i.c(),t=oe()},m(g,d){i&&i.m(g,d),st(g,t,d),e=!0},p(g,d){g[0]?i?d&1&&P(i,1):(i=ds(),i.c(),P(i,1),i.m(t.parentNode,t)):i&&(Bt(),M(i,1,1,()=>{i=null}),Nt())},i(g){e||(P(i),e=!0)},o(g){M(i),e=!1},d(g){g&&it(t),i&&i.d(g)}}}function $c(s){let t,e;const i=[{components:s[3]},s[4],{cssProps:s[1]},s[2]];let g={$$slots:{default:[Zc]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&30?Lt(i,[_&8&&{components:d[3]},_&16&&kt(d[4]),_&2&&{cssProps:d[1]},_&4&&kt(d[2])]):{};_&1025&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function tf(s,t,e){const i=["animated","color","componentName","indicator","tag"];let g=Ct(t,i),{animated:d=void 0}=t,{color:_=void 0}=t,{componentName:u="dot"}=t,{indicator:n=void 0}=t,{tag:c="span"}=t;const h=[{component:Rt(),except:[]},...t.components??[]];let r={},l={};return s.$$set=o=>{e(9,t=gt(gt({},t),yt(o))),e(4,g=Ct(t,i)),"animated"in o&&e(5,d=o.animated),"color"in o&&e(6,_=o.color),"componentName"in o&&e(7,u=o.componentName),"indicator"in o&&e(0,n=o.indicator),"tag"in o&&e(8,c=o.tag)},s.$$.update=()=>{s.$$.dirty&481&&(e(1,r={animated:d,color:_,indicator:n}),e(2,l={tag:c,componentName:u}))},t=yt(t),[n,r,l,h,g,d,_,u,c]}class ef extends Mt{constructor(t){super(),At(this,t,tf,$c,Et,{animated:5,color:6,componentName:7,indicator:0,tag:8})}}const nf=ef,rf=s=>({}),gs=s=>({}),sf=s=>({}),ms=s=>({});function of(s){let t,e,i,g,d;const _=[s[9],{tag:"input"},{components:s[6]},s[4],{cssProps:s[5]}];function u(r){s[32](r)}function n(r){s[33](r)}function c(r){s[34](r)}let h={};for(let r=0;r<_.length;r+=1)h=gt(h,_[r]);return s[0]!==void 0&&(h.value=s[0]),s[3]!==void 0&&(h.element=s[3]),s[1]!==void 0&&(h.id=s[1]),t=new Tt({props:h}),Ut.push(()=>re(t,"value",u)),Ut.push(()=>re(t,"element",n)),Ut.push(()=>re(t,"id",c)),{c(){B(t.$$.fragment)},m(r,l){R(t,r,l),d=!0},p(r,l){const o=l[0]&624?Lt(_,[l[0]&512&&kt(r[9]),_[1],l[0]&64&&{components:r[6]},l[0]&16&&kt(r[4]),l[0]&32&&{cssProps:r[5]}]):{};!e&&l[0]&1&&(e=!0,o.value=r[0],ne(()=>e=!1)),!i&&l[0]&8&&(i=!0,o.element=r[3],ne(()=>i=!1)),!g&&l[0]&2&&(g=!0,o.id=r[1],ne(()=>g=!1)),t.$set(o)},i(r){d||(P(t.$$.fragment,r),d=!0)},o(r){M(t.$$.fragment,r),d=!1},d(r){j(t,r)}}}function af(s){let t,e;const i=[{components:s[6]},{componentName:s[2]+"-wrapper"},s[9],{cssProps:s[7]}];let g={$$slots:{default:[ff]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,_){const u=_[0]&708?Lt(i,[_[0]&64&&{components:d[6]},_[0]&4&&{componentName:d[2]+"-wrapper"},_[0]&512&&kt(d[9]),_[0]&128&&{cssProps:d[7]}]):{};_[0]&319|_[1]&16&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function ps(s){let t,e;return t=new Tt({props:{tag:"span",componentName:s[2]+"-icon",$$slots:{default:[lf]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g[0]&4&&(d.componentName=i[2]+"-icon"),g[1]&16&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function lf(s){let t;const e=s[28].start,i=zt(e,s,s[35],ms);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d[1]&16)&&Ht(i,e,g,g[35],t?Yt(e,g[35],d,sf):Vt(g[35]),ms)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function vs(s){let t,e;return t=new Tt({props:{tag:"span",componentName:s[2]+"-icon",$$slots:{default:[cf]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g[0]&4&&(d.componentName=i[2]+"-icon"),g[1]&16&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function cf(s){let t;const e=s[28].end,i=zt(e,s,s[35],gs);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d[1]&16)&&Ht(i,e,g,g[35],t?Yt(e,g[35],d,rf):Vt(g[35]),gs)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function ff(s){let t,e,i,g,d,_,u,n,c=s[8].start&&ps(s);const h=[{tag:"input"},s[4],{cssProps:s[5]}];function r(a){s[29](a)}function l(a){s[30](a)}function o(a){s[31](a)}let f={};for(let a=0;a<h.length;a+=1)f=gt(f,h[a]);s[0]!==void 0&&(f.value=s[0]),s[3]!==void 0&&(f.element=s[3]),s[1]!==void 0&&(f.id=s[1]),e=new Tt({props:f}),Ut.push(()=>re(e,"value",r)),Ut.push(()=>re(e,"element",l)),Ut.push(()=>re(e,"id",o));let m=s[8].end&&vs(s);return{c(){c&&c.c(),t=ft(),B(e.$$.fragment),_=ft(),m&&m.c(),u=oe()},m(a,p){c&&c.m(a,p),st(a,t,p),R(e,a,p),st(a,_,p),m&&m.m(a,p),st(a,u,p),n=!0},p(a,p){a[8].start?c?(c.p(a,p),p[0]&256&&P(c,1)):(c=ps(a),c.c(),P(c,1),c.m(t.parentNode,t)):c&&(Bt(),M(c,1,1,()=>{c=null}),Nt());const v=p[0]&48?Lt(h,[h[0],p[0]&16&&kt(a[4]),p[0]&32&&{cssProps:a[5]}]):{};!i&&p[0]&1&&(i=!0,v.value=a[0],ne(()=>i=!1)),!g&&p[0]&8&&(g=!0,v.element=a[3],ne(()=>g=!1)),!d&&p[0]&2&&(d=!0,v.id=a[1],ne(()=>d=!1)),e.$set(v),a[8].end?m?(m.p(a,p),p[0]&256&&P(m,1)):(m=vs(a),m.c(),P(m,1),m.m(u.parentNode,u)):m&&(Bt(),M(m,1,1,()=>{m=null}),Nt())},i(a){n||(P(c),P(e.$$.fragment,a),P(m),n=!0)},o(a){M(c),M(e.$$.fragment,a),M(m),n=!1},d(a){a&&(it(t),it(_),it(u)),c&&c.d(a),j(e,a),m&&m.d(a)}}}function uf(s){let t,e,i,g;const d=[af,of],_=[];function u(n,c){return n[8].start||n[8].end?0:1}return t=u(s),e=_[t]=d[t](s),{c(){e.c(),i=oe()},m(n,c){_[t].m(n,c),st(n,i,c),g=!0},p(n,c){let h=t;t=u(n),t===h?_[t].p(n,c):(Bt(),M(_[h],1,1,()=>{_[h]=null}),Nt(),e=_[t],e?e.p(n,c):(e=_[t]=d[t](n),e.c()),P(e,1),e.m(i.parentNode,i))},i(n){g||(P(e),g=!0)},o(n){M(e),g=!1},d(n){n&&it(i),_[t].d(n)}}}function hf(s,t,e){const i=["componentName","disabled","borderRounded","borderFlush","mask","maskOptions","placeholder","readonly","required","size","state","type","value","name","id","min","max","minlength","maxlength","pattern","step"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t;const u=Bs(d);let{componentName:n="input"}=t,{disabled:c=void 0}=t,{borderRounded:h=void 0}=t,{borderFlush:r=void 0}=t,{mask:l=void 0}=t,{maskOptions:o=void 0}=t,{placeholder:f=void 0}=t,{readonly:m=void 0}=t,{required:a=void 0}=t,{size:p=void 0}=t,{state:v=void 0}=t,{type:b=void 0}=t,{value:y=void 0}=t,{name:C=void 0}=t,{id:S=void 0}=t,{min:w=void 0}=t,{max:k=void 0}=t,{minlength:F=void 0}=t,{maxlength:V=void 0}=t,{pattern:z=void 0}=t,{step:Y=void 0}=t;const et=[{component:Rt(),except:[]},...t.components??[]];let H;Le(async()=>{const x=await Fr(()=>import("./inputmask-7e07b0b0.js").then(I=>I.i),[]);if(H!==void 0&&l){var O=new x.default(l,o);O.mask(H)}return()=>{H!==void 0&&l&&x.default.remove(H)}});let Q={componentName:n,placeholder:f,disabled:c,readonly:m,type:b},ct={state:v,borderRounded:h,borderFlush:r},G={size:p};function lt(x){y=x,e(0,y)}function T(x){H=x,e(3,H)}function L(x){S=x,e(1,S)}function D(x){y=x,e(0,y)}function E(x){H=x,e(3,H)}function U(x){S=x,e(1,S)}return s.$$set=x=>{e(36,t=gt(gt({},t),yt(x))),e(9,g=Ct(t,i)),"componentName"in x&&e(2,n=x.componentName),"disabled"in x&&e(10,c=x.disabled),"borderRounded"in x&&e(11,h=x.borderRounded),"borderFlush"in x&&e(12,r=x.borderFlush),"mask"in x&&e(13,l=x.mask),"maskOptions"in x&&e(14,o=x.maskOptions),"placeholder"in x&&e(15,f=x.placeholder),"readonly"in x&&e(16,m=x.readonly),"required"in x&&e(17,a=x.required),"size"in x&&e(18,p=x.size),"state"in x&&e(19,v=x.state),"type"in x&&e(20,b=x.type),"value"in x&&e(0,y=x.value),"name"in x&&e(21,C=x.name),"id"in x&&e(1,S=x.id),"min"in x&&e(22,w=x.min),"max"in x&&e(23,k=x.max),"minlength"in x&&e(24,F=x.minlength),"maxlength"in x&&e(25,V=x.maxlength),"pattern"in x&&e(26,z=x.pattern),"step"in x&&e(27,Y=x.step),"$$scope"in x&&e(35,_=x.$$scope)},s.$$.update=()=>{s.$$.dirty[0]&268409860&&(e(5,ct={size:p,state:v,borderRounded:h,borderFlush:r}),e(4,Q={componentName:n,placeholder:f,disabled:c,readonly:m,required:a,type:b,name:C,min:w,max:k,minlength:F,maxlength:V,pattern:z,step:Y}))},t=yt(t),[y,S,n,H,Q,ct,et,G,u,g,c,h,r,l,o,f,m,a,p,v,b,C,w,k,F,V,z,Y,d,lt,T,L,D,E,U,_]}class df extends Mt{constructor(t){super(),At(this,t,hf,uf,Et,{componentName:2,disabled:10,borderRounded:11,borderFlush:12,mask:13,maskOptions:14,placeholder:15,readonly:16,required:17,size:18,state:19,type:20,value:0,name:21,id:1,min:22,max:23,minlength:24,maxlength:25,pattern:26,step:27},null,[-1,-1])}}const gf=df;function mf(s){let t;const e=s[3].default,i=zt(e,s,s[4],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&16)&&Ht(i,e,g,g[4],t?Yt(e,g[4],d,null):Vt(g[4]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function pf(s){let t,e;const i=[s[2],{componentName:s[0]},{components:s[1]}];let g={$$slots:{default:[mf]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&7?Lt(i,[_&4&&kt(d[2]),_&1&&{componentName:d[0]},_&2&&{components:d[1]}]):{};_&16&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function vf(s,t,e){const i=["componentName"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="modal-title"}=t;const n=[{component:Rt(),except:[]},...t.components??[]];return s.$$set=c=>{e(5,t=gt(gt({},t),yt(c))),e(2,g=Ct(t,i)),"componentName"in c&&e(0,u=c.componentName),"$$scope"in c&&e(4,_=c.$$scope)},t=yt(t),[u,n,g,d,_]}class _f extends Mt{constructor(t){super(),At(this,t,vf,pf,Et,{componentName:0})}}const bf=_f;function yf(s){let t;const e=s[3].default,i=zt(e,s,s[4],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&16)&&Ht(i,e,g,g[4],t?Yt(e,g[4],d,null):Vt(g[4]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function Cf(s){let t,e;const i=[s[2],{componentName:s[0]},{components:s[1]}];let g={$$slots:{default:[yf]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&7?Lt(i,[_&4&&kt(d[2]),_&1&&{componentName:d[0]},_&2&&{components:d[1]}]):{};_&16&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function Sf(s,t,e){const i=["componentName"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="modal-header"}=t;const n=[{component:Rt(),except:[]},...t.components??[]];return s.$$set=c=>{e(5,t=gt(gt({},t),yt(c))),e(2,g=Ct(t,i)),"componentName"in c&&e(0,u=c.componentName),"$$scope"in c&&e(4,_=c.$$scope)},t=yt(t),[u,n,g,d,_]}class wf extends Mt{constructor(t){super(),At(this,t,Sf,Cf,Et,{componentName:0})}}const Tf=wf,xf=s=>({}),_s=s=>({});function bs(s){let t,e;return t=new Tf({props:{$$slots:{default:[kf]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&2097184&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Of(s){let t;return{c(){t=Pt(s[5])},m(e,i){st(e,t,i)},p(e,i){i&32&&ui(t,e[5])},d(e){e&&it(t)}}}function kf(s){let t,e;return t=new bf({props:{$$slots:{default:[Of]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&2097184&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function ys(s){let t,e;return t=new xt({props:{"aria-label":"X",type:"button",componentName:s[2]+"-close"}}),t.$on("click",s[19]),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&4&&(d.componentName=i[2]+"-close"),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Pf(s){let t,e,i=s[4]&&ys(s);return{c(){i&&i.c(),t=oe()},m(g,d){i&&i.m(g,d),st(g,t,d),e=!0},p(g,d){g[4]?i?(i.p(g,d),d&16&&P(i,1)):(i=ys(g),i.c(),P(i,1),i.m(t.parentNode,t)):i&&(Bt(),M(i,1,1,()=>{i=null}),Nt())},i(g){e||(P(i),e=!0)},o(g){M(i),e=!1},d(g){g&&it(t),i&&i.d(g)}}}function Ef(s){let t,e,i,g=s[5]&&bs(s);const d=s[18].default,_=zt(d,s,s[21],null),u=s[18].close,n=zt(u,s,s[21],_s),c=n||Pf(s);return{c(){g&&g.c(),t=ft(),_&&_.c(),e=ft(),c&&c.c()},m(h,r){g&&g.m(h,r),st(h,t,r),_&&_.m(h,r),st(h,e,r),c&&c.m(h,r),i=!0},p(h,r){h[5]?g?(g.p(h,r),r&32&&P(g,1)):(g=bs(h),g.c(),P(g,1),g.m(t.parentNode,t)):g&&(Bt(),M(g,1,1,()=>{g=null}),Nt()),_&&_.p&&(!i||r&2097152)&&Ht(_,d,h,h[21],i?Yt(d,h[21],r,null):Vt(h[21]),null),n?n.p&&(!i||r&2097152)&&Ht(n,u,h,h[21],i?Yt(u,h[21],r,xf):Vt(h[21]),_s):c&&c.p&&(!i||r&20)&&c.p(h,i?r:-1)},i(h){i||(P(g),P(_,h),P(c,h),i=!0)},o(h){M(g),M(_,h),M(c,h),i=!1},d(h){h&&(it(t),it(e)),g&&g.d(h),_&&_.d(h),c&&c.d(h)}}}function Af(s){let t,e;return t=new Tt({props:{componentName:s[2]+"-content",$$slots:{default:[Ef]},$$scope:{ctx:s}}}),t.$on("click",s[11]),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&4&&(d.componentName=i[2]+"-content"),g&2097204&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Mf(s){let t,e;return t=new Tt({props:{componentName:s[2]+"-container",$$slots:{default:[Af]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&4&&(d.componentName=i[2]+"-container"),g&2097204&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Cs(s){let t,e;return t=new Tt({props:{componentName:s[2]+"-backdrop",cssProps:{absolute:s[3]},show:s[0]}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&4&&(d.componentName=i[2]+"-backdrop"),g&8&&(d.cssProps={absolute:i[3]}),g&1&&(d.show=i[0]),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Df(s){let t,e,i,g,d;const _=[s[12],{componentName:s[2]},{cssProps:s[8]},{components:s[9]},{tabindex:"0"},{role:"dialog"},{show:s[0]}];function u(h){s[20](h)}let n={$$slots:{default:[Mf]},$$scope:{ctx:s}};for(let h=0;h<_.length;h+=1)n=gt(n,_[h]);s[7]!==void 0&&(n.element=s[7]),t=new Tt({props:n}),Ut.push(()=>re(t,"element",u)),t.$on("click",s[10]);let c=s[1]&&Cs(s);return{c(){B(t.$$.fragment),i=ft(),c&&c.c(),g=oe()},m(h,r){R(t,h,r),st(h,i,r),c&&c.m(h,r),st(h,g,r),d=!0},p(h,[r]){const l=r&4869?Lt(_,[r&4096&&kt(h[12]),r&4&&{componentName:h[2]},r&256&&{cssProps:h[8]},r&512&&{components:h[9]},_[4],_[5],r&1&&{show:h[0]}]):{};r&2097204&&(l.$$scope={dirty:r,ctx:h}),!e&&r&128&&(e=!0,l.element=h[7],ne(()=>e=!1)),t.$set(l),h[1]?c?(c.p(h,r),r&2&&P(c,1)):(c=Cs(h),c.c(),P(c,1),c.m(g.parentNode,g)):c&&(Bt(),M(c,1,1,()=>{c=null}),Nt())},i(h){d||(P(t.$$.fragment,h),P(c),d=!0)},o(h){M(t.$$.fragment,h),M(c),d=!1},d(h){h&&(it(i),it(g)),j(t,h),c&&c.d(h)}}}function Lf(s,t,e){const i=["autoClose","backdrop","componentName","absolute","dismissible","show","placement","scrollable","size","title","close"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t;const u=hi(),n=[{component:Rt(),except:["close"]},...t.components??[]];let{autoClose:c=void 0}=t,{backdrop:h=!0}=t,{componentName:r="modal"}=t,{absolute:l=void 0}=t,{dismissible:o=void 0}=t,{show:f=void 0}=t,{placement:m="top"}=t,{scrollable:a=void 0}=t,{size:p="md"}=t,{title:v=void 0}=t;const b=()=>{e(0,f=!1),u("close")},y=Y=>{f&&S&&c&&Y.key==="Escape"&&!Y.defaultPrevented&&b()},C=Y=>{f&&S&&c&&!Y.defaultPrevented&&b()};let S,w;const k=Y=>{Y.stopPropagation()};Le(()=>{if(Fr(()=>import("./focus-trap.esm-4d3da9a7.js"),[]).then(Y=>{e(17,w=Y.createFocusTrap(S,{escapeDeactivates:!1}))}),document&&c)return document.addEventListener("keyup",y,!0),()=>{document.removeEventListener("keyup",y,!0)}});let F={};const V=()=>b();function z(Y){S=Y,e(7,S)}return s.$$set=Y=>{e(24,t=gt(gt({},t),yt(Y))),e(12,g=Ct(t,i)),"autoClose"in Y&&e(13,c=Y.autoClose),"backdrop"in Y&&e(1,h=Y.backdrop),"componentName"in Y&&e(2,r=Y.componentName),"absolute"in Y&&e(3,l=Y.absolute),"dismissible"in Y&&e(4,o=Y.dismissible),"show"in Y&&e(0,f=Y.show),"placement"in Y&&e(14,m=Y.placement),"scrollable"in Y&&e(15,a=Y.scrollable),"size"in Y&&e(16,p=Y.size),"title"in Y&&e(5,v=Y.title),"$$scope"in Y&&e(21,_=Y.$$scope)},s.$$.update=()=>{s.$$.dirty&9&&typeof window<"u"&&!l&&(f?document.body.classList.add(we("body-modal-show")??""):document.body.classList.contains(we("body-modal-show")??"")&&document.body.classList.remove(we("body-modal-show")??"")),s.$$.dirty&131075&&w&&h&&setTimeout(()=>{try{f?w.activate():w.deactivate()}catch(Y){console.log("erro: ",Y)}},500),s.$$.dirty&114696&&e(8,F={placement:m,scrollable:a,size:p,absolute:l})},t=yt(t),[f,h,r,l,o,v,b,S,F,n,C,k,g,c,m,a,p,w,d,V,z,_]}class Ff extends Mt{constructor(t){super(),At(this,t,Lf,Df,Et,{autoClose:13,backdrop:1,componentName:2,absolute:3,dismissible:4,show:0,placement:14,scrollable:15,size:16,title:5,close:6})}get close(){return this.$$.ctx[6]}}const If=Ff;function Rf(s){let t;const e=s[3].default,i=zt(e,s,s[4],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&16)&&Ht(i,e,g,g[4],t?Yt(e,g[4],d,null):Vt(g[4]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function jf(s){let t,e;const i=[s[2],{componentName:s[0]},{components:s[1]}];let g={$$slots:{default:[Rf]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&7?Lt(i,[_&4&&kt(d[2]),_&1&&{componentName:d[0]},_&2&&{components:d[1]}]):{};_&16&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function Bf(s,t,e){const i=["componentName"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="modal-body"}=t;const n=[{component:Rt(),except:[]},...t.components??[]];return s.$$set=c=>{e(5,t=gt(gt({},t),yt(c))),e(2,g=Ct(t,i)),"componentName"in c&&e(0,u=c.componentName),"$$scope"in c&&e(4,_=c.$$scope)},t=yt(t),[u,n,g,d,_]}class Nf extends Mt{constructor(t){super(),At(this,t,Bf,jf,Et,{componentName:0})}}const Xf=Nf;function Wf(s){let t;const e=s[3].default,i=zt(e,s,s[4],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&16)&&Ht(i,e,g,g[4],t?Yt(e,g[4],d,null):Vt(g[4]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function zf(s){let t,e;const i=[s[2],{componentName:s[0]},{components:s[1]}];let g={$$slots:{default:[Wf]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&7?Lt(i,[_&4&&kt(d[2]),_&1&&{componentName:d[0]},_&2&&{components:d[1]}]):{};_&16&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function Yf(s,t,e){const i=["componentName"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="modal-footer"}=t;const n=[{component:Rt(),except:[]},...t.components??[]];return s.$$set=c=>{e(5,t=gt(gt({},t),yt(c))),e(2,g=Ct(t,i)),"componentName"in c&&e(0,u=c.componentName),"$$scope"in c&&e(4,_=c.$$scope)},t=yt(t),[u,n,g,d,_]}class Hf extends Mt{constructor(t){super(),At(this,t,Yf,zf,Et,{componentName:0})}}const Vf=Hf;function Uf(s){let t;const e=s[13].default,i=zt(e,s,s[15],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&32768)&&Ht(i,e,g,g[15],t?Yt(e,g[15],d,null):Vt(g[15]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function Ss(s){let t,e;return t=new Tt({props:{componentName:s[1]+"-backdrop",show:s[0]}}),t.$on("click",s[8]),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&2&&(d.componentName=i[1]+"-backdrop"),g&1&&(d.show=i[0]),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function ws(s){let t,e,i=s[2]&&Ts(s);return{c(){i&&i.c(),t=oe()},m(g,d){i&&i.m(g,d),st(g,t,d),e=!0},p(g,d){g[2]?i?(i.p(g,d),d&4&&P(i,1)):(i=Ts(g),i.c(),P(i,1),i.m(t.parentNode,t)):i&&(Bt(),M(i,1,1,()=>{i=null}),Nt())},i(g){e||(P(i),e=!0)},o(g){M(i),e=!1},d(g){g&&it(t),i&&i.d(g)}}}function Ts(s){let t,e;return t=new Tt({props:{componentName:s[1]+"-no-scroll"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&2&&(d.componentName=i[1]+"-no-scroll"),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Gf(s){let t,e,i,g,d,_;const u=[s[7],s[9],{cssProps:s[5]},{componentName:s[1]},{tabindex:"0"},{show:s[0]}];function n(l){s[14](l)}let c={$$slots:{default:[Uf]},$$scope:{ctx:s}};for(let l=0;l<u.length;l+=1)c=gt(c,u[l]);s[4]!==void 0&&(c.element=s[4]),t=new Tt({props:c}),Ut.push(()=>re(t,"element",n));let h=s[3]&&Ss(s),r=s[0]&&ws(s);return{c(){B(t.$$.fragment),i=ft(),h&&h.c(),g=ft(),r&&r.c(),d=oe()},m(l,o){R(t,l,o),st(l,i,o),h&&h.m(l,o),st(l,g,o),r&&r.m(l,o),st(l,d,o),_=!0},p(l,o){const f=o&675?Lt(u,[o&128&&kt(l[7]),o&512&&kt(l[9]),o&32&&{cssProps:l[5]},o&2&&{componentName:l[1]},u[4],o&1&&{show:l[0]}]):{};o&32768&&(f.$$scope={dirty:o,ctx:l}),!e&&o&16&&(e=!0,f.element=l[4],ne(()=>e=!1)),t.$set(f),l[3]?h?(h.p(l,o),o&8&&P(h,1)):(h=Ss(l),h.c(),P(h,1),h.m(g.parentNode,g)):h&&(Bt(),M(h,1,1,()=>{h=null}),Nt()),l[0]?r?(r.p(l,o),o&1&&P(r,1)):(r=ws(l),r.c(),P(r,1),r.m(d.parentNode,d)):r&&(Bt(),M(r,1,1,()=>{r=null}),Nt())},i(l){_||(P(t.$$.fragment,l),P(h),P(r),_=!0)},o(l){M(t.$$.fragment,l),M(h),M(r),_=!1},d(l){l&&(it(i),it(g),it(d)),j(t,l),h&&h.d(l),r&&r.d(l)}}}function qf(s){let t,e;return t=new Tt({props:{components:s[6],componentName:s[1]+"-wrapper",$$slots:{default:[Gf]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,[g]){const d={};g&2&&(d.componentName=i[1]+"-wrapper"),g&33343&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Kf(s,t,e){const i=["componentName","placement","noScroll","backdrop","autoClose","show"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="offcanvas"}=t,{placement:n="start"}=t,{noScroll:c=void 0}=t,{backdrop:h=void 0}=t,{autoClose:r=void 0}=t,{show:l=void 0}=t;const o=hi(),f=[{component:Rt(),except:["close"]},...t.components??[]],m=()=>{e(0,l=!1),o("close")};ha("OFFCANVAS",{close:m});let a,p,v={componentName:u,...g},b={placement:n};const y=w=>{l&&a&&r&&w.key==="Escape"&&!w.defaultPrevented&&m()},C=w=>{l&&a&&r&&!a.contains(w.target)&&!w.defaultPrevented&&m()};Le(()=>{if(Fr(()=>import("./focus-trap.esm-4d3da9a7.js"),[]).then(w=>{e(12,p=w.createFocusTrap(a,{escapeDeactivates:!1}))}),document&&r)return document.addEventListener("keyup",y,!0),document.addEventListener("click",C,!0),()=>{document.removeEventListener("keyup",y,!0),document.removeEventListener("click",C,!0)}});function S(w){a=w,e(4,a)}return s.$$set=w=>{e(19,t=gt(gt({},t),yt(w))),e(9,g=Ct(t,i)),"componentName"in w&&e(1,u=w.componentName),"placement"in w&&e(10,n=w.placement),"noScroll"in w&&e(2,c=w.noScroll),"backdrop"in w&&e(3,h=w.backdrop),"autoClose"in w&&e(11,r=w.autoClose),"show"in w&&e(0,l=w.show),"$$scope"in w&&e(15,_=w.$$scope)},s.$$.update=()=>{s.$$.dirty&4105&&p&&h&&setTimeout(()=>{try{l?p.activate():p.deactivate()}catch{}},500),s.$$.dirty&1024&&e(5,b={placement:n})},t=yt(t),[l,u,c,h,a,b,f,v,C,g,n,r,p,d,S,_]}class Jf extends Mt{constructor(t){super(),At(this,t,Kf,qf,Et,{componentName:1,placement:10,noScroll:2,backdrop:3,autoClose:11,show:0})}}const Qf=Jf;function Zf(s){let t;const e=s[3].default,i=zt(e,s,s[4],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&16)&&Ht(i,e,g,g[4],t?Yt(e,g[4],d,null):Vt(g[4]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function $f(s){let t,e;const i=[s[2],{componentName:s[0]},{components:s[1]}];let g={$$slots:{default:[Zf]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&7?Lt(i,[_&4&&kt(d[2]),_&1&&{componentName:d[0]},_&2&&{components:d[1]}]):{};_&16&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function tu(s,t,e){const i=["componentName"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="offcanvas-body"}=t;const n=[{component:Rt(),except:[]},...t.components??[]];return s.$$set=c=>{e(5,t=gt(gt({},t),yt(c))),e(2,g=Ct(t,i)),"componentName"in c&&e(0,u=c.componentName),"$$scope"in c&&e(4,_=c.$$scope)},t=yt(t),[u,n,g,d,_]}class eu extends Mt{constructor(t){super(),At(this,t,tu,$f,Et,{componentName:0})}}const iu=eu;function nu(s){let t;const e=s[5].default,i=zt(e,s,s[6],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&64)&&Ht(i,e,g,g[6],t?Yt(e,g[6],d,null):Vt(g[6]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function ru(s){let t,e;return t=new Tt({props:{componentName:s[0]+"-title",$$slots:{default:[su]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&1&&(d.componentName=i[0]+"-title"),g&66&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function su(s){let t;return{c(){t=Pt(s[1])},m(e,i){st(e,t,i)},p(e,i){i&2&&ui(t,e[1])},d(e){e&&it(t)}}}function ou(s){let t,e,i,g,d;const _=[ru,nu],u=[];function n(c,h){return c[1]?0:1}return t=n(s),e=u[t]=_[t](s),g=new xt({props:{componentName:s[0]+"-btn","aria-label":"Close"}}),g.$on("click",s[3]),{c(){e.c(),i=ft(),B(g.$$.fragment)},m(c,h){u[t].m(c,h),st(c,i,h),R(g,c,h),d=!0},p(c,h){let r=t;t=n(c),t===r?u[t].p(c,h):(Bt(),M(u[r],1,1,()=>{u[r]=null}),Nt(),e=u[t],e?e.p(c,h):(e=u[t]=_[t](c),e.c()),P(e,1),e.m(i.parentNode,i));const l={};h&1&&(l.componentName=c[0]+"-btn"),g.$set(l)},i(c){d||(P(e),P(g.$$.fragment,c),d=!0)},o(c){M(e),M(g.$$.fragment,c),d=!1},d(c){c&&it(i),u[t].d(c),j(g,c)}}}function au(s){let t,e;const i=[s[4],{componentName:s[0]},{components:s[2]}];let g={$$slots:{default:[ou]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&21?Lt(i,[_&16&&kt(d[4]),_&1&&{componentName:d[0]},_&4&&{components:d[2]}]):{};_&67&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function lu(s,t,e){const i=["componentName","title"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="offcanvas-header"}=t,{title:n=void 0}=t;const c=da("OFFCANVAS"),h=[{component:Rt(),except:[]},...t.components??[]],r=()=>{c&&c.close&&c.close()};return s.$$set=l=>{e(8,t=gt(gt({},t),yt(l))),e(4,g=Ct(t,i)),"componentName"in l&&e(0,u=l.componentName),"title"in l&&e(1,n=l.title),"$$scope"in l&&e(6,_=l.$$scope)},t=yt(t),[u,n,h,r,g,d,_]}class cu extends Mt{constructor(t){super(),At(this,t,lu,au,Et,{componentName:0,title:1})}}const fu=cu;function uu(s){let t;const e=s[3].default,i=zt(e,s,s[4],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&16)&&Ht(i,e,g,g[4],t?Yt(e,g[4],d,null):Vt(g[4]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function hu(s){let t,e;const i=[{components:s[1]},s[2],{componentName:s[0]}];let g={$$slots:{default:[uu]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&7?Lt(i,[_&2&&{components:d[1]},_&4&&kt(d[2]),_&1&&{componentName:d[0]}]):{};_&16&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function du(s,t,e){const i=["componentName"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="popover-header"}=t;const n=[{component:Rt(),except:[]},...t.components??[]];return s.$$set=c=>{e(5,t=gt(gt({},t),yt(c))),e(2,g=Ct(t,i)),"componentName"in c&&e(0,u=c.componentName),"$$scope"in c&&e(4,_=c.$$scope)},t=yt(t),[u,n,g,d,_]}class gu extends Mt{constructor(t){super(),At(this,t,du,hu,Et,{componentName:0})}}const Po=gu;function xs(s){let t,e;return t=new Po({props:{$$slots:{default:[mu]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&513&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function mu(s){let t;return{c(){t=Pt(s[0])},m(e,i){st(e,t,i)},p(e,i){i&1&&ui(t,e[0])},d(e){e&&it(t)}}}function pu(s){let t,e,i=s[0]&&xs(s);const g=s[8].default,d=zt(g,s,s[9],null);return{c(){i&&i.c(),t=ft(),d&&d.c()},m(_,u){i&&i.m(_,u),st(_,t,u),d&&d.m(_,u),e=!0},p(_,u){_[0]?i?(i.p(_,u),u&1&&P(i,1)):(i=xs(_),i.c(),P(i,1),i.m(t.parentNode,t)):i&&(Bt(),M(i,1,1,()=>{i=null}),Nt()),d&&d.p&&(!e||u&512)&&Ht(d,g,_,_[9],e?Yt(g,_[9],u,null):Vt(_[9]),null)},i(_){e||(P(i),P(d,_),e=!0)},o(_){M(i),M(d,_),e=!1},d(_){_&&it(t),i&&i.d(_),d&&d.d(_)}}}function vu(s){let t,e;const i=[{components:s[2]},s[3],s[1]];let g={$$slots:{default:[pu]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new no({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&14?Lt(i,[_&4&&{components:d[2]},_&8&&kt(d[3]),_&2&&kt(d[1])]):{};_&513&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function _u(s,t,e){let i;const g=["componentName","arrow","popupOffset","title","trigger"];let d=Ct(t,g),{$$slots:_={},$$scope:u}=t,{componentName:n="popover"}=t,{arrow:c=!0}=t,{popupOffset:h=8}=t,{title:r=void 0}=t,{trigger:l="click"}=t;const o=[{component:Rt(),except:[]},...t.components??[]];return s.$$set=f=>{e(10,t=gt(gt({},t),yt(f))),e(3,d=Ct(t,g)),"componentName"in f&&e(4,n=f.componentName),"arrow"in f&&e(5,c=f.arrow),"popupOffset"in f&&e(6,h=f.popupOffset),"title"in f&&e(0,r=f.title),"trigger"in f&&e(7,l=f.trigger),"$$scope"in f&&e(9,u=f.$$scope)},s.$$.update=()=>{s.$$.dirty&240&&e(1,i={componentName:n,arrow:c,trigger:l,popupOffset:h})},t=yt(t),[r,i,o,d,n,c,h,l,_,u]}class bu extends Mt{constructor(t){super(),At(this,t,_u,vu,Et,{componentName:4,arrow:5,popupOffset:6,title:0,trigger:7})}}const Eo=bu;function yu(s){let t;const e=s[3].default,i=zt(e,s,s[4],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&16)&&Ht(i,e,g,g[4],t?Yt(e,g[4],d,null):Vt(g[4]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function Cu(s){let t,e;const i=[{components:s[1]},s[2],{componentName:s[0]}];let g={$$slots:{default:[yu]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&7?Lt(i,[_&2&&{components:d[1]},_&4&&kt(d[2]),_&1&&{componentName:d[0]}]):{};_&16&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function Su(s,t,e){const i=["componentName"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="popover-body"}=t;const n=[{component:Rt(),except:[]},...t.components??[]];return s.$$set=c=>{e(5,t=gt(gt({},t),yt(c))),e(2,g=Ct(t,i)),"componentName"in c&&e(0,u=c.componentName),"$$scope"in c&&e(4,_=c.$$scope)},t=yt(t),[u,n,g,d,_]}class wu extends Mt{constructor(t){super(),At(this,t,Su,Cu,Et,{componentName:0})}}const Ao=wu;function Tu(s){let t;const e=s[7].default,i=zt(e,s,s[8],null);return{c(){i&&i.c()},m(g,d){i&&i.m(g,d),t=!0},p(g,d){i&&i.p&&(!t||d&256)&&Ht(i,e,g,g[8],t?Yt(e,g[8],d,null):Vt(g[8]),null)},i(g){t||(P(i,g),t=!0)},o(g){M(i,g),t=!1},d(g){i&&i.d(g)}}}function xu(s){let t,e;const i=[{components:s[2]},{tag:"span"},s[3],{cssProps:s[1]},s[0]];let g={$$slots:{default:[Tu]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new Tt({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&15?Lt(i,[_&4&&{components:d[2]},i[1],_&8&&kt(d[3]),_&2&&{cssProps:d[1]},_&1&&kt(d[0])]):{};_&256&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function Ou(s,t,e){const i=["componentName","color","lite"];let g=Ct(t,i),{$$slots:d={},$$scope:_}=t,{componentName:u="status"}=t,{color:n=void 0}=t,{lite:c=void 0}=t;const h=[{component:Rt(),except:[]},...t.components??[]];let r={},l={};return s.$$set=o=>{e(9,t=gt(gt({},t),yt(o))),e(3,g=Ct(t,i)),"componentName"in o&&e(4,u=o.componentName),"color"in o&&e(5,n=o.color),"lite"in o&&e(6,c=o.lite),"$$scope"in o&&e(8,_=o.$$scope)},s.$$.update=()=>{s.$$.dirty&112&&(e(1,l={color:n,lite:c}),e(0,r={componentName:u}))},t=yt(t),[r,l,h,g,u,n,c,d,_]}class ku extends Mt{constructor(t){super(),At(this,t,Ou,xu,Et,{componentName:4,color:5,lite:6})}}const Pu=ku;function Os(s){let t;return{c(){t=Pt(s[1])},m(e,i){st(e,t,i)},p(e,i){i&2&&ui(t,e[1])},d(e){e&&it(t)}}}function Eu(s){let t,e=s[1]&&Os(s);return{c(){e&&e.c(),t=oe()},m(i,g){e&&e.m(i,g),st(i,t,g)},p(i,g){i[1]?e?e.p(i,g):(e=Os(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(i){i&&it(t),e&&e.d(i)}}}function Au(s){let t;const e=s[8].default,i=zt(e,s,s[9],null),g=i||Eu(s);return{c(){g&&g.c()},m(d,_){g&&g.m(d,_),t=!0},p(d,_){i?i.p&&(!t||_&512)&&Ht(i,e,d,d[9],t?Yt(e,d[9],_,null):Vt(d[9]),null):g&&g.p&&(!t||_&2)&&g.p(d,t?_:-1)},i(d){t||(P(g,d),t=!0)},o(d){M(g,d),t=!1},d(d){g&&g.d(d)}}}function Mu(s){let t,e;return t=new Tt({props:{componentName:s[0]+"-inner",$$slots:{default:[Au]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&1&&(d.componentName=i[0]+"-inner"),g&514&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Du(s){let t,e;const i=[{components:s[3]},s[4],s[2]];let g={$$slots:{default:[Mu]},$$scope:{ctx:s}};for(let d=0;d<i.length;d+=1)g=gt(g,i[d]);return t=new no({props:g}),{c(){B(t.$$.fragment)},m(d,_){R(t,d,_),e=!0},p(d,[_]){const u=_&28?Lt(i,[_&8&&{components:d[3]},_&16&&kt(d[4]),_&4&&kt(d[2])]):{};_&515&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){e||(P(t.$$.fragment,d),e=!0)},o(d){M(t.$$.fragment,d),e=!1},d(d){j(t,d)}}}function Lu(s,t,e){let i;const g=["componentName","arrow","popupOffset","trigger","text"];let d=Ct(t,g),{$$slots:_={},$$scope:u}=t,{componentName:n="tooltip"}=t,{arrow:c=!0}=t,{popupOffset:h=0}=t,{trigger:r="hover"}=t,{text:l=void 0}=t;const o=[{component:Rt(),except:[]},...t.components??[]];return s.$$set=f=>{e(10,t=gt(gt({},t),yt(f))),e(4,d=Ct(t,g)),"componentName"in f&&e(0,n=f.componentName),"arrow"in f&&e(5,c=f.arrow),"popupOffset"in f&&e(6,h=f.popupOffset),"trigger"in f&&e(7,r=f.trigger),"text"in f&&e(1,l=f.text),"$$scope"in f&&e(9,u=f.$$scope)},s.$$.update=()=>{s.$$.dirty&225&&e(2,i={componentName:n,arrow:c,trigger:r,popupOffset:h})},t=yt(t),[n,l,i,o,d,c,h,r,_,u]}class Fu extends Mt{constructor(t){super(),At(this,t,Lu,Du,Et,{componentName:0,arrow:5,popupOffset:6,trigger:7,text:1})}}const jt=Fu;function ks(s,t,e){const i=s.slice();return i[2]=t[e],i[4]=e,i}function Iu(s){let t,e,i,g;return e=new _i({props:{class:"w-2/3",$$slots:{default:[Bu]},$$scope:{ctx:s}}}),{c(){t=mt("div"),B(e.$$.fragment),i=ft(),St(t,"class","flex justify-end my-2")},m(d,_){st(d,t,_),R(e,t,null),ut(t,i),g=!0},p(d,_){const u={};_&32&&(u.$$scope={dirty:_,ctx:d}),e.$set(u)},i(d){g||(P(e.$$.fragment,d),g=!0)},o(d){M(e.$$.fragment,d),g=!1},d(d){d&&it(t),j(e)}}}function Ru(s){let t,e,i,g;return e=new _i({props:{bgColor:"primary",class:"w-2/3",$$slots:{default:[Xu]},$$scope:{ctx:s}}}),{c(){t=mt("div"),B(e.$$.fragment),i=ft(),St(t,"class","flex justify-start my-2")},m(d,_){st(d,t,_),R(e,t,null),ut(t,i),g=!0},p(d,_){const u={};_&32&&(u.$$scope={dirty:_,ctx:d}),e.$set(u)},i(d){g||(P(e.$$.fragment,d),g=!0)},o(d){M(e.$$.fragment,d),g=!1},d(d){d&&it(t),j(e)}}}function ju(s){let t=s[2]+"",e;return{c(){e=Pt(t)},m(i,g){st(i,e,g)},p:vt,d(i){i&&it(e)}}}function Bu(s){let t,e;return t=new bi({props:{$$slots:{default:[ju]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&32&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Nu(s){let t=s[2]+"",e;return{c(){e=Pt(t)},m(i,g){st(i,e,g)},p:vt,d(i){i&&it(e)}}}function Xu(s){let t,e;return t=new bi({props:{$$slots:{default:[Nu]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&32&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Ps(s){let t,e,i,g;const d=[Ru,Iu],_=[];function u(n,c){return n[4]%2==0?0:1}return t=u(s),e=_[t]=d[t](s),{c(){e.c(),i=oe()},m(n,c){_[t].m(n,c),st(n,i,c),g=!0},p(n,c){e.p(n,c)},i(n){g||(P(e),g=!0)},o(n){M(e),g=!1},d(n){n&&it(i),_[t].d(n)}}}function Wu(s){let t,e;return t=new Ft({props:{name:"send"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function zu(s){let t,e,i,g,d,_,u,n,c,h,r,l,o=jr(s[0]),f=[];for(let a=0;a<o.length;a+=1)f[a]=Ps(ks(s,o,a));const m=a=>M(f[a],1,1,()=>{f[a]=null});return _=new gf({props:{borderRounded:!0,size:"lg",placeholder:"Message..."}}),c=new xt({props:{color:"primary",size:"md",$$slots:{default:[Wu]},$$scope:{ctx:s}}}),{c(){t=mt("div"),e=mt("div");for(let a=0;a<f.length;a+=1)f[a].c();i=ft(),g=mt("form"),d=mt("div"),B(_.$$.fragment),u=ft(),n=mt("div"),B(c.$$.fragment),St(e,"class","flex flex-col-reverse"),St(t,"class","flex-grow overflow-y-auto mb-4"),St(d,"class","flex-grow"),St(g,"class","flex items-center justify-between space-x-2")},m(a,p){st(a,t,p),ut(t,e);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(e,null);st(a,i,p),st(a,g,p),ut(g,d),R(_,d,null),ut(g,u),ut(g,n),R(c,n,null),h=!0,r||(l=Me(g,"submit",zs(s[1])),r=!0)},p(a,[p]){if(p&1){o=jr(a[0]);let b;for(b=0;b<o.length;b+=1){const y=ks(a,o,b);f[b]?(f[b].p(y,p),P(f[b],1)):(f[b]=Ps(y),f[b].c(),P(f[b],1),f[b].m(e,null))}for(Bt(),b=o.length;b<f.length;b+=1)m(b);Nt()}const v={};p&32&&(v.$$scope={dirty:p,ctx:a}),c.$set(v)},i(a){if(!h){for(let p=0;p<o.length;p+=1)P(f[p]);P(_.$$.fragment,a),P(c.$$.fragment,a),h=!0}},o(a){f=f.filter(Boolean);for(let p=0;p<f.length;p+=1)M(f[p]);M(_.$$.fragment,a),M(c.$$.fragment,a),h=!1},d(a){a&&(it(t),it(i),it(g)),ea(f,a),j(_),j(c),r=!1,l()}}}function Yu(s){return[["Lorem, ipsum dolor sit amet consectetur adipisicing elit. Reiciendis, ad?","Lorem, ipsum dolor sit amet consectetur adipisicing elit. Reiciendis, ad?","Lorem, ipsum dolor sit amet consectetur adipisicing elit. Reiciendis, ad?","Lorem, ipsum dolor sit amet consectetur adipisicing elit. Reiciendis, ad?","Lorem, ipsum dolor sit amet consectetur adipisicing elit. Reiciendis, ad?","Lorem, ipsum dolor sit amet consectetur adipisicing elit. Reiciendis, ad?","Lorem, ipsum dolor sit amet consectetur adipisicing elit. Reiciendis, ad?","Lorem, ipsum dolor sit amet consectetur adipisicing elit. Reiciendis, ad?","Lorem, ipsum dolor sit amet consectetur adipisicing elit. Reiciendis, ad?"],()=>console.log("test")]}class Mo extends Mt{constructor(t){super(),At(this,t,Yu,zu,Et,{})}}function Hu(s){let t;return{c(){t=Pt("Chat")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function Vu(s){let t,e;return t=new Ft({props:{name:"x"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Uu(s){let t,e,i,g,d,_,u,n;return e=new Tt({props:{textColor:"primary",fontWeight:"bolder",fontSize:"1",$$slots:{default:[Hu]},$$scope:{ctx:s}}}),d=new xt({props:{$$slots:{default:[Vu]},$$scope:{ctx:s}}}),d.$on("click",s[0]),u=new jt({props:{text:"Close"}}),{c(){t=mt("div"),B(e.$$.fragment),i=ft(),g=mt("div"),B(d.$$.fragment),_=ft(),B(u.$$.fragment),St(t,"class","flex justify-between items-center")},m(c,h){st(c,t,h),R(e,t,null),ut(t,i),ut(t,g),R(d,g,null),ut(g,_),R(u,g,null),n=!0},p(c,h){const r={};h&4&&(r.$$scope={dirty:h,ctx:c}),e.$set(r);const l={};h&4&&(l.$$scope={dirty:h,ctx:c}),d.$set(l)},i(c){n||(P(e.$$.fragment,c),P(d.$$.fragment,c),P(u.$$.fragment,c),n=!0)},o(c){M(e.$$.fragment,c),M(d.$$.fragment,c),M(u.$$.fragment,c),n=!1},d(c){c&&it(t),j(e),j(d),j(u)}}}function Gu(s){let t,e;return t=new Hi({props:{class:"w-full",$$slots:{default:[Uu]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&4&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function qu(s){let t,e;return t=new Mo({}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Ku(s){let t,e,i,g;return t=new Yi({props:{$$slots:{default:[Gu]},$$scope:{ctx:s}}}),i=new bi({props:{class:"h-5/6 bg-gray-200 flex flex-col rounded-b-2xl",$$slots:{default:[qu]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&4&&(u.$$scope={dirty:_,ctx:d}),t.$set(u);const n={};_&4&&(n.$$scope={dirty:_,ctx:d}),i.$set(n)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function Ju(s){let t,e;return t=new _i({props:{class:"m-4 h-full flex-grow !rounded-2xl",$$slots:{default:[Ku]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,[g]){const d={};g&4&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Qu(s){const t=hi();return[()=>{t("hideChat")}]}class Zu extends Mt{constructor(t){super(),At(this,t,Qu,Ju,Et,{})}}function $u(s){let t,e;return t=new Ft({props:{name:"clock-hour-4"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function th(s){let t;return{c(){t=Pt("This modal is placed in the center of the screen.")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function eh(s){let t;return{c(){t=Pt("Start")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function ih(s){let t;return{c(){t=Pt("Cancel")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function nh(s){let t,e,i,g;return t=new xt({props:{color:"green",$$slots:{default:[eh]},$$scope:{ctx:s}}}),t.$on("click",s[2]),i=new xt({props:{color:"red",$$slots:{default:[ih]},$$scope:{ctx:s}}}),i.$on("click",s[3]),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&32&&(u.$$scope={dirty:_,ctx:d}),t.$set(u);const n={};_&32&&(n.$$scope={dirty:_,ctx:d}),i.$set(n)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function rh(s){let t,e,i,g;return t=new Xf({props:{$$slots:{default:[th]},$$scope:{ctx:s}}}),i=new Vf({props:{$$slots:{default:[nh]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&32&&(u.$$scope={dirty:_,ctx:d}),t.$set(u);const n={};_&33&&(n.$$scope={dirty:_,ctx:d}),i.$set(n)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function sh(s){let t,e,i,g,d,_,u;t=new xt({props:{color:"primary",class:"!rounded-full md:!w-14 md:!h-14",$$slots:{default:[$u]},$$scope:{ctx:s}}}),t.$on("click",s[1]),i=new jt({props:{text:"Start Timer"}});function n(h){s[4](h)}let c={title:"Set Timer",placement:"center",$$slots:{default:[rh]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.show=s[0]),d=new If({props:c}),Ut.push(()=>re(d,"show",n)),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment),g=ft(),B(d.$$.fragment)},m(h,r){R(t,h,r),st(h,e,r),R(i,h,r),st(h,g,r),R(d,h,r),u=!0},p(h,[r]){const l={};r&32&&(l.$$scope={dirty:r,ctx:h}),t.$set(l);const o={};r&33&&(o.$$scope={dirty:r,ctx:h}),!_&&r&1&&(_=!0,o.show=h[0],ne(()=>_=!1)),d.$set(o)},i(h){u||(P(t.$$.fragment,h),P(i.$$.fragment,h),P(d.$$.fragment,h),u=!0)},o(h){M(t.$$.fragment,h),M(i.$$.fragment,h),M(d.$$.fragment,h),u=!1},d(h){h&&(it(e),it(g)),j(t,h),j(i,h),j(d,h)}}}function oh(s,t,e){let i=!1;const g=()=>e(0,i=!0),d=()=>e(0,i=!1),_=()=>e(0,i=!1);function u(n){i=n,e(0,i)}return[i,g,d,_,u]}class ah extends Mt{constructor(t){super(),At(this,t,oh,sh,Et,{})}}function lh(s){let t,e;return t=new Ft({props:{name:"mood-smile"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function ch(s){let t;return{c(){t=Pt("")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function fh(s){let t;return{c(){t=Pt("")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function uh(s){let t;return{c(){t=Pt("")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function hh(s){let t;return{c(){t=Pt("")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function dh(s){let t,e,i,g,d,_,u,n,c;return e=new xt({props:{size:"lg",class:"text-4xl xl:text-5xl",$$slots:{default:[ch]},$$scope:{ctx:s}}}),g=new xt({props:{size:"lg",class:"text-4xl xl:text-5xl",$$slots:{default:[fh]},$$scope:{ctx:s}}}),_=new xt({props:{size:"lg",class:"text-4xl xl:text-5xl",$$slots:{default:[uh]},$$scope:{ctx:s}}}),n=new xt({props:{size:"lg",class:"text-4xl xl:text-5xl",$$slots:{default:[hh]},$$scope:{ctx:s}}}),{c(){t=mt("div"),B(e.$$.fragment),i=ft(),B(g.$$.fragment),d=ft(),B(_.$$.fragment),u=ft(),B(n.$$.fragment),St(t,"class","flex flex-col space-y-4")},m(h,r){st(h,t,r),R(e,t,null),ut(t,i),R(g,t,null),ut(t,d),R(_,t,null),ut(t,u),R(n,t,null),c=!0},p(h,r){const l={};r&1&&(l.$$scope={dirty:r,ctx:h}),e.$set(l);const o={};r&1&&(o.$$scope={dirty:r,ctx:h}),g.$set(o);const f={};r&1&&(f.$$scope={dirty:r,ctx:h}),_.$set(f);const m={};r&1&&(m.$$scope={dirty:r,ctx:h}),n.$set(m)},i(h){c||(P(e.$$.fragment,h),P(g.$$.fragment,h),P(_.$$.fragment,h),P(n.$$.fragment,h),c=!0)},o(h){M(e.$$.fragment,h),M(g.$$.fragment,h),M(_.$$.fragment,h),M(n.$$.fragment,h),c=!1},d(h){h&&it(t),j(e),j(g),j(_),j(n)}}}function gh(s){let t,e;return t=new Ao({props:{$$slots:{default:[dh]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&1&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function mh(s){let t,e,i,g;return t=new xt({props:{color:"warning",class:"!rounded-full md:!w-14 md:!h-14",$$slots:{default:[lh]},$$scope:{ctx:s}}}),i=new Eo({props:{trigger:"hover",placement:"top",$$slots:{default:[gh]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,[_]){const u={};_&1&&(u.$$scope={dirty:_,ctx:d}),t.$set(u);const n={};_&1&&(n.$$scope={dirty:_,ctx:d}),i.$set(n)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}class ph extends Mt{constructor(t){super(),At(this,t,null,mh,Et,{})}}const he=ce(!1),ye=ce(!1),fi=ce(!1),be=ce(!1),vh=()=>{ye.set(!0),fi.set(!0),he.set(!0)},_h=()=>{he.set(!1),fi.set(!1),ye.set(!1)},bh=()=>{be.set(!0),he.set(!0)},yh=()=>{be.set(!1),he.set(!1)};function Ch(s){const t=s-1;return t*t*t+1}function Kt(s,{delay:t=0,duration:e=400,easing:i=Ch,axis:g="y"}={}){const d=getComputedStyle(s),_=+d.opacity,u=g==="y"?"height":"width",n=parseFloat(d[u]),c=g==="y"?["top","bottom"]:["left","right"],h=c.map(p=>`${p[0].toUpperCase()}${p.slice(1)}`),r=parseFloat(d[`padding${h[0]}`]),l=parseFloat(d[`padding${h[1]}`]),o=parseFloat(d[`margin${h[0]}`]),f=parseFloat(d[`margin${h[1]}`]),m=parseFloat(d[`border${h[0]}Width`]),a=parseFloat(d[`border${h[1]}Width`]);return{delay:t,duration:e,easing:i,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*_};${u}: ${p*n}px;padding-${c[0]}: ${p*r}px;padding-${c[1]}: ${p*l}px;margin-${c[0]}: ${p*o}px;margin-${c[1]}: ${p*f}px;border-${c[0]}-width: ${p*m}px;border-${c[1]}-width: ${p*a}px;`}}function Sh(s){let t;return{c(){t=Pt("Call")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function wh(s){let t,e;return t=new Ft({props:{name:"message-circle-2"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Th(s){let t,e;return t=new Ft({props:{name:"paperclip"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Es(s){let t,e,i,g;return t=new xt({props:{$$slots:{default:[xh]},$$scope:{ctx:s}}}),t.$on("click",s[13]),i=new jt({props:{text:"Show Chat"}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&2097152&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function xh(s){let t,e;return t=new Ft({props:{name:"message-circle-2"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function As(s){let t,e,i,g;return t=new xt({props:{$$slots:{default:[Oh]},$$scope:{ctx:s}}}),t.$on("click",s[14]),i=new jt({props:{text:"Show Whiteboard"}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&2097152&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function Oh(s){let t,e;return t=new Ft({props:{name:"presentation"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function kh(s){let t,e,i,g;return t=new xt({props:{class:"hidden xl:block",$$slots:{default:[Eh]},$$scope:{ctx:s}}}),t.$on("click",s[11]),i=new jt({props:{text:"Minimize"}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&2097152&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function Ph(s){let t,e,i,g;return t=new xt({props:{class:"hidden xl:block",$$slots:{default:[Ah]},$$scope:{ctx:s}}}),t.$on("click",s[10]),i=new jt({props:{text:"Maximize"}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&2097152&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function Eh(s){let t,e;return t=new Ft({props:{name:"arrows-minimize"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Ah(s){let t,e;return t=new Ft({props:{name:"maximize"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Mh(s){let t,e,i,g,d,_,u,n,c,h,r,l,o,f,m,a,p,v;e=new Tt({props:{textColor:"primary",fontWeight:"bolder",fontSize:"1",$$slots:{default:[Sh]},$$scope:{ctx:s}}}),d=new xt({props:{$$slots:{default:[wh]},$$scope:{ctx:s}}}),d.$on("click",s[12]),u=new jt({props:{text:"Show Chat"}}),c=new xt({props:{$$slots:{default:[Th]},$$scope:{ctx:s}}}),r=new jt({props:{text:"Show Files"}});let b=s[5]&&Es(s),y=s[8]&&As(s);const C=[Ph,kh],S=[];function w(k,F){return k[6]?1:0}return a=w(s),p=S[a]=C[a](s),{c(){t=mt("div"),B(e.$$.fragment),i=ft(),g=mt("div"),B(d.$$.fragment),_=ft(),B(u.$$.fragment),n=ft(),B(c.$$.fragment),h=ft(),B(r.$$.fragment),l=ft(),o=mt("div"),b&&b.c(),f=ft(),y&&y.c(),m=ft(),p.c(),St(g,"class","block space-x-2 xl:hidden"),St(o,"class","hidden space-x-2 xl:block"),St(t,"class","flex justify-between items-center")},m(k,F){st(k,t,F),R(e,t,null),ut(t,i),ut(t,g),R(d,g,null),ut(g,_),R(u,g,null),ut(g,n),R(c,g,null),ut(g,h),R(r,g,null),ut(t,l),ut(t,o),b&&b.m(o,null),ut(o,f),y&&y.m(o,null),ut(o,m),S[a].m(o,null),v=!0},p(k,F){const V={};F&2097152&&(V.$$scope={dirty:F,ctx:k}),e.$set(V);const z={};F&2097152&&(z.$$scope={dirty:F,ctx:k}),d.$set(z);const Y={};F&2097152&&(Y.$$scope={dirty:F,ctx:k}),c.$set(Y),k[5]?b?(b.p(k,F),F&32&&P(b,1)):(b=Es(k),b.c(),P(b,1),b.m(o,f)):b&&(Bt(),M(b,1,1,()=>{b=null}),Nt()),k[8]?y?(y.p(k,F),F&256&&P(y,1)):(y=As(k),y.c(),P(y,1),y.m(o,m)):y&&(Bt(),M(y,1,1,()=>{y=null}),Nt());let et=a;a=w(k),a===et?S[a].p(k,F):(Bt(),M(S[et],1,1,()=>{S[et]=null}),Nt(),p=S[a],p?p.p(k,F):(p=S[a]=C[a](k),p.c()),P(p,1),p.m(o,null))},i(k){v||(P(e.$$.fragment,k),P(d.$$.fragment,k),P(u.$$.fragment,k),P(c.$$.fragment,k),P(r.$$.fragment,k),P(b),P(y),P(p),v=!0)},o(k){M(e.$$.fragment,k),M(d.$$.fragment,k),M(u.$$.fragment,k),M(c.$$.fragment,k),M(r.$$.fragment,k),M(b),M(y),M(p),v=!1},d(k){k&&it(t),j(e),j(d),j(u),j(c),j(r),b&&b.d(),y&&y.d(),S[a].d()}}}function Dh(s){let t,e;return t=new Hi({props:{class:"w-full",$$slots:{default:[Mh]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&2097633&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Lh(s){let t,e,i;return t=new nf({props:{color:"danger",animated:Do}}),{c(){B(t.$$.fragment),e=Pt("00:20")},m(g,d){R(t,g,d),st(g,e,d),i=!0},p:vt,i(g){i||(P(t.$$.fragment,g),i=!0)},o(g){M(t.$$.fragment,g),i=!1},d(g){g&&it(e),j(t,g)}}}function Ms(s){let t,e,i,g,d,_,u,n,c,h,r,l,o,f,m,a,p,v,b,y,C,S,w,k,F,V,z,Y,et,H,Q,ct;return e=new xt({props:{color:s[1]?"primary":"red",class:"!rounded-full md:!w-14 md:!h-14",$$slots:{default:[Fh]},$$scope:{ctx:s}}}),e.$on("click",s[15]),g=new jt({props:{text:(s[1]?"Off":"On")+" Mic"}}),n=new xt({props:{color:s[2]?"primary":"red",class:"!rounded-full md:!w-14 md:!h-14",$$slots:{default:[Ih]},$$scope:{ctx:s}}}),n.$on("click",s[16]),h=new jt({props:{text:(s[2]?"Off":"On")+" Camera"}}),f=new xt({props:{color:s[3]?"red":"primary",class:"!rounded-full md:!w-14 md:!h-14",$$slots:{default:[Rh]},$$scope:{ctx:s}}}),f.$on("click",s[17]),a=new jt({props:{text:(s[3]?"Lower":"Raise")+" Hand"}}),y=new ah({}),k=new ph({}),Y=new xt({props:{color:"red",class:"!rounded-full md:!w-14 md:!h-14",$$slots:{default:[jh]},$$scope:{ctx:s}}}),H=new jt({props:{text:"End Call"}}),{c(){t=mt("div"),B(e.$$.fragment),i=ft(),B(g.$$.fragment),_=ft(),u=mt("div"),B(n.$$.fragment),c=ft(),B(h.$$.fragment),l=ft(),o=mt("div"),B(f.$$.fragment),m=ft(),B(a.$$.fragment),v=ft(),b=mt("div"),B(y.$$.fragment),S=ft(),w=mt("div"),B(k.$$.fragment),V=ft(),z=mt("div"),B(Y.$$.fragment),et=ft(),B(H.$$.fragment)},m(G,lt){st(G,t,lt),R(e,t,null),ut(t,i),R(g,t,null),st(G,_,lt),st(G,u,lt),R(n,u,null),ut(u,c),R(h,u,null),st(G,l,lt),st(G,o,lt),R(f,o,null),ut(o,m),R(a,o,null),st(G,v,lt),st(G,b,lt),R(y,b,null),st(G,S,lt),st(G,w,lt),R(k,w,null),st(G,V,lt),st(G,z,lt),R(Y,z,null),ut(z,et),R(H,z,null),ct=!0},p(G,lt){const T={};lt&2&&(T.color=G[1]?"primary":"red"),lt&2097154&&(T.$$scope={dirty:lt,ctx:G}),e.$set(T);const L={};lt&2&&(L.text=(G[1]?"Off":"On")+" Mic"),g.$set(L);const D={};lt&4&&(D.color=G[2]?"primary":"red"),lt&2097156&&(D.$$scope={dirty:lt,ctx:G}),n.$set(D);const E={};lt&4&&(E.text=(G[2]?"Off":"On")+" Camera"),h.$set(E);const U={};lt&8&&(U.color=G[3]?"red":"primary"),lt&2097160&&(U.$$scope={dirty:lt,ctx:G}),f.$set(U);const x={};lt&8&&(x.text=(G[3]?"Lower":"Raise")+" Hand"),a.$set(x);const O={};lt&2097152&&(O.$$scope={dirty:lt,ctx:G}),Y.$set(O)},i(G){ct||(P(e.$$.fragment,G),P(g.$$.fragment,G),G&&te(()=>{ct&&(d||(d=qt(t,Kt,{axis:"y",delay:100},!0)),d.run(1))}),P(n.$$.fragment,G),P(h.$$.fragment,G),G&&te(()=>{ct&&(r||(r=qt(u,Kt,{axis:"y",delay:80},!0)),r.run(1))}),P(f.$$.fragment,G),P(a.$$.fragment,G),G&&te(()=>{ct&&(p||(p=qt(o,Kt,{axis:"y",delay:60},!0)),p.run(1))}),P(y.$$.fragment,G),G&&te(()=>{ct&&(C||(C=qt(b,Kt,{axis:"y",delay:40},!0)),C.run(1))}),P(k.$$.fragment,G),G&&te(()=>{ct&&(F||(F=qt(w,Kt,{axis:"y",delay:20},!0)),F.run(1))}),P(Y.$$.fragment,G),P(H.$$.fragment,G),G&&te(()=>{ct&&(Q||(Q=qt(z,Kt,{axis:"y"},!0)),Q.run(1))}),ct=!0)},o(G){M(e.$$.fragment,G),M(g.$$.fragment,G),G&&(d||(d=qt(t,Kt,{axis:"y",delay:100},!1)),d.run(0)),M(n.$$.fragment,G),M(h.$$.fragment,G),G&&(r||(r=qt(u,Kt,{axis:"y",delay:80},!1)),r.run(0)),M(f.$$.fragment,G),M(a.$$.fragment,G),G&&(p||(p=qt(o,Kt,{axis:"y",delay:60},!1)),p.run(0)),M(y.$$.fragment,G),G&&(C||(C=qt(b,Kt,{axis:"y",delay:40},!1)),C.run(0)),M(k.$$.fragment,G),G&&(F||(F=qt(w,Kt,{axis:"y",delay:20},!1)),F.run(0)),M(Y.$$.fragment,G),M(H.$$.fragment,G),G&&(Q||(Q=qt(z,Kt,{axis:"y"},!1)),Q.run(0)),ct=!1},d(G){G&&(it(t),it(_),it(u),it(l),it(o),it(v),it(b),it(S),it(w),it(V),it(z)),j(e),j(g),G&&d&&d.end(),j(n),j(h),G&&r&&r.end(),j(f),j(a),G&&p&&p.end(),j(y),G&&C&&C.end(),j(k),G&&F&&F.end(),j(Y),j(H),G&&Q&&Q.end()}}}function Fh(s){let t,e;return t=new Ft({props:{name:s[1]?"microphone":"microphone-off"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&2&&(d.name=i[1]?"microphone":"microphone-off"),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Ih(s){let t,e;return t=new Ft({props:{name:s[2]?"video":"video-off"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&4&&(d.name=i[2]?"video":"video-off"),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Rh(s){let t,e;return t=new Ft({props:{name:s[3]?"hand-off":"hand-stop"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&8&&(d.name=i[3]?"hand-off":"hand-stop"),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function jh(s){let t,e;return t=new Ft({props:{name:"phone-off"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Bh(s){let t,e;return t=new Ft({props:{name:s[4]?"menu-2":"x"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&16&&(d.name=i[4]?"menu-2":"x"),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Nh(s){let t;return{c(){t=Pt("JD")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function Xh(s){let t;return{c(){t=Pt("SM")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function Wh(s){let t;return{c(){t=Pt("A")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function zh(s){let t;return{c(){t=Pt("SO")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function Yh(s){let t,e,i,g,d,_,u,n,c,h,r,l,o,f,m,a,p,v,b,y,C,S,w,k,F,V,z;u=new Pu({props:{color:"danger",$$slots:{default:[Lh]},$$scope:{ctx:s}}});let Y=Do,et=!s[4]&&Ms(s);return o=new xt({props:{color:"purple",class:"!rounded-full md:!w-14 md:!h-14",$$slots:{default:[Bh]},$$scope:{ctx:s}}}),o.$on("click",s[18]),p=new Si({props:{shape:"circle",color:"azure",class:"!w-20 !h-20 md:!w-32 md:!h-32 !text-3xl",$$slots:{default:[Nh]},$$scope:{ctx:s}}}),y=new Si({props:{shape:"circle",color:"warning",class:"!w-20 !h-20 md:!w-32 md:!h-32 !text-3xl",$$slots:{default:[Xh]},$$scope:{ctx:s}}}),w=new Si({props:{shape:"circle",color:"green",class:"!w-20 !h-20 md:!w-32 md:!h-32 !text-3xl",$$slots:{default:[Wh]},$$scope:{ctx:s}}}),V=new Si({props:{shape:"circle",color:"cyan",class:"!w-20 !h-20 md:!w-32 md:!h-32 !text-3xl",$$slots:{default:[zh]},$$scope:{ctx:s}}}),{c(){t=mt("div"),t.innerHTML='<img src="https://media.istockphoto.com/id/1136449639/video/the-man-laughing-on-the-white-background-slow-motion.jpg?s=640x640&amp;k=20&amp;c=jCivJBgTODPt57y3ESNnasT4Dc8z2Semme4VmNK2EeM=" class="object-cover svelte-1lxrx9s" alt=""/>',e=ft(),i=mt("div"),g=mt("div"),d=mt("div"),_=mt("div"),B(u.$$.fragment),n=ft(),c=ft(),h=mt("div"),et&&et.c(),r=ft(),l=mt("div"),B(o.$$.fragment),f=ft(),m=mt("div"),a=mt("div"),B(p.$$.fragment),v=ft(),b=mt("div"),B(y.$$.fragment),C=ft(),S=mt("div"),B(w.$$.fragment),k=ft(),F=mt("div"),B(V.$$.fragment),St(t,"class","h-full w-full fill absolute rounded-b-2xl svelte-1lxrx9s"),St(h,"class","flex-grow mt-3 flex flex-col space-y-4 justify-end"),St(d,"class","flex flex-col flex-grow"),St(m,"class","flex flex-col justify-between"),St(g,"class","flex-grow flex"),St(i,"class","absolute z-10 h-full w-full flex flex-col p-4")},m(H,Q){st(H,t,Q),st(H,e,Q),st(H,i,Q),ut(i,g),ut(g,d),ut(d,_),R(u,_,null),ut(_,n),ut(d,c),ut(d,h),et&&et.m(h,null),ut(h,r),ut(h,l),R(o,l,null),ut(g,f),ut(g,m),ut(m,a),R(p,a,null),ut(m,v),ut(m,b),R(y,b,null),ut(m,C),ut(m,S),R(w,S,null),ut(m,k),ut(m,F),R(V,F,null),z=!0},p(H,Q){const ct={};Q&2097152&&(ct.$$scope={dirty:Q,ctx:H}),u.$set(ct),H[4]?et&&(Bt(),M(et,1,1,()=>{et=null}),Nt()):et?(et.p(H,Q),Q&16&&P(et,1)):(et=Ms(H),et.c(),P(et,1),et.m(h,r));const G={};Q&2097168&&(G.$$scope={dirty:Q,ctx:H}),o.$set(G);const lt={};Q&2097152&&(lt.$$scope={dirty:Q,ctx:H}),p.$set(lt);const T={};Q&2097152&&(T.$$scope={dirty:Q,ctx:H}),y.$set(T);const L={};Q&2097152&&(L.$$scope={dirty:Q,ctx:H}),w.$set(L);const D={};Q&2097152&&(D.$$scope={dirty:Q,ctx:H}),V.$set(D)},i(H){z||(P(u.$$.fragment,H),P(Y),P(et),P(o.$$.fragment,H),P(p.$$.fragment,H),P(y.$$.fragment,H),P(w.$$.fragment,H),P(V.$$.fragment,H),z=!0)},o(H){M(u.$$.fragment,H),M(Y),M(et),M(o.$$.fragment,H),M(p.$$.fragment,H),M(y.$$.fragment,H),M(w.$$.fragment,H),M(V.$$.fragment,H),z=!1},d(H){H&&(it(t),it(e),it(i)),j(u),et&&et.d(),j(o),j(p),j(y),j(w),j(V)}}}function Hh(s){let t,e,i,g;return t=new Yi({props:{$$slots:{default:[Dh]},$$scope:{ctx:s}}}),i=new bi({props:{class:"h-5/6 bg-gray-200 !p-0 relative rounded-b-2xl",$$slots:{default:[Yh]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&2097633&&(u.$$scope={dirty:_,ctx:d}),t.$set(u);const n={};_&2097182&&(n.$$scope={dirty:_,ctx:d}),i.$set(n)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function Vh(s){let t,e;return t=new Mo({}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Uh(s){let t,e,i,g;return t=new fu({props:{title:"Offcanvas Title"}}),i=new iu({props:{class:"h-100v flex flex-col p-4",$$slots:{default:[Vh]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&2097152&&(u.$$scope={dirty:_,ctx:d}),i.$set(u)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function Gh(s){let t,e,i,g,d;t=new _i({props:{class:"m-4 h-full flex-grow !rounded-2xl",$$slots:{default:[Hh]},$$scope:{ctx:s}}});function _(n){s[19](n)}let u={autoClose:!0,backdrop:!0,$$slots:{default:[Uh]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.show=s[0]),i=new Qf({props:u}),Ut.push(()=>re(i,"show",_)),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(n,c){R(t,n,c),st(n,e,c),R(i,n,c),d=!0},p(n,[c]){const h={};c&2097663&&(h.$$scope={dirty:c,ctx:n}),t.$set(h);const r={};c&2097152&&(r.$$scope={dirty:c,ctx:n}),!g&&c&1&&(g=!0,r.show=n[0],ne(()=>g=!1)),i.$set(r)},i(n){d||(P(t.$$.fragment,n),P(i.$$.fragment,n),d=!0)},o(n){M(t.$$.fragment,n),M(i.$$.fragment,n),d=!1},d(n){n&&it(e),j(t,n),j(i,n)}}}let Do=!1;function qh(s,t,e){let i,g,d,_;Qt(s,he,k=>e(5,i=k)),Qt(s,ye,k=>e(6,g=k)),Qt(s,be,k=>e(7,d=k)),Qt(s,fi,k=>e(8,_=k));let u=!1,n=!0,c=!0,h=!1,r=!1;const l=k=>{switch(k){case"mic":e(1,n=!n);break;case"video":e(2,c=!c);break;case"hand":e(3,h=!h);break}},o=hi(),f=()=>o("maximize"),m=()=>o("minimize"),a=()=>e(0,u=!u),p=()=>{ie(he,i=!1,i),ie(ye,g=!1,g),ie(be,d=!1,d)},v=()=>{ie(fi,_=!1,_),ie(ye,g=!1,g),ie(be,d=!1,d),i&&ie(be,d=!0,d)},b=()=>l("mic"),y=()=>l("video"),C=()=>l("hand"),S=()=>e(4,r=!r);function w(k){u=k,e(0,u)}return[u,n,c,h,r,i,g,d,_,l,f,m,a,p,v,b,y,C,S,w]}class Kh extends Mt{constructor(t){super(),At(this,t,qh,Gh,Et,{})}}var fe={};const Jh={},Qh=Object.freeze(Object.defineProperty({__proto__:null,default:Jh},Symbol.toStringTag,{value:"Module"})),ar=Xa(Qh);(function(s){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.3.0"};if(s.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var e=ar,i=new e.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=i.document,t.jsdomImplForWrapper=ar.implForWrapper,t.nodeCanvas=ar.Canvas,t.window=i,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function u(o,f){if(this.__eventListeners[o]){var m=this.__eventListeners[o];f?m[m.indexOf(f)]=!1:t.util.array.fill(m,!1)}}function n(o,f){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in o)this.on(m,o[m]);else this.__eventListeners[o]||(this.__eventListeners[o]=[]),this.__eventListeners[o].push(f);return this}function c(o,f){var m=(function(){f.apply(this,arguments),this.off(o,m)}).bind(this);this.on(o,m)}function h(o,f){if(arguments.length===1)for(var m in o)c.call(this,m,o[m]);else c.call(this,o,f);return this}function r(o,f){if(!this.__eventListeners)return this;if(arguments.length===0)for(o in this.__eventListeners)u.call(this,o);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in o)u.call(this,m,o[m]);else u.call(this,o,f);return this}function l(o,f){if(!this.__eventListeners)return this;var m=this.__eventListeners[o];if(!m)return this;for(var a=0,p=m.length;a<p;a++)m[a]&&m[a].call(this,f||{});return this.__eventListeners[o]=m.filter(function(v){return v!==!1}),this}t.Observable={fire:l,on:n,once:h,off:r}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var u=0,n=arguments.length;u<n;u++)this._onObjectAdded(arguments[u]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(u,n,c){var h=this._objects;return c?h[n]=u:h.splice(n,0,u),this._onObjectAdded&&this._onObjectAdded(u),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var u=this._objects,n,c=!1,h=0,r=arguments.length;h<r;h++)n=u.indexOf(arguments[h]),n!==-1&&(c=!0,u.splice(n,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(u,n){for(var c=this.getObjects(),h=0,r=c.length;h<r;h++)u.call(n,c[h],h,c);return this},getObjects:function(u){return typeof u>"u"?this._objects.concat():this._objects.filter(function(n){return n.type===u})},item:function(u){return this._objects[u]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(u,n){return this._objects.indexOf(u)>-1?!0:n?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(u,!0)}):!1},complexity:function(){return this._objects.reduce(function(u,n){return u+=n.complexity?n.complexity():0,u},0)}},t.CommonMethods={_setOptions:function(u){for(var n in u)this.set(n,u[n])},_initGradient:function(u,n){u&&u.colorStops&&!(u instanceof t.Gradient)&&this.set(n,new t.Gradient(u))},_initPattern:function(u,n,c){u&&u.source&&!(u instanceof t.Pattern)?this.set(n,new t.Pattern(u,c)):c&&c()},_setObject:function(u){for(var n in u)this._set(n,u[n])},set:function(u,n){return typeof u=="object"?this._setObject(u):this._set(u,n),this},_set:function(u,n){this[u]=n},toggle:function(u){var n=this.get(u);return typeof n=="boolean"&&this.set(u,!n),this},get:function(u){return this[u]}},function(u){var n=Math.sqrt,c=Math.atan2,h=Math.pow,r=Math.PI/180,l=Math.PI/2;t.util={cos:function(o){if(o===0)return 1;o<0&&(o=-o);var f=o/l;switch(f){case 1:case 3:return 0;case 2:return-1}return Math.cos(o)},sin:function(o){if(o===0)return 0;var f=o/l,m=1;switch(o<0&&(m=-1),f){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(o)},removeFromArray:function(o,f){var m=o.indexOf(f);return m!==-1&&o.splice(m,1),o},getRandomInt:function(o,f){return Math.floor(Math.random()*(f-o+1))+o},degreesToRadians:function(o){return o*r},radiansToDegrees:function(o){return o/r},rotatePoint:function(o,f,m){var a=new t.Point(o.x-f.x,o.y-f.y),p=t.util.rotateVector(a,m);return new t.Point(p.x,p.y).addEquals(f)},rotateVector:function(o,f){var m=t.util.sin(f),a=t.util.cos(f),p=o.x*a-o.y*m,v=o.x*m+o.y*a;return{x:p,y:v}},createVector:function(o,f){return new t.Point(f.x-o.x,f.y-o.y)},calcAngleBetweenVectors:function(o,f){return Math.acos((o.x*f.x+o.y*f.y)/(Math.hypot(o.x,o.y)*Math.hypot(f.x,f.y)))},getHatVector:function(o){return new t.Point(o.x,o.y).multiply(1/Math.hypot(o.x,o.y))},getBisector:function(o,f,m){var a=t.util.createVector(o,f),p=t.util.createVector(o,m),v=t.util.calcAngleBetweenVectors(a,p),b=t.util.calcAngleBetweenVectors(t.util.rotateVector(a,v),p),y=v*(b===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(a,y)),angle:v}},projectStrokeOnPoints:function(o,f,m){var a=[],p=f.strokeWidth/2,v=f.strokeUniform?new t.Point(1/f.scaleX,1/f.scaleY):new t.Point(1,1),b=function(y){var C=p/Math.hypot(y.x,y.y);return new t.Point(y.x*C*v.x,y.y*C*v.y)};return o.length<=1||o.forEach(function(y,C){var S=new t.Point(y.x,y.y),w,k;C===0?(k=o[C+1],w=m?b(t.util.createVector(k,S)).addEquals(S):o[o.length-1]):C===o.length-1?(w=o[C-1],k=m?b(t.util.createVector(w,S)).addEquals(S):o[0]):(w=o[C-1],k=o[C+1]);var F=t.util.getBisector(S,w,k),V=F.vector,z=F.angle,Y,et;if(f.strokeLineJoin==="miter"&&(Y=-p/Math.sin(z/2),et=new t.Point(V.x*Y*v.x,V.y*Y*v.y),Math.hypot(et.x,et.y)/p<=f.strokeMiterLimit)){a.push(S.add(et)),a.push(S.subtract(et));return}Y=-p*Math.SQRT2,et=new t.Point(V.x*Y*v.x,V.y*Y*v.y),a.push(S.add(et)),a.push(S.subtract(et))}),a},transformPoint:function(o,f,m){return m?new t.Point(f[0]*o.x+f[2]*o.y,f[1]*o.x+f[3]*o.y):new t.Point(f[0]*o.x+f[2]*o.y+f[4],f[1]*o.x+f[3]*o.y+f[5])},makeBoundingBoxFromPoints:function(o,f){if(f)for(var m=0;m<o.length;m++)o[m]=t.util.transformPoint(o[m],f);var a=[o[0].x,o[1].x,o[2].x,o[3].x],p=t.util.array.min(a),v=t.util.array.max(a),b=v-p,y=[o[0].y,o[1].y,o[2].y,o[3].y],C=t.util.array.min(y),S=t.util.array.max(y),w=S-C;return{left:p,top:C,width:b,height:w}},invertTransform:function(o){var f=1/(o[0]*o[3]-o[1]*o[2]),m=[f*o[3],-f*o[1],-f*o[2],f*o[0]],a=t.util.transformPoint({x:o[4],y:o[5]},m,!0);return m[4]=-a.x,m[5]=-a.y,m},toFixed:function(o,f){return parseFloat(Number(o).toFixed(f))},parseUnit:function(o,f){var m=/\D{0,2}$/.exec(o),a=parseFloat(o);switch(f||(f=t.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return a*t.DPI/25.4;case"cm":return a*t.DPI/2.54;case"in":return a*t.DPI;case"pt":return a*t.DPI/72;case"pc":return a*t.DPI/72*12;case"em":return a*f;default:return a}},falseFunction:function(){return!1},getKlass:function(o,f){return o=t.util.string.camelize(o.charAt(0).toUpperCase()+o.slice(1)),t.util.resolveNamespace(f)[o]},getSvgAttributes:function(o){var f=["instantiated_by_use","style","id","class"];switch(o){case"linearGradient":f=f.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":f=f.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":f=f.concat(["offset","stop-color","stop-opacity"]);break}return f},resolveNamespace:function(o){if(!o)return t;var f=o.split("."),m=f.length,a,p=u||t.window;for(a=0;a<m;++a)p=p[f[a]];return p},loadImage:function(o,f,m,a){if(!o){f&&f.call(m,o);return}var p=t.util.createImage(),v=function(){f&&f.call(m,p,!1),p=p.onload=p.onerror=null};p.onload=v,p.onerror=function(){t.log("Error loading "+p.src),f&&f.call(m,null,!0),p=p.onload=p.onerror=null},o.indexOf("data")!==0&&a!==void 0&&a!==null&&(p.crossOrigin=a),o.substring(0,14)==="data:image/svg"&&(p.onload=null,t.util.loadImageInDom(p,v)),p.src=o},loadImageInDom:function(o,f){var m=t.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(o),t.document.querySelector("body").appendChild(m),o.onload=function(){f(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(o,f,m,a){o=o||[];var p=[],v=0,b=o.length;function y(){++v===b&&f&&f(p.filter(function(C){return C}))}if(!b){f&&f(p);return}o.forEach(function(C,S){if(!C||!C.type){y();return}var w=t.util.getKlass(C.type,m);w.fromObject(C,function(k,F){F||(p[S]=k),a&&a(C,k,F),y()})})},enlivenObjectEnlivables:function(o,f,m){var a=t.Object.ENLIVEN_PROPS.filter(function(p){return!!o[p]});t.util.enlivenObjects(a.map(function(p){return o[p]}),function(p){var v={};a.forEach(function(b,y){v[b]=p[y],f&&(f[b]=p[y])}),m&&m(v)})},enlivenPatterns:function(o,f){o=o||[];function m(){++p===v&&f&&f(a)}var a=[],p=0,v=o.length;if(!v){f&&f(a);return}o.forEach(function(b,y){b&&b.source?new t.Pattern(b,function(C){a[y]=C,m()}):(a[y]=b,m())})},groupSVGElements:function(o,f,m){var a;return o&&o.length===1?(typeof m<"u"&&(o[0].sourcePath=m),o[0]):(f&&(f.width&&f.height?f.centerPoint={x:f.width/2,y:f.height/2}:(delete f.width,delete f.height)),a=new t.Group(o,f),typeof m<"u"&&(a.sourcePath=m),a)},populateWithProperties:function(o,f,m){if(m&&Array.isArray(m))for(var a=0,p=m.length;a<p;a++)m[a]in o&&(f[m[a]]=o[m[a]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(o){var f=t.util.createCanvasElement();return f.width=o.width,f.height=o.height,f.getContext("2d").drawImage(o,0,0),f},toDataURL:function(o,f,m){return o.toDataURL("image/"+f,m)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(o,f,m){return[o[0]*f[0]+o[2]*f[1],o[1]*f[0]+o[3]*f[1],o[0]*f[2]+o[2]*f[3],o[1]*f[2]+o[3]*f[3],m?0:o[0]*f[4]+o[2]*f[5]+o[4],m?0:o[1]*f[4]+o[3]*f[5]+o[5]]},qrDecompose:function(o){var f=c(o[1],o[0]),m=h(o[0],2)+h(o[1],2),a=n(m),p=(o[0]*o[3]-o[2]*o[1])/a,v=c(o[0]*o[2]+o[1]*o[3],m);return{angle:f/r,scaleX:a,scaleY:p,skewX:v/r,skewY:0,translateX:o[4],translateY:o[5]}},calcRotateMatrix:function(o){if(!o.angle)return t.iMatrix.concat();var f=t.util.degreesToRadians(o.angle),m=t.util.cos(f),a=t.util.sin(f);return[m,a,-a,m,0,0]},calcDimensionsMatrix:function(o){var f=typeof o.scaleX>"u"?1:o.scaleX,m=typeof o.scaleY>"u"?1:o.scaleY,a=[o.flipX?-f:f,0,0,o.flipY?-m:m,0,0],p=t.util.multiplyTransformMatrices,v=t.util.degreesToRadians;return o.skewX&&(a=p(a,[1,0,Math.tan(v(o.skewX)),1],!0)),o.skewY&&(a=p(a,[1,Math.tan(v(o.skewY)),0,1],!0)),a},composeMatrix:function(o){var f=[1,0,0,1,o.translateX||0,o.translateY||0],m=t.util.multiplyTransformMatrices;return o.angle&&(f=m(f,t.util.calcRotateMatrix(o))),(o.scaleX!==1||o.scaleY!==1||o.skewX||o.skewY||o.flipX||o.flipY)&&(f=m(f,t.util.calcDimensionsMatrix(o))),f},resetObjectTransform:function(o){o.scaleX=1,o.scaleY=1,o.skewX=0,o.skewY=0,o.flipX=!1,o.flipY=!1,o.rotate(0)},saveObjectTransform:function(o){return{scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,angle:o.angle,left:o.left,flipX:o.flipX,flipY:o.flipY,top:o.top}},isTransparent:function(o,f,m,a){a>0&&(f>a?f-=a:f=0,m>a?m-=a:m=0);var p=!0,v,b,y=o.getImageData(f,m,a*2||1,a*2||1),C=y.data.length;for(v=3;v<C&&(b=y.data[v],p=b<=0,p!==!1);v+=4);return y=null,p},parsePreserveAspectRatioAttribute:function(o){var f="meet",m="Mid",a="Mid",p=o.split(" "),v;return p&&p.length&&(f=p.pop(),f!=="meet"&&f!=="slice"?(v=f,f="meet"):p.length&&(v=p.pop())),m=v!=="none"?v.slice(1,4):"none",a=v!=="none"?v.slice(5,8):"none",{meetOrSlice:f,alignX:m,alignY:a}},clearFabricFontCache:function(o){o=(o||"").toLowerCase(),o?t.charWidthsCache[o]&&delete t.charWidthsCache[o]:t.charWidthsCache={}},limitDimsByArea:function(o,f){var m=Math.sqrt(f*o),a=Math.floor(f/m);return{x:Math.floor(m),y:a}},capValue:function(o,f,m){return Math.max(o,Math.min(f,m))},findScaleToFit:function(o,f){return Math.min(f.width/o.width,f.height/o.height)},findScaleToCover:function(o,f){return Math.max(f.width/o.width,f.height/o.height)},matrixToSVG:function(o){return"matrix("+o.map(function(f){return t.util.toFixed(f,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(o,f){var m=t.util.invertTransform(f),a=t.util.multiplyTransformMatrices(m,o.calcOwnMatrix());t.util.applyTransformToObject(o,a)},addTransformToObject:function(o,f){t.util.applyTransformToObject(o,t.util.multiplyTransformMatrices(f,o.calcOwnMatrix()))},applyTransformToObject:function(o,f){var m=t.util.qrDecompose(f),a=new t.Point(m.translateX,m.translateY);o.flipX=!1,o.flipY=!1,o.set("scaleX",m.scaleX),o.set("scaleY",m.scaleY),o.skewX=m.skewX,o.skewY=m.skewY,o.angle=m.angle,o.setPositionByOrigin(a,"center","center")},sizeAfterTransform:function(o,f,m){var a=o/2,p=f/2,v=[{x:-a,y:-p},{x:a,y:-p},{x:-a,y:p},{x:a,y:p}],b=t.util.calcDimensionsMatrix(m),y=t.util.makeBoundingBoxFromPoints(v,b);return{x:y.width,y:y.height}},mergeClipPaths:function(o,f){var m=o,a=f;m.inverted&&!a.inverted&&(m=f,a=o),t.util.applyTransformToObject(a,t.util.multiplyTransformMatrices(t.util.invertTransform(m.calcTransformMatrix()),a.calcTransformMatrix()));var p=m.inverted&&a.inverted;return p&&(m.inverted=a.inverted=!1),new t.Group([m],{clipPath:a,inverted:p})},hasStyleChanged:function(o,f,m){return m=m||!1,o.fill!==f.fill||o.stroke!==f.stroke||o.strokeWidth!==f.strokeWidth||o.fontSize!==f.fontSize||o.fontFamily!==f.fontFamily||o.fontWeight!==f.fontWeight||o.fontStyle!==f.fontStyle||o.textBackgroundColor!==f.textBackgroundColor||o.deltaY!==f.deltaY||m&&(o.overline!==f.overline||o.underline!==f.underline||o.linethrough!==f.linethrough)},stylesToArray:function(m,f){for(var m=t.util.object.clone(m,!0),a=f.split(`
`),p=-1,v={},b=[],y=0;y<a.length;y++){if(!m[y]){p+=a[y].length;continue}for(var C=0;C<a[y].length;C++){p++;var S=m[y][C];if(S&&Object.keys(S).length>0){var w=t.util.hasStyleChanged(v,S,!0);w?b.push({start:p,end:p+1,style:S}):b[b.length-1].end++}v=S||{}}}return b},stylesFromArray:function(o,f){if(!Array.isArray(o))return o;for(var m=f.split(`
`),a=-1,p=0,v={},b=0;b<m.length;b++)for(var y=0;y<m[b].length;y++)a++,o[p]&&o[p].start<=a&&a<o[p].end&&(v[b]=v[b]||{},v[b][y]=Object.assign({},o[p].style),a===o[p].end-1&&p++);return v}}}(s),function(){var u=Array.prototype.join,n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function h(T,L,D,E,U,x,O,I,W,Z,q){var nt=t.util.cos(T),at=t.util.sin(T),ht=t.util.cos(L),J=t.util.sin(L),N=D*U*ht-E*x*J+O,tt=E*U*ht+D*x*J+I,$=Z+W*(-D*U*at-E*x*nt),K=q+W*(-E*U*at+D*x*nt),rt=N+W*(D*U*J+E*x*ht),dt=tt+W*(E*U*J-D*x*ht);return["C",$,K,rt,dt,N,tt]}function r(T,L,D,E,U,x,O){var I=Math.PI,W=O*I/180,Z=t.util.sin(W),q=t.util.cos(W),nt=0,at=0;D=Math.abs(D),E=Math.abs(E);var ht=-q*T*.5-Z*L*.5,J=-q*L*.5+Z*T*.5,N=D*D,tt=E*E,$=J*J,K=ht*ht,rt=N*tt-N*$-tt*K,dt=0;if(rt<0){var _t=Math.sqrt(1-rt/(N*tt));D*=_t,E*=_t}else dt=(U===x?-1:1)*Math.sqrt(rt/(N*$+tt*K));var ot=dt*D*J/E,X=-dt*E*ht/D,pt=q*ot-Z*X+T*.5,bt=Z*ot+q*X+L*.5,wt=l(1,0,(ht-ot)/D,(J-X)/E),Dt=l((ht-ot)/D,(J-X)/E,(-ht-ot)/D,(-J-X)/E);x===0&&Dt>0?Dt-=2*I:x===1&&Dt<0&&(Dt+=2*I);for(var Ot=Math.ceil(Math.abs(Dt/I*2)),Gt=[],It=Dt/Ot,Zt=8/3*Math.sin(It/4)*Math.sin(It/4)/Math.sin(It/2),ae=wt+It,Jt=0;Jt<Ot;Jt++)Gt[Jt]=h(wt,ae,q,Z,D,E,pt,bt,Zt,nt,at),nt=Gt[Jt][5],at=Gt[Jt][6],wt=ae,ae+=It;return Gt}function l(T,L,D,E){var U=Math.atan2(L,T),x=Math.atan2(E,D);return x>=U?x-U:2*Math.PI-(U-x)}function o(T,L,D,E,U,x,O,I){var W;if(t.cachesBoundsOfCurve&&(W=u.call(arguments),t.boundsOfCurveCache[W]))return t.boundsOfCurveCache[W];var Z=Math.sqrt,q=Math.min,nt=Math.max,at=Math.abs,ht=[],J=[[],[]],N,tt,$,K,rt,dt,_t,ot;tt=6*T-12*D+6*U,N=-3*T+9*D-9*U+3*O,$=3*D-3*T;for(var X=0;X<2;++X){if(X>0&&(tt=6*L-12*E+6*x,N=-3*L+9*E-9*x+3*I,$=3*E-3*L),at(N)<1e-12){if(at(tt)<1e-12)continue;K=-$/tt,0<K&&K<1&&ht.push(K);continue}_t=tt*tt-4*$*N,!(_t<0)&&(ot=Z(_t),rt=(-tt+ot)/(2*N),0<rt&&rt<1&&ht.push(rt),dt=(-tt-ot)/(2*N),0<dt&&dt<1&&ht.push(dt))}for(var pt,bt,wt=ht.length,Dt=wt,Ot;wt--;)K=ht[wt],Ot=1-K,pt=Ot*Ot*Ot*T+3*Ot*Ot*K*D+3*Ot*K*K*U+K*K*K*O,J[0][wt]=pt,bt=Ot*Ot*Ot*L+3*Ot*Ot*K*E+3*Ot*K*K*x+K*K*K*I,J[1][wt]=bt;J[0][Dt]=T,J[1][Dt]=L,J[0][Dt+1]=O,J[1][Dt+1]=I;var Gt=[{x:q.apply(null,J[0]),y:q.apply(null,J[1])},{x:nt.apply(null,J[0]),y:nt.apply(null,J[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[W]=Gt),Gt}function f(T,L,D){for(var E=D[1],U=D[2],x=D[3],O=D[4],I=D[5],W=D[6],Z=D[7],q=r(W-T,Z-L,E,U,O,I,x),nt=0,at=q.length;nt<at;nt++)q[nt][1]+=T,q[nt][2]+=L,q[nt][3]+=T,q[nt][4]+=L,q[nt][5]+=T,q[nt][6]+=L;return q}function m(T){var L=0,D=0,E=T.length,U=0,x=0,O,I,W,Z=[],q,nt,at;for(I=0;I<E;++I){switch(W=!1,O=T[I].slice(0),O[0]){case"l":O[0]="L",O[1]+=L,O[2]+=D;case"L":L=O[1],D=O[2];break;case"h":O[1]+=L;case"H":O[0]="L",O[2]=D,L=O[1];break;case"v":O[1]+=D;case"V":O[0]="L",D=O[1],O[1]=L,O[2]=D;break;case"m":O[0]="M",O[1]+=L,O[2]+=D;case"M":L=O[1],D=O[2],U=O[1],x=O[2];break;case"c":O[0]="C",O[1]+=L,O[2]+=D,O[3]+=L,O[4]+=D,O[5]+=L,O[6]+=D;case"C":nt=O[3],at=O[4],L=O[5],D=O[6];break;case"s":O[0]="S",O[1]+=L,O[2]+=D,O[3]+=L,O[4]+=D;case"S":q==="C"?(nt=2*L-nt,at=2*D-at):(nt=L,at=D),L=O[3],D=O[4],O[0]="C",O[5]=O[3],O[6]=O[4],O[3]=O[1],O[4]=O[2],O[1]=nt,O[2]=at,nt=O[3],at=O[4];break;case"q":O[0]="Q",O[1]+=L,O[2]+=D,O[3]+=L,O[4]+=D;case"Q":nt=O[1],at=O[2],L=O[3],D=O[4];break;case"t":O[0]="T",O[1]+=L,O[2]+=D;case"T":q==="Q"?(nt=2*L-nt,at=2*D-at):(nt=L,at=D),O[0]="Q",L=O[1],D=O[2],O[1]=nt,O[2]=at,O[3]=L,O[4]=D;break;case"a":O[0]="A",O[6]+=L,O[7]+=D;case"A":W=!0,Z=Z.concat(f(L,D,O)),L=O[6],D=O[7];break;case"z":case"Z":L=U,D=x;break}W||Z.push(O),q=O[0]}return Z}function a(T,L,D,E){return Math.sqrt((D-T)*(D-T)+(E-L)*(E-L))}function p(T){return T*T*T}function v(T){return 3*T*T*(1-T)}function b(T){return 3*T*(1-T)*(1-T)}function y(T){return(1-T)*(1-T)*(1-T)}function C(T,L,D,E,U,x,O,I){return function(W){var Z=p(W),q=v(W),nt=b(W),at=y(W);return{x:O*Z+U*q+D*nt+T*at,y:I*Z+x*q+E*nt+L*at}}}function S(T,L,D,E,U,x,O,I){return function(W){var Z=1-W,q=3*Z*Z*(D-T)+6*Z*W*(U-D)+3*W*W*(O-U),nt=3*Z*Z*(E-L)+6*Z*W*(x-E)+3*W*W*(I-x);return Math.atan2(nt,q)}}function w(T){return T*T}function k(T){return 2*T*(1-T)}function F(T){return(1-T)*(1-T)}function V(T,L,D,E,U,x){return function(O){var I=w(O),W=k(O),Z=F(O);return{x:U*I+D*W+T*Z,y:x*I+E*W+L*Z}}}function z(T,L,D,E,U,x){return function(O){var I=1-O,W=2*I*(D-T)+2*O*(U-D),Z=2*I*(E-L)+2*O*(x-E);return Math.atan2(Z,W)}}function Y(T,L,D){var E={x:L,y:D},U,x=0,O;for(O=1;O<=100;O+=1)U=T(O/100),x+=a(E.x,E.y,U.x,U.y),E=U;return x}function et(T,L){for(var D=0,E=0,U=T.iterator,x={x:T.x,y:T.y},O,I,W=.01,Z=T.angleFinder,q;E<L&&W>1e-4;)O=U(D),q=D,I=a(x.x,x.y,O.x,O.y),I+E>L?(D-=W,W/=2):(x=O,D+=W,E+=I);return O.angle=Z(q),O}function H(T){for(var L=0,D=T.length,E,U=0,x=0,O=0,I=0,W=[],Z,q,nt,at=0;at<D;at++){switch(E=T[at],q={x:U,y:x,command:E[0]},E[0]){case"M":q.length=0,O=U=E[1],I=x=E[2];break;case"L":q.length=a(U,x,E[1],E[2]),U=E[1],x=E[2];break;case"C":Z=C(U,x,E[1],E[2],E[3],E[4],E[5],E[6]),nt=S(U,x,E[1],E[2],E[3],E[4],E[5],E[6]),q.iterator=Z,q.angleFinder=nt,q.length=Y(Z,U,x),U=E[5],x=E[6];break;case"Q":Z=V(U,x,E[1],E[2],E[3],E[4]),nt=z(U,x,E[1],E[2],E[3],E[4]),q.iterator=Z,q.angleFinder=nt,q.length=Y(Z,U,x),U=E[3],x=E[4];break;case"Z":case"z":q.destX=O,q.destY=I,q.length=a(U,x,O,I),U=O,x=I;break}L+=q.length,W.push(q)}return W.push({length:L,x:U,y:x}),W}function Q(T,L,D){D||(D=H(T));for(var E=0;L-D[E].length>0&&E<D.length-2;)L-=D[E].length,E++;var U=D[E],x=L/U.length,O=U.command,I=T[E],W;switch(O){case"M":return{x:U.x,y:U.y,angle:0};case"Z":case"z":return W=new t.Point(U.x,U.y).lerp(new t.Point(U.destX,U.destY),x),W.angle=Math.atan2(U.destY-U.y,U.destX-U.x),W;case"L":return W=new t.Point(U.x,U.y).lerp(new t.Point(I[1],I[2]),x),W.angle=Math.atan2(I[2]-U.y,I[1]-U.x),W;case"C":return et(U,L);case"Q":return et(U,L)}}function ct(T){var L=[],D=[],E,U,x=t.rePathCommand,O="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",I="("+O+")"+t.commaWsp,W="([01])"+t.commaWsp+"?",Z=I+"?"+I+"?"+I+W+W+I+"?("+O+")",q=new RegExp(Z,"g"),nt,at,ht;if(!T||!T.match)return L;ht=T.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var J=0,N,tt=ht.length;J<tt;J++){E=ht[J],at=E.slice(1).trim(),D.length=0;var $=E.charAt(0);if(N=[$],$.toLowerCase()==="a")for(var K;K=q.exec(at);)for(var rt=1;rt<K.length;rt++)D.push(K[rt]);else for(;nt=x.exec(at);)D.push(nt[0]);for(var rt=0,dt=D.length;rt<dt;rt++)U=parseFloat(D[rt]),isNaN(U)||N.push(U);var _t=n[$.toLowerCase()],ot=c[$]||$;if(N.length-1>_t)for(var X=1,pt=N.length;X<pt;X+=_t)L.push([$].concat(N.slice(X,X+_t))),$=ot;else L.push(N)}return L}function G(T,L){var D=[],E,U=new t.Point(T[0].x,T[0].y),x=new t.Point(T[1].x,T[1].y),O=T.length,I=1,W=0,Z=O>2;for(L=L||0,Z&&(I=T[2].x<x.x?-1:T[2].x===x.x?0:1,W=T[2].y<x.y?-1:T[2].y===x.y?0:1),D.push(["M",U.x-I*L,U.y-W*L]),E=1;E<O;E++){if(!U.eq(x)){var q=U.midPointFrom(x);D.push(["Q",U.x,U.y,q.x,q.y])}U=T[E],E+1<T.length&&(x=T[E+1])}return Z&&(I=U.x>T[E-2].x?1:U.x===T[E-2].x?0:-1,W=U.y>T[E-2].y?1:U.y===T[E-2].y?0:-1),D.push(["L",U.x+I*L,U.y+W*L]),D}function lt(T,L,D){return D&&(L=t.util.multiplyTransformMatrices(L,[1,0,0,1,-D.x,-D.y])),T.map(function(E){for(var U=E.slice(0),x={},O=1;O<E.length-1;O+=2)x.x=E[O],x.y=E[O+1],x=t.util.transformPoint(x,L),U[O]=x.x,U[O+1]=x.y;return U})}t.util.joinPath=function(T){return T.map(function(L){return L.join(" ")}).join(" ")},t.util.parsePath=ct,t.util.makePathSimpler=m,t.util.getSmoothPathFromPoints=G,t.util.getPathSegmentsInfo=H,t.util.getBoundsOfCurve=o,t.util.getPointOnPath=Q,t.util.transformPath=lt}(),function(){var u=Array.prototype.slice;function n(o,f){for(var m=u.call(arguments,2),a=[],p=0,v=o.length;p<v;p++)a[p]=m.length?o[p][f].apply(o[p],m):o[p][f].call(o[p]);return a}function c(o,f){return l(o,f,function(m,a){return m>=a})}function h(o,f){return l(o,f,function(m,a){return m<a})}function r(o,f){for(var m=o.length;m--;)o[m]=f;return o}function l(o,f,m){if(!(!o||o.length===0)){var a=o.length-1,p=f?o[a][f]:o[a];if(f)for(;a--;)m(o[a][f],p)&&(p=o[a][f]);else for(;a--;)m(o[a],p)&&(p=o[a]);return p}}t.util.array={fill:r,invoke:n,min:h,max:c}}(),function(){function u(c,h,r){if(r)if(!t.isLikelyNode&&h instanceof Element)c=h;else if(h instanceof Array){c=[];for(var l=0,o=h.length;l<o;l++)c[l]=u({},h[l],r)}else if(h&&typeof h=="object")for(var f in h)f==="canvas"||f==="group"?c[f]=null:h.hasOwnProperty(f)&&(c[f]=u({},h[f],r));else c=h;else for(var f in h)c[f]=h[f];return c}function n(c,h){return u({},c,h)}t.util.object={extend:u,clone:n},t.util.object.extend(t.util,t.Observable)}(),function(){function u(l){return l.replace(/-+(.)?/g,function(o,f){return f?f.toUpperCase():""})}function n(l,o){return l.charAt(0).toUpperCase()+(o?l.slice(1):l.slice(1).toLowerCase())}function c(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(l){var o=0,f,m=[];for(o=0,f;o<l.length;o++)(f=r(l,o))!==!1&&m.push(f);return m}function r(l,o){var f=l.charCodeAt(o);if(isNaN(f))return"";if(f<55296||f>57343)return l.charAt(o);if(55296<=f&&f<=56319){if(l.length<=o+1)throw"High surrogate without following low surrogate";var m=l.charCodeAt(o+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return l.charAt(o)+l.charAt(o+1)}if(o===0)throw"Low surrogate without preceding high surrogate";var a=l.charCodeAt(o-1);if(55296>a||a>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:u,capitalize:n,escapeXml:c,graphemeSplit:h}}(),function(){var u=Array.prototype.slice,n=function(){},c=function(){for(var f in{toString:1})if(f==="toString")return!1;return!0}(),h=function(f,m,a){for(var p in m)p in f.prototype&&typeof f.prototype[p]=="function"&&(m[p]+"").indexOf("callSuper")>-1?f.prototype[p]=function(v){return function(){var b=this.constructor.superclass;this.constructor.superclass=a;var y=m[v].apply(this,arguments);if(this.constructor.superclass=b,v!=="initialize")return y}}(p):f.prototype[p]=m[p],c&&(m.toString!==Object.prototype.toString&&(f.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(f.prototype.valueOf=m.valueOf))};function r(){}function l(f){for(var m=null,a=this;a.constructor.superclass;){var p=a.constructor.superclass.prototype[f];if(a[f]!==p){m=p;break}a=a.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,u.call(arguments,1)):m.call(this):console.log("tried to callSuper "+f+", method not found in prototype chain",this)}function o(){var f=null,m=u.call(arguments,0);typeof m[0]=="function"&&(f=m.shift());function a(){this.initialize.apply(this,arguments)}a.superclass=f,a.subclasses=[],f&&(r.prototype=f.prototype,a.prototype=new r,f.subclasses.push(a));for(var p=0,v=m.length;p<v;p++)h(a,m[p],f);return a.prototype.initialize||(a.prototype.initialize=n),a.prototype.constructor=a,a.prototype.callSuper=l,a}t.util.createClass=o}(),function(){var u=!!t.document.createElement("div").attachEvent,n=["touchstart","touchmove","touchend"];t.util.addListener=function(h,r,l,o){h&&h.addEventListener(r,l,u?!1:o)},t.util.removeListener=function(h,r,l,o){h&&h.removeEventListener(r,l,u?!1:o)};function c(h){var r=h.changedTouches;return r&&r[0]?r[0]:h}t.util.getPointer=function(h){var r=h.target,l=t.util.getScrollLeftTop(r),o=c(h);return{x:o.clientX+l.left,y:o.clientY+l.top}},t.util.isTouchEvent=function(h){return n.indexOf(h.type)>-1||h.pointerType==="touch"}}(),function(){function u(o,f){var m=o.style;if(!m)return o;if(typeof f=="string")return o.style.cssText+=";"+f,f.indexOf("opacity")>-1?l(o,f.match(/opacity:\s*(\d?\.?\d*)/)[1]):o;for(var a in f)if(a==="opacity")l(o,f[a]);else{var p=a==="float"||a==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":a;m.setProperty(p,f[a])}return o}var n=t.document.createElement("div"),c=typeof n.style.opacity=="string",h=typeof n.style.filter=="string",r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,l=function(o){return o};c?l=function(o,f){return o.style.opacity=f,o}:h&&(l=function(o,f){var m=o.style;return o.currentStyle&&!o.currentStyle.hasLayout&&(m.zoom=1),r.test(m.filter)?(f=f>=.9999?"":"alpha(opacity="+f*100+")",m.filter=m.filter.replace(r,f)):m.filter+=" alpha(opacity="+f*100+")",o}),t.util.setStyle=u}(),function(){var u=Array.prototype.slice;function n(y){return typeof y=="string"?t.document.getElementById(y):y}var c,h=function(y){return u.call(y,0)};try{c=h(t.document.childNodes)instanceof Array}catch{}c||(h=function(y){for(var C=new Array(y.length),S=y.length;S--;)C[S]=y[S];return C});function r(y,C){var S=t.document.createElement(y);for(var w in C)w==="class"?S.className=C[w]:w==="for"?S.htmlFor=C[w]:S.setAttribute(w,C[w]);return S}function l(y,C){y&&(" "+y.className+" ").indexOf(" "+C+" ")===-1&&(y.className+=(y.className?" ":"")+C)}function o(y,C,S){return typeof C=="string"&&(C=r(C,S)),y.parentNode&&y.parentNode.replaceChild(C,y),C.appendChild(y),C}function f(y){for(var C=0,S=0,w=t.document.documentElement,k=t.document.body||{scrollLeft:0,scrollTop:0};y&&(y.parentNode||y.host)&&(y=y.parentNode||y.host,y===t.document?(C=k.scrollLeft||w.scrollLeft||0,S=k.scrollTop||w.scrollTop||0):(C+=y.scrollLeft||0,S+=y.scrollTop||0),!(y.nodeType===1&&y.style.position==="fixed")););return{left:C,top:S}}function m(y){var C,S=y&&y.ownerDocument,w={left:0,top:0},k={left:0,top:0},F,V={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!S)return k;for(var z in V)k[V[z]]+=parseInt(a(y,z),10)||0;return C=S.documentElement,typeof y.getBoundingClientRect<"u"&&(w=y.getBoundingClientRect()),F=f(y),{left:w.left+F.left-(C.clientLeft||0)+k.left,top:w.top+F.top-(C.clientTop||0)+k.top}}var a;t.document.defaultView&&t.document.defaultView.getComputedStyle?a=function(y,C){var S=t.document.defaultView.getComputedStyle(y,null);return S?S[C]:void 0}:a=function(y,C){var S=y.style[C];return!S&&y.currentStyle&&(S=y.currentStyle[C]),S},function(){var y=t.document.documentElement.style,C="userSelect"in y?"userSelect":"MozUserSelect"in y?"MozUserSelect":"WebkitUserSelect"in y?"WebkitUserSelect":"KhtmlUserSelect"in y?"KhtmlUserSelect":"";function S(k){return typeof k.onselectstart<"u"&&(k.onselectstart=t.util.falseFunction),C?k.style[C]="none":typeof k.unselectable=="string"&&(k.unselectable="on"),k}function w(k){return typeof k.onselectstart<"u"&&(k.onselectstart=null),C?k.style[C]="":typeof k.unselectable=="string"&&(k.unselectable=""),k}t.util.makeElementUnselectable=S,t.util.makeElementSelectable=w}();function p(y){var C=t.jsdomImplForWrapper(y);return C._canvas||C._image}function v(y){if(t.isLikelyNode){var C=t.jsdomImplForWrapper(y);C&&(C._image=null,C._canvas=null,C._currentSrc=null,C._attributes=null,C._classList=null)}}function b(y,C){y.imageSmoothingEnabled=y.imageSmoothingEnabled||y.webkitImageSmoothingEnabled||y.mozImageSmoothingEnabled||y.msImageSmoothingEnabled||y.oImageSmoothingEnabled,y.imageSmoothingEnabled=C}t.util.setImageSmoothing=b,t.util.getById=n,t.util.toArray=h,t.util.addClass=l,t.util.makeElement=r,t.util.wrapElement=o,t.util.getScrollLeftTop=f,t.util.getElementOffset=m,t.util.getNodeCanvas=p,t.util.cleanUpJsdomNode=v}(),function(){function u(h,r){return h+(/\?/.test(h)?"&":"?")+r}function n(){}function c(h,r){r||(r={});var l=r.method?r.method.toUpperCase():"GET",o=r.onComplete||function(){},f=new t.window.XMLHttpRequest,m=r.body||r.parameters;return f.onreadystatechange=function(){f.readyState===4&&(o(f),f.onreadystatechange=n)},l==="GET"&&(m=null,typeof r.parameters=="string"&&(h=u(h,r.parameters))),f.open(l,h,!0),(l==="POST"||l==="PUT")&&f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(m),f}t.util.request=c}(),t.log=console.log,t.warn=console.warn,function(){var u=t.util.object.extend,n=t.util.object.clone,c=[];t.util.object.extend(c,{cancelAll:function(){var p=this.splice(0);return p.forEach(function(v){v.cancel()}),p},cancelByCanvas:function(p){if(!p)return[];var v=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===p});return v.forEach(function(b){b.cancel()}),v},cancelByTarget:function(p){var v=this.findAnimationsByTarget(p);return v.forEach(function(b){b.cancel()}),v},findAnimationIndex:function(p){return this.indexOf(this.findAnimation(p))},findAnimation:function(p){return this.find(function(v){return v.cancel===p})},findAnimationsByTarget:function(p){return p?this.filter(function(v){return v.target===p}):[]}});function h(){return!1}function r(p,v,b,y){return-b*Math.cos(p/y*(Math.PI/2))+b+v}function l(p){p||(p={});var v=!1,b,y=function(){var C=t.runningAnimations.indexOf(b);return C>-1&&t.runningAnimations.splice(C,1)[0]};return b=u(n(p),{cancel:function(){return v=!0,y()},currentValue:"startValue"in p?p.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(b),m(function(C){var S=C||+new Date,w=p.duration||500,k=S+w,F,V=p.onChange||h,z=p.abort||h,Y=p.onComplete||h,et=p.easing||r,H="startValue"in p?p.startValue.length>0:!1,Q="startValue"in p?p.startValue:0,ct="endValue"in p?p.endValue:100,G=p.byValue||(H?Q.map(function(lt,T){return ct[T]-Q[T]}):ct-Q);p.onStart&&p.onStart(),function lt(T){F=T||+new Date;var L=F>k?w:F-S,D=L/w,E=H?Q.map(function(x,O){return et(L,Q[O],G[O],w)}):et(L,Q,G,w),U=Math.abs(H?(E[0]-Q[0])/G[0]:(E-Q)/G);if(b.currentValue=H?E.slice():E,b.completionRate=U,b.durationRate=D,!v){if(z(E,U,D)){y();return}if(F>k){b.currentValue=H?ct.slice():ct,b.completionRate=1,b.durationRate=1,V(H?ct.slice():ct,1,1),Y(ct,1,1),y();return}else V(E,U,D),m(lt)}}(S)}),b.cancel}var o=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(p){return t.window.setTimeout(p,1e3/60)},f=t.window.cancelAnimationFrame||t.window.clearTimeout;function m(){return o.apply(t.window,arguments)}function a(){return f.apply(t.window,arguments)}t.util.animate=l,t.util.requestAnimFrame=m,t.util.cancelAnimFrame=a,t.runningAnimations=c}(),function(){function u(c,h,r){var l="rgba("+parseInt(c[0]+r*(h[0]-c[0]),10)+","+parseInt(c[1]+r*(h[1]-c[1]),10)+","+parseInt(c[2]+r*(h[2]-c[2]),10);return l+=","+(c&&h?parseFloat(c[3]+r*(h[3]-c[3])):1),l+=")",l}function n(c,h,r,l){var o=new t.Color(c).getSource(),f=new t.Color(h).getSource(),m=l.onComplete,a=l.onChange;return l=l||{},t.util.animate(t.util.object.extend(l,{duration:r||500,startValue:o,endValue:f,byValue:f,easing:function(p,v,b,y){var C=l.colorEasing?l.colorEasing(p,y):1-Math.cos(p/y*(Math.PI/2));return u(v,b,C)},onComplete:function(p,v,b){if(m)return m(u(f,f,0),v,b)},onChange:function(p,v,b){if(a){if(Array.isArray(p))return a(u(p,p,0),v,b);a(p,v,b)}}}))}t.util.animateColor=n}(),function(){function u(T,L,D,E){return T<Math.abs(L)?(T=L,E=D/4):L===0&&T===0?E=D/(2*Math.PI)*Math.asin(1):E=D/(2*Math.PI)*Math.asin(L/T),{a:T,c:L,p:D,s:E}}function n(T,L,D){return T.a*Math.pow(2,10*(L-=1))*Math.sin((L*D-T.s)*(2*Math.PI)/T.p)}function c(T,L,D,E){return D*((T=T/E-1)*T*T+1)+L}function h(T,L,D,E){return T/=E/2,T<1?D/2*T*T*T+L:D/2*((T-=2)*T*T+2)+L}function r(T,L,D,E){return D*(T/=E)*T*T*T+L}function l(T,L,D,E){return-D*((T=T/E-1)*T*T*T-1)+L}function o(T,L,D,E){return T/=E/2,T<1?D/2*T*T*T*T+L:-D/2*((T-=2)*T*T*T-2)+L}function f(T,L,D,E){return D*(T/=E)*T*T*T*T+L}function m(T,L,D,E){return D*((T=T/E-1)*T*T*T*T+1)+L}function a(T,L,D,E){return T/=E/2,T<1?D/2*T*T*T*T*T+L:D/2*((T-=2)*T*T*T*T+2)+L}function p(T,L,D,E){return-D*Math.cos(T/E*(Math.PI/2))+D+L}function v(T,L,D,E){return D*Math.sin(T/E*(Math.PI/2))+L}function b(T,L,D,E){return-D/2*(Math.cos(Math.PI*T/E)-1)+L}function y(T,L,D,E){return T===0?L:D*Math.pow(2,10*(T/E-1))+L}function C(T,L,D,E){return T===E?L+D:D*(-Math.pow(2,-10*T/E)+1)+L}function S(T,L,D,E){return T===0?L:T===E?L+D:(T/=E/2,T<1?D/2*Math.pow(2,10*(T-1))+L:D/2*(-Math.pow(2,-10*--T)+2)+L)}function w(T,L,D,E){return-D*(Math.sqrt(1-(T/=E)*T)-1)+L}function k(T,L,D,E){return D*Math.sqrt(1-(T=T/E-1)*T)+L}function F(T,L,D,E){return T/=E/2,T<1?-D/2*(Math.sqrt(1-T*T)-1)+L:D/2*(Math.sqrt(1-(T-=2)*T)+1)+L}function V(T,L,D,E){var U=1.70158,x=0,O=D;if(T===0)return L;if(T/=E,T===1)return L+D;x||(x=E*.3);var I=u(O,D,x,U);return-n(I,T,E)+L}function z(T,L,D,E){var U=1.70158,x=0,O=D;if(T===0)return L;if(T/=E,T===1)return L+D;x||(x=E*.3);var I=u(O,D,x,U);return I.a*Math.pow(2,-10*T)*Math.sin((T*E-I.s)*(2*Math.PI)/I.p)+I.c+L}function Y(T,L,D,E){var U=1.70158,x=0,O=D;if(T===0)return L;if(T/=E/2,T===2)return L+D;x||(x=E*(.3*1.5));var I=u(O,D,x,U);return T<1?-.5*n(I,T,E)+L:I.a*Math.pow(2,-10*(T-=1))*Math.sin((T*E-I.s)*(2*Math.PI)/I.p)*.5+I.c+L}function et(T,L,D,E,U){return U===void 0&&(U=1.70158),D*(T/=E)*T*((U+1)*T-U)+L}function H(T,L,D,E,U){return U===void 0&&(U=1.70158),D*((T=T/E-1)*T*((U+1)*T+U)+1)+L}function Q(T,L,D,E,U){return U===void 0&&(U=1.70158),T/=E/2,T<1?D/2*(T*T*(((U*=1.525)+1)*T-U))+L:D/2*((T-=2)*T*(((U*=1.525)+1)*T+U)+2)+L}function ct(T,L,D,E){return D-G(E-T,0,D,E)+L}function G(T,L,D,E){return(T/=E)<1/2.75?D*(7.5625*T*T)+L:T<2/2.75?D*(7.5625*(T-=1.5/2.75)*T+.75)+L:T<2.5/2.75?D*(7.5625*(T-=2.25/2.75)*T+.9375)+L:D*(7.5625*(T-=2.625/2.75)*T+.984375)+L}function lt(T,L,D,E){return T<E/2?ct(T*2,0,D,E)*.5+L:G(T*2-E,0,D,E)*.5+D*.5+L}t.util.ease={easeInQuad:function(T,L,D,E){return D*(T/=E)*T+L},easeOutQuad:function(T,L,D,E){return-D*(T/=E)*(T-2)+L},easeInOutQuad:function(T,L,D,E){return T/=E/2,T<1?D/2*T*T+L:-D/2*(--T*(T-2)-1)+L},easeInCubic:function(T,L,D,E){return D*(T/=E)*T*T+L},easeOutCubic:c,easeInOutCubic:h,easeInQuart:r,easeOutQuart:l,easeInOutQuart:o,easeInQuint:f,easeOutQuint:m,easeInOutQuint:a,easeInSine:p,easeOutSine:v,easeInOutSine:b,easeInExpo:y,easeOutExpo:C,easeInOutExpo:S,easeInCirc:w,easeOutCirc:k,easeInOutCirc:F,easeInElastic:V,easeOutElastic:z,easeInOutElastic:Y,easeInBack:et,easeOutBack:H,easeInOutBack:Q,easeInBounce:ct,easeOutBounce:G,easeInOutBounce:lt}}(),function(u){var n=u.fabric||(u.fabric={}),c=n.util.object.extend,h=n.util.object.clone,r=n.util.toFixed,l=n.util.parseUnit,o=n.util.multiplyTransformMatrices,f=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],a=["pattern","defs","symbol","metadata","clipPath","mask","desc"],p=["symbol","g","a","svg","clipPath","defs"],v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},y="font-size",C="clip-path";n.svgValidTagNamesRegEx=k(f),n.svgViewBoxElementsRegEx=k(m),n.svgInvalidAncestorsRegEx=k(a),n.svgValidParentsRegEx=k(p),n.cssRules={},n.gradientDefs={},n.clipPaths={};function S(x){return x in v?v[x]:x}function w(x,O,I,W){var Z=Array.isArray(O),q;if((x==="fill"||x==="stroke")&&O==="none")O="";else{if(x==="strokeUniform")return O==="non-scaling-stroke";if(x==="strokeDashArray")O==="none"?O=null:O=O.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(x==="transformMatrix")I&&I.transformMatrix?O=o(I.transformMatrix,n.parseTransformAttribute(O)):O=n.parseTransformAttribute(O);else if(x==="visible")O=O!=="none"&&O!=="hidden",I&&I.visible===!1&&(O=!1);else if(x==="opacity")O=parseFloat(O),I&&typeof I.opacity<"u"&&(O*=I.opacity);else if(x==="textAnchor")O=O==="start"?"left":O==="end"?"right":"center";else if(x==="charSpacing")q=l(O,W)/W*1e3;else if(x==="paintFirst"){var nt=O.indexOf("fill"),at=O.indexOf("stroke"),O="fill";(nt>-1&&at>-1&&at<nt||nt===-1&&at>-1)&&(O="stroke")}else{if(x==="href"||x==="xlink:href"||x==="font")return O;if(x==="imageSmoothing")return O==="optimizeQuality";q=Z?O.map(l):l(O,W)}}return!Z&&isNaN(q)?O:q}function k(x){return new RegExp("^("+x.join("|")+")\\b","i")}function F(x){for(var O in b)if(!(typeof x[b[O]]>"u"||x[O]==="")){if(typeof x[O]>"u"){if(!n.Object.prototype[O])continue;x[O]=n.Object.prototype[O]}if(x[O].indexOf("url(")!==0){var I=new n.Color(x[O]);x[O]=I.setAlpha(r(I.getAlpha()*x[b[O]],2)).toRgba()}}return x}function V(x,O){var I,W=[],Z,q,nt;for(q=0,nt=O.length;q<nt;q++)I=O[q],Z=x.getElementsByTagName(I),W=W.concat(Array.prototype.slice.call(Z));return W}n.parseTransformAttribute=function(){function x(X,pt){var bt=n.util.cos(pt[0]),wt=n.util.sin(pt[0]),Dt=0,Ot=0;pt.length===3&&(Dt=pt[1],Ot=pt[2]),X[0]=bt,X[1]=wt,X[2]=-wt,X[3]=bt,X[4]=Dt-(bt*Dt-wt*Ot),X[5]=Ot-(wt*Dt+bt*Ot)}function O(X,pt){var bt=pt[0],wt=pt.length===2?pt[1]:pt[0];X[0]=bt,X[3]=wt}function I(X,pt,bt){X[bt]=Math.tan(n.util.degreesToRadians(pt[0]))}function W(X,pt){X[4]=pt[0],pt.length===2&&(X[5]=pt[1])}var Z=n.iMatrix,q=n.reNum,nt=n.commaWsp,at="(?:(skewX)\\s*\\(\\s*("+q+")\\s*\\))",ht="(?:(skewY)\\s*\\(\\s*("+q+")\\s*\\))",J="(?:(rotate)\\s*\\(\\s*("+q+")(?:"+nt+"("+q+")"+nt+"("+q+"))?\\s*\\))",N="(?:(scale)\\s*\\(\\s*("+q+")(?:"+nt+"("+q+"))?\\s*\\))",tt="(?:(translate)\\s*\\(\\s*("+q+")(?:"+nt+"("+q+"))?\\s*\\))",$="(?:(matrix)\\s*\\(\\s*("+q+")"+nt+"("+q+")"+nt+"("+q+")"+nt+"("+q+")"+nt+"("+q+")"+nt+"("+q+")\\s*\\))",K="(?:"+$+"|"+tt+"|"+N+"|"+J+"|"+at+"|"+ht+")",rt="(?:"+K+"(?:"+nt+"*"+K+")*)",dt="^\\s*(?:"+rt+"?)\\s*$",_t=new RegExp(dt),ot=new RegExp(K,"g");return function(X){var pt=Z.concat(),bt=[];if(!X||X&&!_t.test(X))return pt;X.replace(ot,function(Dt){var Ot=new RegExp(K).exec(Dt).filter(function(Zt){return!!Zt}),Gt=Ot[1],It=Ot.slice(2).map(parseFloat);switch(Gt){case"translate":W(pt,It);break;case"rotate":It[0]=n.util.degreesToRadians(It[0]),x(pt,It);break;case"scale":O(pt,It);break;case"skewX":I(pt,It,2);break;case"skewY":I(pt,It,1);break;case"matrix":pt=It;break}bt.push(pt.concat()),pt=Z.concat()});for(var wt=bt[0];bt.length>1;)bt.shift(),wt=n.util.multiplyTransformMatrices(wt,bt[0]);return wt}}();function z(x,O){var I,W;x.replace(/;\s*$/,"").split(";").forEach(function(Z){var q=Z.split(":");I=q[0].trim().toLowerCase(),W=q[1].trim(),O[I]=W})}function Y(x,O){var I,W;for(var Z in x)typeof x[Z]>"u"||(I=Z.toLowerCase(),W=x[Z],O[I]=W)}function et(x,O){var I={};for(var W in n.cssRules[O])if(H(x,W.split(" ")))for(var Z in n.cssRules[O][W])I[Z]=n.cssRules[O][W][Z];return I}function H(x,O){var I,W=!0;return I=ct(x,O.pop()),I&&O.length&&(W=Q(x,O)),I&&W&&O.length===0}function Q(x,O){for(var I,W=!0;x.parentNode&&x.parentNode.nodeType===1&&O.length;)W&&(I=O.pop()),x=x.parentNode,W=ct(x,I);return O.length===0}function ct(x,O){var I=x.nodeName,W=x.getAttribute("class"),Z=x.getAttribute("id"),q,nt;if(q=new RegExp("^"+I,"i"),O=O.replace(q,""),Z&&O.length&&(q=new RegExp("#"+Z+"(?![a-zA-Z\\-]+)","i"),O=O.replace(q,"")),W&&O.length)for(W=W.split(" "),nt=W.length;nt--;)q=new RegExp("\\."+W[nt]+"(?![a-zA-Z\\-]+)","i"),O=O.replace(q,"");return O.length===0}function G(x,O){var I;if(x.getElementById&&(I=x.getElementById(O)),I)return I;var W,Z,q,nt=x.getElementsByTagName("*");for(Z=0,q=nt.length;Z<q;Z++)if(W=nt[Z],O===W.getAttribute("id"))return W}function lt(x){for(var O=V(x,["use","svg:use"]),I=0;O.length&&I<O.length;){var W=O[I],Z=W.getAttribute("xlink:href")||W.getAttribute("href");if(Z===null)return;var q=Z.slice(1),nt=W.getAttribute("x")||0,at=W.getAttribute("y")||0,ht=G(x,q).cloneNode(!0),J=(ht.getAttribute("transform")||"")+" translate("+nt+", "+at+")",N,tt=O.length,$,K,rt,dt,_t=n.svgNS;if(L(ht),/^svg$/i.test(ht.nodeName)){var ot=ht.ownerDocument.createElementNS(_t,"g");for(K=0,rt=ht.attributes,dt=rt.length;K<dt;K++)$=rt.item(K),ot.setAttributeNS(_t,$.nodeName,$.nodeValue);for(;ht.firstChild;)ot.appendChild(ht.firstChild);ht=ot}for(K=0,rt=W.attributes,dt=rt.length;K<dt;K++)$=rt.item(K),!($.nodeName==="x"||$.nodeName==="y"||$.nodeName==="xlink:href"||$.nodeName==="href")&&($.nodeName==="transform"?J=$.nodeValue+" "+J:ht.setAttribute($.nodeName,$.nodeValue));ht.setAttribute("transform",J),ht.setAttribute("instantiated_by_use","1"),ht.removeAttribute("id"),N=W.parentNode,N.replaceChild(ht,W),O.length===tt&&I++}}var T=new RegExp("^\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*$");function L(x){if(!n.svgViewBoxElementsRegEx.test(x.nodeName))return{};var O=x.getAttribute("viewBox"),I=1,W=1,Z=0,q=0,nt,at,ht,J,N=x.getAttribute("width"),tt=x.getAttribute("height"),$=x.getAttribute("x")||0,K=x.getAttribute("y")||0,rt=x.getAttribute("preserveAspectRatio")||"",dt=!O||!(O=O.match(T)),_t=!N||!tt||N==="100%"||tt==="100%",ot=dt&&_t,X={},pt="",bt=0,wt=0;if(X.width=0,X.height=0,X.toBeParsed=ot,dt&&($||K)&&x.parentNode&&x.parentNode.nodeName!=="#document"&&(pt=" translate("+l($)+" "+l(K)+") ",ht=(x.getAttribute("transform")||"")+pt,x.setAttribute("transform",ht),x.removeAttribute("x"),x.removeAttribute("y")),ot)return X;if(dt)return X.width=l(N),X.height=l(tt),X;if(Z=-parseFloat(O[1]),q=-parseFloat(O[2]),nt=parseFloat(O[3]),at=parseFloat(O[4]),X.minX=Z,X.minY=q,X.viewBoxWidth=nt,X.viewBoxHeight=at,_t?(X.width=nt,X.height=at):(X.width=l(N),X.height=l(tt),I=X.width/nt,W=X.height/at),rt=n.util.parsePreserveAspectRatioAttribute(rt),rt.alignX!=="none"&&(rt.meetOrSlice==="meet"&&(W=I=I>W?W:I),rt.meetOrSlice==="slice"&&(W=I=I>W?I:W),bt=X.width-nt*I,wt=X.height-at*I,rt.alignX==="Mid"&&(bt/=2),rt.alignY==="Mid"&&(wt/=2),rt.alignX==="Min"&&(bt=0),rt.alignY==="Min"&&(wt=0)),I===1&&W===1&&Z===0&&q===0&&$===0&&K===0)return X;if(($||K)&&x.parentNode.nodeName!=="#document"&&(pt=" translate("+l($)+" "+l(K)+") "),ht=pt+" matrix("+I+" 0 0 "+W+" "+(Z*I+bt)+" "+(q*W+wt)+") ",x.nodeName==="svg"){for(J=x.ownerDocument.createElementNS(n.svgNS,"g");x.firstChild;)J.appendChild(x.firstChild);x.appendChild(J)}else J=x,J.removeAttribute("x"),J.removeAttribute("y"),ht=J.getAttribute("transform")+ht;return J.setAttribute("transform",ht),X}function D(x,O){for(;x&&(x=x.parentNode);)if(x.nodeName&&O.test(x.nodeName.replace("svg:",""))&&!x.getAttribute("instantiated_by_use"))return!0;return!1}n.parseSVGDocument=function(x,O,I,W){if(x){lt(x);var Z=n.Object.__uid++,q,nt,at=L(x),ht=n.util.toArray(x.getElementsByTagName("*"));if(at.crossOrigin=W&&W.crossOrigin,at.svgUid=Z,ht.length===0&&n.isLikelyNode){ht=x.selectNodes('//*[name(.)!="svg"]');var J=[];for(q=0,nt=ht.length;q<nt;q++)J[q]=ht[q];ht=J}var N=ht.filter(function($){return L($),n.svgValidTagNamesRegEx.test($.nodeName.replace("svg:",""))&&!D($,n.svgInvalidAncestorsRegEx)});if(!N||N&&!N.length){O&&O([],{});return}var tt={};ht.filter(function($){return $.nodeName.replace("svg:","")==="clipPath"}).forEach(function($){var K=$.getAttribute("id");tt[K]=n.util.toArray($.getElementsByTagName("*")).filter(function(rt){return n.svgValidTagNamesRegEx.test(rt.nodeName.replace("svg:",""))})}),n.gradientDefs[Z]=n.getGradientDefs(x),n.cssRules[Z]=n.getCSSRules(x),n.clipPaths[Z]=tt,n.parseElements(N,function($,K){O&&(O($,at,K,ht),delete n.gradientDefs[Z],delete n.cssRules[Z],delete n.clipPaths[Z])},h(at),I,W)}};function E(x,O){var I=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],W="xlink:href",Z=O.getAttribute(W).slice(1),q=G(x,Z);if(q&&q.getAttribute(W)&&E(x,q),I.forEach(function(at){q&&!O.hasAttribute(at)&&q.hasAttribute(at)&&O.setAttribute(at,q.getAttribute(at))}),!O.children.length)for(var nt=q.cloneNode(!0);nt.firstChild;)O.appendChild(nt.firstChild);O.removeAttribute(W)}var U=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+n.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+n.reNum+"))?\\s+(.*)");c(n,{parseFontDeclaration:function(x,O){var I=x.match(U);if(I){var W=I[1],Z=I[3],q=I[4],nt=I[5],at=I[6];W&&(O.fontStyle=W),Z&&(O.fontWeight=isNaN(parseFloat(Z))?Z:parseFloat(Z)),q&&(O.fontSize=l(q)),at&&(O.fontFamily=at),nt&&(O.lineHeight=nt==="normal"?1:nt)}},getGradientDefs:function(x){var O=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],I=V(x,O),W,Z=0,q={};for(Z=I.length;Z--;)W=I[Z],W.getAttribute("xlink:href")&&E(x,W),q[W.getAttribute("id")]=W;return q},parseAttributes:function(x,O,I){if(x){var W,Z={},q,nt;typeof I>"u"&&(I=x.getAttribute("svgUid")),x.parentNode&&n.svgValidParentsRegEx.test(x.parentNode.nodeName)&&(Z=n.parseAttributes(x.parentNode,O,I));var at=O.reduce(function(rt,dt){return W=x.getAttribute(dt),W&&(rt[dt]=W),rt},{}),ht=c(et(x,I),n.parseStyleAttribute(x));at=c(at,ht),ht[C]&&x.setAttribute(C,ht[C]),q=nt=Z.fontSize||n.Text.DEFAULT_SVG_FONT_SIZE,at[y]&&(at[y]=q=l(at[y],nt));var J,N,tt={};for(var $ in at)J=S($),N=w(J,at[$],Z,q),tt[J]=N;tt&&tt.font&&n.parseFontDeclaration(tt.font,tt);var K=c(Z,tt);return n.svgValidParentsRegEx.test(x.nodeName)?K:F(K)}},parseElements:function(x,O,I,W,Z){new n.ElementsParser(x,O,I,W,Z).parse()},parseStyleAttribute:function(x){var O={},I=x.getAttribute("style");return I&&(typeof I=="string"?z(I,O):Y(I,O)),O},parsePointsAttribute:function(x){if(!x)return null;x=x.replace(/,/g," ").trim(),x=x.split(/\s+/);var O=[],I,W;for(I=0,W=x.length;I<W;I+=2)O.push({x:parseFloat(x[I]),y:parseFloat(x[I+1])});return O},getCSSRules:function(x){var O=x.getElementsByTagName("style"),I,W,Z={},q;for(I=0,W=O.length;I<W;I++){var nt=O[I].textContent;nt=nt.replace(/\/\*[\s\S]*?\*\//g,""),nt.trim()!==""&&(q=nt.split("}"),q=q.filter(function(at){return at.trim()}),q.forEach(function(at){var ht=at.split("{"),J={},N=ht[1].trim(),tt=N.split(";").filter(function(dt){return dt.trim()});for(I=0,W=tt.length;I<W;I++){var $=tt[I].split(":"),K=$[0].trim(),rt=$[1].trim();J[K]=rt}at=ht[0].trim(),at.split(",").forEach(function(dt){dt=dt.replace(/^svg/i,"").trim(),dt!==""&&(Z[dt]?n.util.object.extend(Z[dt],J):Z[dt]=n.util.object.clone(J))})}))}return Z},loadSVGFromURL:function(x,O,I,W){x=x.replace(/^\n\s*/,"").trim(),new n.util.request(x,{method:"get",onComplete:Z});function Z(q){var nt=q.responseXML;if(!nt||!nt.documentElement)return O&&O(null),!1;n.parseSVGDocument(nt.documentElement,function(at,ht,J,N){O&&O(at,ht,J,N)},I,W)}},loadSVGFromString:function(x,O,I,W){var Z=new n.window.DOMParser,q=Z.parseFromString(x.trim(),"text/xml");n.parseSVGDocument(q.documentElement,function(nt,at,ht,J){O(nt,at,ht,J)},I,W)}})}(s),t.ElementsParser=function(u,n,c,h,r,l){this.elements=u,this.callback=n,this.options=c,this.reviver=h,this.svgUid=c&&c.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},function(u){u.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},u.createObjects=function(){var n=this;this.elements.forEach(function(c,h){c.setAttribute("svgUid",n.svgUid),n.createObject(c,h)})},u.findTag=function(n){return t[t.util.string.capitalize(n.tagName.replace("svg:",""))]},u.createObject=function(n,c){var h=this.findTag(n);if(h&&h.fromElement)try{h.fromElement(n,this.createCallback(c,n),this.options)}catch(r){t.log(r)}else this.checkIfDone()},u.createCallback=function(n,c){var h=this;return function(r){var l;h.resolveGradient(r,c,"fill"),h.resolveGradient(r,c,"stroke"),r instanceof t.Image&&r._originalElement&&(l=r.parsePreserveAspectRatioAttribute(c)),r._removeTransformMatrix(l),h.resolveClipPath(r,c),h.reviver&&h.reviver(c,r),h.instances[n]=r,h.checkIfDone()}},u.extractPropertyDefinition=function(n,c,h){var r=n[c],l=this.regexUrl;if(l.test(r)){l.lastIndex=0;var o=l.exec(r)[1];return l.lastIndex=0,t[h][this.svgUid][o]}},u.resolveGradient=function(n,c,h){var r=this.extractPropertyDefinition(n,h,"gradientDefs");if(r){var l=c.getAttribute(h+"-opacity"),o=t.Gradient.fromElement(r,n,l,this.options);n.set(h,o)}},u.createClipPathCallback=function(n,c){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,c.push(h)}},u.resolveClipPath=function(n,c){var h=this.extractPropertyDefinition(n,"clipPath","clipPaths"),r,l,o,f,m,a;if(h){f=[],o=t.util.invertTransform(n.calcTransformMatrix());for(var p=h[0].parentNode,v=c;v.parentNode&&v.getAttribute("clip-path")!==n.clipPath;)v=v.parentNode;v.parentNode.appendChild(p);for(var b=0;b<h.length;b++)r=h[b],l=this.findTag(r),l.fromElement(r,this.createClipPathCallback(n,f),this.options);f.length===1?h=f[0]:h=new t.Group(f),m=t.util.multiplyTransformMatrices(o,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,v);var a=t.util.qrDecompose(m);h.flipX=!1,h.flipY=!1,h.set("scaleX",a.scaleX),h.set("scaleY",a.scaleY),h.angle=a.angle,h.skewX=a.skewX,h.skewY=0,h.setPositionByOrigin({x:a.translateX,y:a.translateY},"center","center"),n.clipPath=h}else delete n.clipPath},u.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(n){return n!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(u){var n=u.fabric||(u.fabric={});if(n.Point){n.warn("fabric.Point is already defined");return}n.Point=c;function c(h,r){this.x=h,this.y=r}c.prototype={type:"point",constructor:c,add:function(h){return new c(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new c(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new c(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new c(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new c(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new c(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,r){return typeof r>"u"&&(r=.5),r=Math.max(Math.min(1,r),0),new c(this.x+(h.x-this.x)*r,this.y+(h.y-this.y)*r)},distanceFrom:function(h){var r=this.x-h.x,l=this.y-h.y;return Math.sqrt(r*r+l*l)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new c(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new c(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,r){return this.x=h,this.y=r,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var r=this.x,l=this.y;this.x=h.x,this.y=h.y,h.x=r,h.y=l},clone:function(){return new c(this.x,this.y)}}}(s),function(u){var n=u.fabric||(u.fabric={});if(n.Intersection){n.warn("fabric.Intersection is already defined");return}function c(h){this.status=h,this.points=[]}n.Intersection=c,n.Intersection.prototype={constructor:c,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},n.Intersection.intersectLineLine=function(h,r,l,o){var f,m=(o.x-l.x)*(h.y-l.y)-(o.y-l.y)*(h.x-l.x),a=(r.x-h.x)*(h.y-l.y)-(r.y-h.y)*(h.x-l.x),p=(o.y-l.y)*(r.x-h.x)-(o.x-l.x)*(r.y-h.y);if(p!==0){var v=m/p,b=a/p;0<=v&&v<=1&&0<=b&&b<=1?(f=new c("Intersection"),f.appendPoint(new n.Point(h.x+v*(r.x-h.x),h.y+v*(r.y-h.y)))):f=new c}else m===0||a===0?f=new c("Coincident"):f=new c("Parallel");return f},n.Intersection.intersectLinePolygon=function(h,r,l){var o=new c,f=l.length,m,a,p,v;for(v=0;v<f;v++)m=l[v],a=l[(v+1)%f],p=c.intersectLineLine(h,r,m,a),o.appendPoints(p.points);return o.points.length>0&&(o.status="Intersection"),o},n.Intersection.intersectPolygonPolygon=function(h,r){var l=new c,o=h.length,f;for(f=0;f<o;f++){var m=h[f],a=h[(f+1)%o],p=c.intersectLinePolygon(m,a,r);l.appendPoints(p.points)}return l.points.length>0&&(l.status="Intersection"),l},n.Intersection.intersectPolygonRectangle=function(h,r,l){var o=r.min(l),f=r.max(l),m=new n.Point(f.x,o.y),a=new n.Point(o.x,f.y),p=c.intersectLinePolygon(o,m,h),v=c.intersectLinePolygon(m,f,h),b=c.intersectLinePolygon(f,a,h),y=c.intersectLinePolygon(a,o,h),C=new c;return C.appendPoints(p.points),C.appendPoints(v.points),C.appendPoints(b.points),C.appendPoints(y.points),C.points.length>0&&(C.status="Intersection"),C}}(s),function(u){var n=u.fabric||(u.fabric={});if(n.Color){n.warn("fabric.Color is already defined.");return}function c(r){r?this._tryParsingColor(r):this.setSource([0,0,0,1])}n.Color=c,n.Color.prototype={_tryParsingColor:function(r){var l;r in c.colorNameMap&&(r=c.colorNameMap[r]),r==="transparent"&&(l=[255,255,255,0]),l||(l=c.sourceFromHex(r)),l||(l=c.sourceFromRgb(r)),l||(l=c.sourceFromHsl(r)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(r,l,o){r/=255,l/=255,o/=255;var f,m,a,p=n.util.array.max([r,l,o]),v=n.util.array.min([r,l,o]);if(a=(p+v)/2,p===v)f=m=0;else{var b=p-v;switch(m=a>.5?b/(2-p-v):b/(p+v),p){case r:f=(l-o)/b+(l<o?6:0);break;case l:f=(o-r)/b+2;break;case o:f=(r-l)/b+4;break}f/=6}return[Math.round(f*360),Math.round(m*100),Math.round(a*100)]},getSource:function(){return this._source},setSource:function(r){this._source=r},toRgb:function(){var r=this.getSource();return"rgb("+r[0]+","+r[1]+","+r[2]+")"},toRgba:function(){var r=this.getSource();return"rgba("+r[0]+","+r[1]+","+r[2]+","+r[3]+")"},toHsl:function(){var r=this.getSource(),l=this._rgbToHsl(r[0],r[1],r[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var r=this.getSource(),l=this._rgbToHsl(r[0],r[1],r[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+r[3]+")"},toHex:function(){var r=this.getSource(),l,o,f;return l=r[0].toString(16),l=l.length===1?"0"+l:l,o=r[1].toString(16),o=o.length===1?"0"+o:o,f=r[2].toString(16),f=f.length===1?"0"+f:f,l.toUpperCase()+o.toUpperCase()+f.toUpperCase()},toHexa:function(){var r=this.getSource(),l;return l=Math.round(r[3]*255),l=l.toString(16),l=l.length===1?"0"+l:l,this.toHex()+l.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(r){var l=this.getSource();return l[3]=r,this.setSource(l),this},toGrayscale:function(){var r=this.getSource(),l=parseInt((r[0]*.3+r[1]*.59+r[2]*.11).toFixed(0),10),o=r[3];return this.setSource([l,l,l,o]),this},toBlackWhite:function(r){var l=this.getSource(),o=(l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),f=l[3];return r=r||127,o=Number(o)<Number(r)?0:255,this.setSource([o,o,o,f]),this},overlayWith:function(r){r instanceof c||(r=new c(r));var l=[],o=this.getAlpha(),f=.5,m=this.getSource(),a=r.getSource(),p;for(p=0;p<3;p++)l.push(Math.round(m[p]*(1-f)+a[p]*f));return l[3]=o,this.setSource(l),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function h(r,l,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?r+(l-r)*6*o:o<1/2?l:o<2/3?r+(l-r)*(2/3-o)*6:r}n.Color.fromRgb=function(r){return c.fromSource(c.sourceFromRgb(r))},n.Color.sourceFromRgb=function(r){var l=r.match(c.reRGBa);if(l){var o=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),f=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),m=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(o,10),parseInt(f,10),parseInt(m,10),l[4]?parseFloat(l[4]):1]}},n.Color.fromRgba=c.fromRgb,n.Color.fromHsl=function(r){return c.fromSource(c.sourceFromHsl(r))},n.Color.sourceFromHsl=function(r){var l=r.match(c.reHSLa);if(l){var o=(parseFloat(l[1])%360+360)%360/360,f=parseFloat(l[2])/(/%$/.test(l[2])?100:1),m=parseFloat(l[3])/(/%$/.test(l[3])?100:1),a,p,v;if(f===0)a=p=v=m;else{var b=m<=.5?m*(f+1):m+f-m*f,y=m*2-b;a=h(y,b,o+1/3),p=h(y,b,o),v=h(y,b,o-1/3)}return[Math.round(a*255),Math.round(p*255),Math.round(v*255),l[4]?parseFloat(l[4]):1]}},n.Color.fromHsla=c.fromHsl,n.Color.fromHex=function(r){return c.fromSource(c.sourceFromHex(r))},n.Color.sourceFromHex=function(r){if(r.match(c.reHex)){var l=r.slice(r.indexOf("#")+1),o=l.length===3||l.length===4,f=l.length===8||l.length===4,m=o?l.charAt(0)+l.charAt(0):l.substring(0,2),a=o?l.charAt(1)+l.charAt(1):l.substring(2,4),p=o?l.charAt(2)+l.charAt(2):l.substring(4,6),v=f?o?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(m,16),parseInt(a,16),parseInt(p,16),parseFloat((parseInt(v,16)/255).toFixed(2))]}},n.Color.fromSource=function(r){var l=new c;return l.setSource(r),l}}(s),function(u){var n=u.fabric||(u.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],r={},l="left",o="top",f="right",m="bottom",a="center",p={top:m,bottom:o,left:f,right:l,center:a},v=n.util.radiansToDegrees,b=Math.sign||function(J){return(J>0)-(J<0)||+J};function y(J,N){var tt=J.angle+v(Math.atan2(N.y,N.x))+360;return Math.round(tt%360/45)}function C(J,N){var tt=N.transform.target,$=tt.canvas,K=n.util.object.clone(N);K.target=tt,$&&$.fire("object:"+J,K),tt.fire(J,N)}function S(J,N){var tt=N.canvas,$=tt.uniScaleKey,K=J[$];return tt.uniformScaling&&!K||!tt.uniformScaling&&K}function w(J){return J.originX===a&&J.originY===a}function k(J,N,tt){var $=J.lockScalingX,K=J.lockScalingY;return!!($&&K||!N&&($||K)&&tt||$&&N==="x"||K&&N==="y")}function F(J,N,tt){var $="not-allowed",K=S(J,tt),rt="";if(N.x!==0&&N.y===0?rt="x":N.x===0&&N.y!==0&&(rt="y"),k(tt,rt,K))return $;var dt=y(tt,N);return c[dt]+"-resize"}function V(J,N,tt){var $="not-allowed";if(N.x!==0&&tt.lockSkewingY||N.y!==0&&tt.lockSkewingX)return $;var K=y(tt,N)%4;return h[K]+"-resize"}function z(J,N,tt){return J[tt.canvas.altActionKey]?r.skewCursorStyleHandler(J,N,tt):r.scaleCursorStyleHandler(J,N,tt)}function Y(J,N,tt){var $=J[tt.canvas.altActionKey];if(N.x===0)return $?"skewX":"scaleY";if(N.y===0)return $?"skewY":"scaleX"}function et(J,N,tt){return tt.lockRotation?"not-allowed":N.cursorStyle}function H(J,N,tt,$){return{e:J,transform:N,pointer:{x:tt,y:$}}}function Q(J){return function(N,tt,$,K){var rt=tt.target,dt=rt.getCenterPoint(),_t=rt.translateToOriginPoint(dt,tt.originX,tt.originY),ot=J(N,tt,$,K);return rt.setPositionByOrigin(_t,tt.originX,tt.originY),ot}}function ct(J,N){return function(tt,$,K,rt){var dt=N(tt,$,K,rt);return dt&&C(J,H(tt,$,K,rt)),dt}}function G(J,N,tt,$,K){var rt=J.target,dt=rt.controls[J.corner],_t=rt.canvas.getZoom(),ot=rt.padding/_t,X=rt.toLocalPoint(new n.Point($,K),N,tt);return X.x>=ot&&(X.x-=ot),X.x<=-ot&&(X.x+=ot),X.y>=ot&&(X.y-=ot),X.y<=ot&&(X.y+=ot),X.x-=dt.offsetX,X.y-=dt.offsetY,X}function lt(J){return J.flipX!==J.flipY}function T(J,N,tt,$,K){if(J[N]!==0){var rt=J._getTransformedDimensions()[$],dt=K/rt*J[tt];J.set(tt,dt)}}function L(J,N,tt,$){var K=N.target,rt=K._getTransformedDimensions(0,K.skewY),dt=G(N,N.originX,N.originY,tt,$),_t=Math.abs(dt.x*2)-rt.x,ot=K.skewX,X;_t<2?X=0:(X=v(Math.atan2(_t/K.scaleX,rt.y/K.scaleY)),N.originX===l&&N.originY===m&&(X=-X),N.originX===f&&N.originY===o&&(X=-X),lt(K)&&(X=-X));var pt=ot!==X;if(pt){var bt=K._getTransformedDimensions().y;K.set("skewX",X),T(K,"skewY","scaleY","y",bt)}return pt}function D(J,N,tt,$){var K=N.target,rt=K._getTransformedDimensions(K.skewX,0),dt=G(N,N.originX,N.originY,tt,$),_t=Math.abs(dt.y*2)-rt.y,ot=K.skewY,X;_t<2?X=0:(X=v(Math.atan2(_t/K.scaleY,rt.x/K.scaleX)),N.originX===l&&N.originY===m&&(X=-X),N.originX===f&&N.originY===o&&(X=-X),lt(K)&&(X=-X));var pt=ot!==X;if(pt){var bt=K._getTransformedDimensions().x;K.set("skewY",X),T(K,"skewX","scaleX","x",bt)}return pt}function E(J,N,tt,$){var K=N.target,rt=K.skewX,dt,_t=N.originY;if(K.lockSkewingX)return!1;if(rt===0){var ot=G(N,a,a,tt,$);ot.x>0?dt=l:dt=f}else rt>0&&(dt=_t===o?l:f),rt<0&&(dt=_t===o?f:l),lt(K)&&(dt=dt===l?f:l);N.originX=dt;var X=ct("skewing",Q(L));return X(J,N,tt,$)}function U(J,N,tt,$){var K=N.target,rt=K.skewY,dt,_t=N.originX;if(K.lockSkewingY)return!1;if(rt===0){var ot=G(N,a,a,tt,$);ot.y>0?dt=o:dt=m}else rt>0&&(dt=_t===l?o:m),rt<0&&(dt=_t===l?m:o),lt(K)&&(dt=dt===o?m:o);N.originY=dt;var X=ct("skewing",Q(D));return X(J,N,tt,$)}function x(J,N,tt,$){var K=N,rt=K.target,dt=rt.translateToOriginPoint(rt.getCenterPoint(),K.originX,K.originY);if(rt.lockRotation)return!1;var _t=Math.atan2(K.ey-dt.y,K.ex-dt.x),ot=Math.atan2($-dt.y,tt-dt.x),X=v(ot-_t+K.theta),pt=!0;if(rt.snapAngle>0){var bt=rt.snapAngle,wt=rt.snapThreshold||bt,Dt=Math.ceil(X/bt)*bt,Ot=Math.floor(X/bt)*bt;Math.abs(X-Ot)<wt?X=Ot:Math.abs(X-Dt)<wt&&(X=Dt)}return X<0&&(X=360+X),X%=360,pt=rt.angle!==X,rt.angle=X,pt}function O(J,N,tt,$,K){K=K||{};var rt=N.target,dt=rt.lockScalingX,_t=rt.lockScalingY,ot=K.by,X,pt,bt,wt,Dt=S(J,rt),Ot=k(rt,ot,Dt),Gt,It,Zt=N.gestureScale;if(Ot)return!1;if(Zt)pt=N.scaleX*Zt,bt=N.scaleY*Zt;else{if(X=G(N,N.originX,N.originY,tt,$),Gt=ot!=="y"?b(X.x):1,It=ot!=="x"?b(X.y):1,N.signX||(N.signX=Gt),N.signY||(N.signY=It),rt.lockScalingFlip&&(N.signX!==Gt||N.signY!==It))return!1;if(wt=rt._getTransformedDimensions(),Dt&&!ot){var ae=Math.abs(X.x)+Math.abs(X.y),Jt=N.original,ge=Math.abs(wt.x*Jt.scaleX/rt.scaleX)+Math.abs(wt.y*Jt.scaleY/rt.scaleY),me=ae/ge;pt=Jt.scaleX*me,bt=Jt.scaleY*me}else pt=Math.abs(X.x*rt.scaleX/wt.x),bt=Math.abs(X.y*rt.scaleY/wt.y);w(N)&&(pt*=2,bt*=2),N.signX!==Gt&&ot!=="y"&&(N.originX=p[N.originX],pt*=-1,N.signX=Gt),N.signY!==It&&ot!=="x"&&(N.originY=p[N.originY],bt*=-1,N.signY=It)}var pe=rt.scaleX,Se=rt.scaleY;return ot?(ot==="x"&&rt.set("scaleX",pt),ot==="y"&&rt.set("scaleY",bt)):(!dt&&rt.set("scaleX",pt),!_t&&rt.set("scaleY",bt)),pe!==rt.scaleX||Se!==rt.scaleY}function I(J,N,tt,$){return O(J,N,tt,$)}function W(J,N,tt,$){return O(J,N,tt,$,{by:"x"})}function Z(J,N,tt,$){return O(J,N,tt,$,{by:"y"})}function q(J,N,tt,$){return J[N.target.canvas.altActionKey]?r.skewHandlerX(J,N,tt,$):r.scalingY(J,N,tt,$)}function nt(J,N,tt,$){return J[N.target.canvas.altActionKey]?r.skewHandlerY(J,N,tt,$):r.scalingX(J,N,tt,$)}function at(J,N,tt,$){var K=N.target,rt=G(N,N.originX,N.originY,tt,$),dt=K.strokeWidth/(K.strokeUniform?K.scaleX:1),_t=w(N)?2:1,ot=K.width,X=Math.abs(rt.x*_t/K.scaleX)-dt;return K.set("width",Math.max(X,0)),ot!==X}function ht(J,N,tt,$){var K=N.target,rt=tt-N.offsetX,dt=$-N.offsetY,_t=!K.get("lockMovementX")&&K.left!==rt,ot=!K.get("lockMovementY")&&K.top!==dt;return _t&&K.set("left",rt),ot&&K.set("top",dt),(_t||ot)&&C("moving",H(J,N,tt,$)),_t||ot}r.scaleCursorStyleHandler=F,r.skewCursorStyleHandler=V,r.scaleSkewCursorStyleHandler=z,r.rotationWithSnapping=ct("rotating",Q(x)),r.scalingEqually=ct("scaling",Q(I)),r.scalingX=ct("scaling",Q(W)),r.scalingY=ct("scaling",Q(Z)),r.scalingYOrSkewingX=q,r.scalingXOrSkewingY=nt,r.changeWidth=ct("resizing",Q(at)),r.skewHandlerX=E,r.skewHandlerY=U,r.dragHandler=ht,r.scaleOrSkewActionName=Y,r.rotationStyleHandler=et,r.fireEvent=C,r.wrapWithFixedAnchor=Q,r.wrapWithFireEvent=ct,r.getLocalPoint=G,n.controlsUtils=r}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.util.degreesToRadians,h=n.controlsUtils;function r(o,f,m,a,p){a=a||{};var v=this.sizeX||a.cornerSize||p.cornerSize,b=this.sizeY||a.cornerSize||p.cornerSize,y=typeof a.transparentCorners<"u"?a.transparentCorners:p.transparentCorners,C=y?"stroke":"fill",S=!y&&(a.cornerStrokeColor||p.cornerStrokeColor),w=f,k=m,F;o.save(),o.fillStyle=a.cornerColor||p.cornerColor,o.strokeStyle=a.cornerStrokeColor||p.cornerStrokeColor,v>b?(F=v,o.scale(1,b/v),k=m*v/b):b>v?(F=b,o.scale(v/b,1),w=f*b/v):F=v,o.lineWidth=1,o.beginPath(),o.arc(w,k,F/2,0,2*Math.PI,!1),o[C](),S&&o.stroke(),o.restore()}function l(o,f,m,a,p){a=a||{};var v=this.sizeX||a.cornerSize||p.cornerSize,b=this.sizeY||a.cornerSize||p.cornerSize,y=typeof a.transparentCorners<"u"?a.transparentCorners:p.transparentCorners,C=y?"stroke":"fill",S=!y&&(a.cornerStrokeColor||p.cornerStrokeColor),w=v/2,k=b/2;o.save(),o.fillStyle=a.cornerColor||p.cornerColor,o.strokeStyle=a.cornerStrokeColor||p.cornerStrokeColor,o.lineWidth=1,o.translate(f,m),o.rotate(c(p.angle)),o[C+"Rect"](-w,-k,v,b),S&&o.strokeRect(-w,-k,v,b),o.restore()}h.renderCircleControl=r,h.renderSquareControl=l}(s),function(u){var n=u.fabric||(u.fabric={});function c(h){for(var r in h)this[r]=h[r]}n.Control=c,n.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,r){return r.cursorStyle},getActionName:function(h,r){return r.actionName},getVisibility:function(h,r){var l=h._controlsVisibility;return l&&typeof l[r]<"u"?l[r]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,r){var l=n.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},r);return l},calcCornerCoords:function(h,r,l,o,f){var m,a,p,v,b=f?this.touchSizeX:this.sizeX,y=f?this.touchSizeY:this.sizeY;if(b&&y&&b!==y){var C=Math.atan2(y,b),S=Math.sqrt(b*b+y*y)/2,w=C-n.util.degreesToRadians(h),k=Math.PI/2-C-n.util.degreesToRadians(h);m=S*n.util.cos(w),a=S*n.util.sin(w),p=S*n.util.cos(k),v=S*n.util.sin(k)}else{var F=b&&y?b:r;S=F*.7071067812;var w=n.util.degreesToRadians(45-h);m=p=S*n.util.cos(w),a=v=S*n.util.sin(w)}return{tl:{x:l-v,y:o-p},tr:{x:l+m,y:o-a},bl:{x:l-m,y:o+a},br:{x:l+v,y:o+p}}},render:function(h,r,l,o,f){switch(o=o||{},o.cornerStyle||f.cornerStyle){case"circle":n.controlsUtils.renderCircleControl.call(this,h,r,l,o,f);break;default:n.controlsUtils.renderSquareControl.call(this,h,r,l,o,f)}}}}(s),function(){function u(l,o){var f=l.getAttribute("style"),m=l.getAttribute("offset")||0,a,p,v,b;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,f){var y=f.split(/\s*;\s*/);for(y[y.length-1]===""&&y.pop(),b=y.length;b--;){var C=y[b].split(/\s*:\s*/),S=C[0].trim(),w=C[1].trim();S==="stop-color"?a=w:S==="stop-opacity"&&(v=w)}}return a||(a=l.getAttribute("stop-color")||"rgb(0,0,0)"),v||(v=l.getAttribute("stop-opacity")),a=new t.Color(a),p=a.getAlpha(),v=isNaN(parseFloat(v))?1:parseFloat(v),v*=p*o,{offset:m,color:a.toRgb(),opacity:v}}function n(l){return{x1:l.getAttribute("x1")||0,y1:l.getAttribute("y1")||0,x2:l.getAttribute("x2")||"100%",y2:l.getAttribute("y2")||0}}function c(l){return{x1:l.getAttribute("fx")||l.getAttribute("cx")||"50%",y1:l.getAttribute("fy")||l.getAttribute("cy")||"50%",r1:0,x2:l.getAttribute("cx")||"50%",y2:l.getAttribute("cy")||"50%",r2:l.getAttribute("r")||"50%"}}var h=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var o,f=this;Object.keys(l).forEach(function(m){f[m]=l[m]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,o={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(o.r1=l.coords.r1||0,o.r2=l.coords.r2||0),this.coords=o,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var o in l){var f=new t.Color(l[o]);this.colorStops.push({offset:parseFloat(o),color:f.toRgb(),opacity:f.getAlpha()})}return this},toObject:function(l){var o={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,o,l),o},toSVG:function(l,p){var f=h(this.coords,!0),m,a,p=p||{},v,b,y=h(this.colorStops,!0),C=f.r1>f.r2,S=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),w=-this.offsetX,k=-this.offsetY,F=!!p.additionalTransform,V=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(y.sort(function(Q,ct){return Q.offset-ct.offset}),V==="objectBoundingBox"?(w/=l.width,k/=l.height):(w+=l.width/2,k+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(w-=l.pathOffset.x,k-=l.pathOffset.y),S[4]-=w,S[5]-=k,b='id="SVGID_'+this.id+'" gradientUnits="'+V+'"',b+=' gradientTransform="'+(F?p.additionalTransform+" ":"")+t.util.matrixToSVG(S)+'" ',this.type==="linear"?v=["<linearGradient ",b,' x1="',f.x1,'" y1="',f.y1,'" x2="',f.x2,'" y2="',f.y2,`">
`]:this.type==="radial"&&(v=["<radialGradient ",b,' cx="',C?f.x1:f.x2,'" cy="',C?f.y1:f.y2,'" r="',C?f.r1:f.r2,'" fx="',C?f.x2:f.x1,'" fy="',C?f.y2:f.y1,`">
`]),this.type==="radial"){if(C)for(y=y.concat(),y.reverse(),m=0,a=y.length;m<a;m++)y[m].offset=1-y[m].offset;var z=Math.min(f.r1,f.r2);if(z>0){var Y=Math.max(f.r1,f.r2),et=z/Y;for(m=0,a=y.length;m<a;m++)y[m].offset+=et*(1-y[m].offset)}}for(m=0,a=y.length;m<a;m++){var H=y[m];v.push("<stop ",'offset="',H.offset*100+"%",'" style="stop-color:',H.color,typeof H.opacity<"u"?";stop-opacity: "+H.opacity:";",`"/>
`)}return v.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),v.join("")},toLive:function(l){var o,f=t.util.object.clone(this.coords),m,a;if(this.type){for(this.type==="linear"?o=l.createLinearGradient(f.x1,f.y1,f.x2,f.y2):this.type==="radial"&&(o=l.createRadialGradient(f.x1,f.y1,f.r1,f.x2,f.y2,f.r2)),m=0,a=this.colorStops.length;m<a;m++){var p=this.colorStops[m].color,v=this.colorStops[m].opacity,b=this.colorStops[m].offset;typeof v<"u"&&(p=new t.Color(p).setAlpha(v).toRgba()),o.addColorStop(b,p)}return o}}}),t.util.object.extend(t.Gradient,{fromElement:function(l,o,f,m){var a=parseFloat(f)/(/%$/.test(f)?100:1);a=a<0?0:a>1?1:a,isNaN(a)&&(a=1);var p=l.getElementsByTagName("stop"),v,b=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",y=l.getAttribute("gradientTransform")||"",C=[],S,w,k=0,F=0,V;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(v="linear",S=n(l)):(v="radial",S=c(l)),w=p.length;w--;)C.push(u(p[w],a));V=t.parseTransformAttribute(y),r(o,S,m,b),b==="pixels"&&(k=-o.left,F=-o.top);var z=new t.Gradient({id:l.getAttribute("id"),type:v,coords:S,colorStops:C,gradientUnits:b,gradientTransform:V,offsetX:k,offsetY:F});return z}});function r(l,o,f,m){var a,p;Object.keys(o).forEach(function(v){a=o[v],a==="Infinity"?p=1:a==="-Infinity"?p=0:(p=parseFloat(o[v],10),typeof a=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(a)&&(p*=.01,m==="pixels"&&((v==="x1"||v==="x2"||v==="r2")&&(p*=f.viewBoxWidth||f.width),(v==="y1"||v==="y2")&&(p*=f.viewBoxHeight||f.height)))),o[v]=p})}}(),function(){var u=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(n,c){if(n||(n={}),this.id=t.Object.__uid++,this.setOptions(n),!n.source||n.source&&typeof n.source!="string"){c&&c(this);return}else{var h=this;this.source=t.util.createImage(),t.util.loadImage(n.source,function(r,l){h.source=r,c&&c(h,l)},null,this.crossOrigin)}},toObject:function(n){var c=t.Object.NUM_FRACTION_DIGITS,h,r;return typeof this.source.src=="string"?h=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(h=this.source.toDataURL()),r={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:u(this.offsetX,c),offsetY:u(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,r,n),r},toSVG:function(n){var c=typeof this.source=="function"?this.source():this.source,h=c.width/n.width,r=c.height/n.height,l=this.offsetX/n.width,o=this.offsetY/n.height,f="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(r=1,o&&(r+=Math.abs(o))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(h=1,l&&(h+=Math.abs(l))),c.src?f=c.src:c.toDataURL&&(f=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+l+'" y="'+o+'" width="'+h+'" height="'+r+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+f+`"></image>
</pattern>
`},setOptions:function(n){for(var c in n)this[c]=n[c]},toLive:function(n){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":n.createPattern(c,this.repeat)}})}(),function(u){var n=u.fabric||(u.fabric={}),c=n.util.toFixed;if(n.Shadow){n.warn("fabric.Shadow is already defined.");return}n.Shadow=n.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){typeof h=="string"&&(h=this._parseShadow(h));for(var r in h)this[r]=h[r];this.id=n.Object.__uid++},_parseShadow:function(h){var r=h.trim(),l=n.Shadow.reOffsetsAndBlur.exec(r)||[],o=r.replace(n.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:o.trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var r=40,l=40,o=n.Object.NUM_FRACTION_DIGITS,f=n.util.rotateVector({x:this.offsetX,y:this.offsetY},n.util.degreesToRadians(-h.angle)),m=20,a=new n.Color(this.color);return h.width&&h.height&&(r=c((Math.abs(f.x)+this.blur)/h.width,o)*100+m,l=c((Math.abs(f.y)+this.blur)/h.height,o)*100+m),h.flipX&&(f.x*=-1),h.flipY&&(f.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+r+'%" width="'+(100+2*r)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,o)+`"></feGaussianBlur>
	<feOffset dx="`+c(f.x,o)+'" dy="'+c(f.y,o)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+a.toRgb()+'" flood-opacity="'+a.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},r=n.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==r[l]&&(h[l]=this[l])},this),h}}),n.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(s),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var u=t.util.object.extend,n=t.util.getElementOffset,c=t.util.removeFromArray,h=t.util.toFixed,r=t.util.transformPoint,l=t.util.invertTransform,o=t.util.getNodeCanvas,f=t.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(a,p){p||(p={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,p)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(a,p){var v=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(a),this._initOptions(p),this.interactive||this._initRetinaScaling(),p.overlayImage&&this.setOverlayImage(p.overlayImage,v),p.backgroundImage&&this.setBackgroundImage(p.backgroundImage,v),p.backgroundColor&&this.setBackgroundColor(p.backgroundColor,v),p.overlayColor&&this.setOverlayColor(p.overlayColor,v),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var a=t.devicePixelRatio;this.__initRetinaScaling(a,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(a,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(a,p,v){p.setAttribute("width",this.width*a),p.setAttribute("height",this.height*a),v.scale(a,a)},calcOffset:function(){return this._offset=n(this.lowerCanvasEl),this},setOverlayImage:function(a,p,v){return this.__setBgOverlayImage("overlayImage",a,p,v)},setBackgroundImage:function(a,p,v){return this.__setBgOverlayImage("backgroundImage",a,p,v)},setOverlayColor:function(a,p){return this.__setBgOverlayColor("overlayColor",a,p)},setBackgroundColor:function(a,p){return this.__setBgOverlayColor("backgroundColor",a,p)},__setBgOverlayImage:function(a,p,v,b){return typeof p=="string"?t.util.loadImage(p,function(y,C){if(y){var S=new t.Image(y,b);this[a]=S,S.canvas=this}v&&v(y,C)},this,b&&b.crossOrigin):(b&&p.setOptions(b),this[a]=p,p&&(p.canvas=this),v&&v(p,!1)),this},__setBgOverlayColor:function(a,p,v){return this[a]=p,this._initGradient(p,a),this._initPattern(p,a,v),this},_createCanvasElement:function(){var a=f();if(!a||(a.style||(a.style={}),typeof a.getContext>"u"))throw m;return a},_initOptions:function(a){var p=this.lowerCanvasEl;this._setOptions(a),this.width=this.width||parseInt(p.width,10)||0,this.height=this.height||parseInt(p.height,10)||0,this.lowerCanvasEl.style&&(p.width=this.width,p.height=this.height,p.style.width=this.width+"px",p.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(a){a&&a.getContext?this.lowerCanvasEl=a:this.lowerCanvasEl=t.util.getById(a)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(a,p){return this.setDimensions({width:a},p)},setHeight:function(a,p){return this.setDimensions({height:a},p)},setDimensions:function(a,p){var v;p=p||{};for(var b in a)v=a[b],p.cssOnly||(this._setBackstoreDimension(b,a[b]),v+="px",this.hasLostContext=!0),p.backstoreOnly||this._setCssDimension(b,v);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),p.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(a,p){return this.lowerCanvasEl[a]=p,this.upperCanvasEl&&(this.upperCanvasEl[a]=p),this.cacheCanvasEl&&(this.cacheCanvasEl[a]=p),this[a]=p,this},_setCssDimension:function(a,p){return this.lowerCanvasEl.style[a]=p,this.upperCanvasEl&&(this.upperCanvasEl.style[a]=p),this.wrapperEl&&(this.wrapperEl.style[a]=p),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(a){var p=this._activeObject,v=this.backgroundImage,b=this.overlayImage,y,C,S;for(this.viewportTransform=a,C=0,S=this._objects.length;C<S;C++)y=this._objects[C],y.group||y.setCoords(!0);return p&&p.setCoords(),v&&v.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(a,p){var v=a,b=this.viewportTransform.slice(0);a=r(a,l(this.viewportTransform)),b[0]=p,b[3]=p;var y=r(a,b);return b[4]+=v.x-y.x,b[5]+=v.y-y.y,this.setViewportTransform(b)},setZoom:function(a){return this.zoomToPoint(new t.Point(0,0),a),this},absolutePan:function(a){var p=this.viewportTransform.slice(0);return p[4]=-a.x,p[5]=-a.y,this.setViewportTransform(p)},relativePan:function(a){return this.absolutePan(new t.Point(-a.x-this.viewportTransform[4],-a.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(a){this.stateful&&a.setupState(),a._set("canvas",this),a.setCoords(),this.fire("object:added",{target:a}),a.fire("added")},_onObjectRemoved:function(a){this.fire("object:removed",{target:a}),a.fire("removed"),delete a.canvas},clearContext:function(a){return a.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var a=this.contextContainer;return this.renderCanvas(a,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var a={},p=this.width,v=this.height,b=l(this.viewportTransform);return a.tl=r({x:0,y:0},b),a.br=r({x:p,y:v},b),a.tr=new t.Point(a.br.x,a.tl.y),a.bl=new t.Point(a.tl.x,a.br.y),this.vptCoords=a,a},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(a,p){var v=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(a),t.util.setImageSmoothing(a,this.imageSmoothingEnabled),this.fire("before:render",{ctx:a}),this._renderBackground(a),a.save(),a.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._renderObjects(a,p),a.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(a),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(a)),this._renderOverlay(a),this.controlsAboveOverlay&&this.interactive&&this.drawControls(a),this.fire("after:render",{ctx:a})},drawClipPathOnCanvas:function(a){var p=this.viewportTransform,v=this.clipPath;a.save(),a.transform(p[0],p[1],p[2],p[3],p[4],p[5]),a.globalCompositeOperation="destination-in",v.transform(a),a.scale(1/v.zoomX,1/v.zoomY),a.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),a.restore()},_renderObjects:function(a,p){var v,b;for(v=0,b=p.length;v<b;++v)p[v]&&p[v].render(a)},_renderBackgroundOrOverlay:function(a,p){var v=this[p+"Color"],b=this[p+"Image"],y=this.viewportTransform,C=this[p+"Vpt"];if(!(!v&&!b)){if(v){a.save(),a.beginPath(),a.moveTo(0,0),a.lineTo(this.width,0),a.lineTo(this.width,this.height),a.lineTo(0,this.height),a.closePath(),a.fillStyle=v.toLive?v.toLive(a,this):v,C&&a.transform(y[0],y[1],y[2],y[3],y[4],y[5]),a.transform(1,0,0,1,v.offsetX||0,v.offsetY||0);var S=v.gradientTransform||v.patternTransform;S&&a.transform(S[0],S[1],S[2],S[3],S[4],S[5]),a.fill(),a.restore()}b&&(a.save(),C&&a.transform(y[0],y[1],y[2],y[3],y[4],y[5]),b.render(a),a.restore())}},_renderBackground:function(a){this._renderBackgroundOrOverlay(a,"background")},_renderOverlay:function(a){this._renderBackgroundOrOverlay(a,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(a){return this._centerObject(a,new t.Point(this.getCenterPoint().x,a.getCenterPoint().y))},centerObjectV:function(a){return this._centerObject(a,new t.Point(a.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(a){var p=this.getCenterPoint();return this._centerObject(a,p)},viewportCenterObject:function(a){var p=this.getVpCenter();return this._centerObject(a,p)},viewportCenterObjectH:function(a){var p=this.getVpCenter();return this._centerObject(a,new t.Point(p.x,a.getCenterPoint().y)),this},viewportCenterObjectV:function(a){var p=this.getVpCenter();return this._centerObject(a,new t.Point(a.getCenterPoint().x,p.y))},getVpCenter:function(){var a=this.getCenterPoint(),p=l(this.viewportTransform);return r(a,p)},_centerObject:function(a,p){return a.setPositionByOrigin(p,"center","center"),a.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(a){return this.toDatalessObject(a)},toObject:function(a){return this._toObjectMethod("toObject",a)},toDatalessObject:function(a){return this._toObjectMethod("toDatalessObject",a)},_toObjectMethod:function(a,p){var v=this.clipPath,b={version:t.version,objects:this._toObjects(a,p)};return v&&!v.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,a,p)),u(b,this.__serializeBgOverlay(a,p)),t.util.populateWithProperties(this,b,p),b},_toObjects:function(a,p){return this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){return this._toObject(v,a,p)},this)},_toObject:function(a,p,v){var b;this.includeDefaultValues||(b=a.includeDefaultValues,a.includeDefaultValues=!1);var y=a[p](v);return this.includeDefaultValues||(a.includeDefaultValues=b),y},__serializeBgOverlay:function(a,p){var v={},b=this.backgroundImage,y=this.overlayImage,C=this.backgroundColor,S=this.overlayColor;return C&&C.toObject?C.excludeFromExport||(v.background=C.toObject(p)):C&&(v.background=C),S&&S.toObject?S.excludeFromExport||(v.overlay=S.toObject(p)):S&&(v.overlay=S),b&&!b.excludeFromExport&&(v.backgroundImage=this._toObject(b,a,p)),y&&!y.excludeFromExport&&(v.overlayImage=this._toObject(y,a,p)),v},svgViewportTransformation:!0,toSVG:function(a,p){a||(a={}),a.reviver=p;var v=[];return this._setSVGPreamble(v,a),this._setSVGHeader(v,a),this.clipPath&&v.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(v,"background"),this._setSVGBgOverlayImage(v,"backgroundImage",p),this._setSVGObjects(v,p),this.clipPath&&v.push(`</g>
`),this._setSVGBgOverlayColor(v,"overlay"),this._setSVGBgOverlayImage(v,"overlayImage",p),v.push("</svg>"),v.join("")},_setSVGPreamble:function(a,p){p.suppressPreamble||a.push('<?xml version="1.0" encoding="',p.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(a,p){var v=p.width||this.width,b=p.height||this.height,y,C='viewBox="0 0 '+this.width+" "+this.height+'" ',S=t.Object.NUM_FRACTION_DIGITS;p.viewBox?C='viewBox="'+p.viewBox.x+" "+p.viewBox.y+" "+p.viewBox.width+" "+p.viewBox.height+'" ':this.svgViewportTransformation&&(y=this.viewportTransform,C='viewBox="'+h(-y[4]/y[0],S)+" "+h(-y[5]/y[3],S)+" "+h(this.width/y[0],S)+" "+h(this.height/y[3],S)+'" '),a.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',v,'" ','height="',b,'" ',C,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(p),`</defs>
`)},createSVGClipPathMarkup:function(a){var p=this.clipPath;return p?(p.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+p.clipPathId+`" >
`+this.clipPath.toClipPathSVG(a.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var a=this,p=["background","overlay"].map(function(v){var b=a[v+"Color"];if(b&&b.toLive){var y=a[v+"Vpt"],C=a.viewportTransform,S={width:a.width/(y?C[0]:1),height:a.height/(y?C[3]:1)};return b.toSVG(S,{additionalTransform:y?t.util.matrixToSVG(C):""})}});return p.join("")},createSVGFontFacesMarkup:function(){var a="",p={},v,b,y,C,S,w,k,F,V,z=t.fontPaths,Y=[];for(this._objects.forEach(function H(Q){Y.push(Q),Q._objects&&Q._objects.forEach(H)}),F=0,V=Y.length;F<V;F++)if(v=Y[F],b=v.fontFamily,!(v.type.indexOf("text")===-1||p[b]||!z[b])&&(p[b]=!0,!!v.styles)){y=v.styles;for(S in y){C=y[S];for(k in C)w=C[k],b=w.fontFamily,!p[b]&&z[b]&&(p[b]=!0)}}for(var et in p)a+=[`		@font-face {
`,"			font-family: '",et,`';
`,"			src: url('",z[et],`');
`,`		}
`].join("");return a&&(a=['	<style type="text/css">',`<![CDATA[
`,a,"]]>",`</style>
`].join("")),a},_setSVGObjects:function(a,p){var v,b,y,C=this._objects;for(b=0,y=C.length;b<y;b++)v=C[b],!v.excludeFromExport&&this._setSVGObject(a,v,p)},_setSVGObject:function(a,p,v){a.push(p.toSVG(v))},_setSVGBgOverlayImage:function(a,p,v){this[p]&&!this[p].excludeFromExport&&this[p].toSVG&&a.push(this[p].toSVG(v))},_setSVGBgOverlayColor:function(a,p){var v=this[p+"Color"],b=this.viewportTransform,y=this.width,C=this.height;if(v)if(v.toLive){var S=v.repeat,w=t.util.invertTransform(b),k=this[p+"Vpt"],F=k?t.util.matrixToSVG(w):"";a.push('<rect transform="'+F+" translate(",y/2,",",C/2,')"',' x="',v.offsetX-y/2,'" y="',v.offsetY-C/2,'" ','width="',S==="repeat-y"||S==="no-repeat"?v.source.width:y,'" height="',S==="repeat-x"||S==="no-repeat"?v.source.height:C,'" fill="url(#SVGID_'+v.id+')"',`></rect>
`)}else a.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',v,'"',`></rect>
`)},sendToBack:function(a){if(!a)return this;var p=this._activeObject,v,b,y;if(a===p&&a.type==="activeSelection")for(y=p._objects,v=y.length;v--;)b=y[v],c(this._objects,b),this._objects.unshift(b);else c(this._objects,a),this._objects.unshift(a);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(a){if(!a)return this;var p=this._activeObject,v,b,y;if(a===p&&a.type==="activeSelection")for(y=p._objects,v=0;v<y.length;v++)b=y[v],c(this._objects,b),this._objects.push(b);else c(this._objects,a),this._objects.push(a);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(a,p){if(!a)return this;var v=this._activeObject,b,y,C,S,w,k=0;if(a===v&&a.type==="activeSelection")for(w=v._objects,b=0;b<w.length;b++)y=w[b],C=this._objects.indexOf(y),C>0+k&&(S=C-1,c(this._objects,y),this._objects.splice(S,0,y)),k++;else C=this._objects.indexOf(a),C!==0&&(S=this._findNewLowerIndex(a,C,p),c(this._objects,a),this._objects.splice(S,0,a));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(a,p,v){var b,y;if(v)for(b=p,y=p-1;y>=0;--y){var C=a.intersectsWithObject(this._objects[y])||a.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(a);if(C){b=y;break}}else b=p-1;return b},bringForward:function(a,p){if(!a)return this;var v=this._activeObject,b,y,C,S,w,k=0;if(a===v&&a.type==="activeSelection")for(w=v._objects,b=w.length;b--;)y=w[b],C=this._objects.indexOf(y),C<this._objects.length-1-k&&(S=C+1,c(this._objects,y),this._objects.splice(S,0,y)),k++;else C=this._objects.indexOf(a),C!==this._objects.length-1&&(S=this._findNewUpperIndex(a,C,p),c(this._objects,a),this._objects.splice(S,0,a));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(a,p,v){var b,y,C;if(v)for(b=p,y=p+1,C=this._objects.length;y<C;++y){var S=a.intersectsWithObject(this._objects[y])||a.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(a);if(S){b=y;break}}else b=p+1;return b},moveTo:function(a,p){return c(this._objects,a),this._objects.splice(p,0,a),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),u(t.StaticCanvas.prototype,t.Observable),u(t.StaticCanvas.prototype,t.Collection),u(t.StaticCanvas.prototype,t.DataURLExporter),u(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(a){var p=f();if(!p||!p.getContext)return null;var v=p.getContext("2d");if(!v)return null;switch(a){case"setLineDash":return typeof v.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var a=o(this.lowerCanvasEl);return a&&a.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(a){var p=o(this.lowerCanvasEl);return p&&p.createJPEGStream(a)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(u){u.strokeStyle=this.color,u.lineWidth=this.width,u.lineCap=this.strokeLineCap,u.miterLimit=this.strokeMiterLimit,u.lineJoin=this.strokeLineJoin,u.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(u){var n=this.canvas.viewportTransform;u.save(),u.transform(n[0],n[1],n[2],n[3],n[4],n[5])},_setShadow:function(){if(this.shadow){var u=this.canvas,n=this.shadow,c=u.contextTop,h=u.getZoom();u&&u._isRetinaScaling()&&(h*=t.devicePixelRatio),c.shadowColor=n.color,c.shadowBlur=n.blur*h,c.shadowOffsetX=n.offsetX*h,c.shadowOffsetY=n.offsetY*h}},needsFullRender:function(){var u=new t.Color(this.color);return u.getAlpha()<1||!!this.shadow},_resetShadow:function(){var u=this.canvas.contextTop;u.shadowColor="",u.shadowBlur=u.shadowOffsetX=u.shadowOffsetY=0},_isOutSideCanvas:function(u){return u.x<0||u.x>this.canvas.getWidth()||u.y<0||u.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(u){this.canvas=u,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(u,n,c){var h=n.midPointFrom(c);return u.quadraticCurveTo(n.x,n.y,h.x,h.y),h},onMouseDown:function(u,n){this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],this._prepareForDrawing(u),this._captureDrawingPath(u),this._render())},onMouseMove:function(u,n){if(this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(u))&&this._captureDrawingPath(u)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,h=c.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,c[h-2],c[h-1],!0),r.stroke(),r.restore()}},onMouseUp:function(u){return this.canvas._isMainEvent(u.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(u){var n=new t.Point(u.x,u.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(u){return this._points.length>1&&u.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(u),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(u){var n=new t.Point(u.x,u.y);return this._addPoint(n)},_render:function(u){var n,c,h=this._points[0],r=this._points[1];if(u=u||this.canvas.contextTop,this._saveAndTransform(u),u.beginPath(),this._points.length===2&&h.x===r.x&&h.y===r.y){var l=this.width/1e3;h=new t.Point(h.x,h.y),r=new t.Point(r.x,r.y),h.x-=l,r.x+=l}for(u.moveTo(h.x,h.y),n=1,c=this._points.length;n<c;n++)this._drawSegment(u,h,r),h=this._points[n],r=this._points[n+1];u.lineTo(h.x,h.y),u.stroke(),u.restore()},convertPointsToSVGPath:function(u){var n=this.width/1e3;return t.util.getSmoothPathFromPoints(u,n)},_isEmptySVGPath:function(u){var n=t.util.joinPath(u);return n==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(u){var n=new t.Path(u,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,n.shadow=new t.Shadow(this.shadow)),n},decimatePoints:function(u,n){if(u.length<=2)return u;var c=this.canvas.getZoom(),h=Math.pow(n/c,2),r,l=u.length-1,o=u[0],f=[o],m;for(r=1;r<l-1;r++)m=Math.pow(o.x-u[r].x,2)+Math.pow(o.y-u[r].y,2),m>=h&&(o=u[r],f.push(o));return f.push(u[l]),f},_finalizeAndAddPath:function(){var u=this.canvas.contextTop;u.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var n=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(n)){this.canvas.requestRenderAll();return}var c=this.createPath(n);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(u){this.canvas=u,this.points=[]},drawDot:function(u){var n=this.addPoint(u),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,n),c.restore()},dot:function(u,n){u.fillStyle=n.fill,u.beginPath(),u.arc(n.x,n.y,n.radius,0,Math.PI*2,!1),u.closePath(),u.fill()},onMouseDown:function(u){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(u)},_render:function(){var u=this.canvas.contextTop,n,c,h=this.points;for(this._saveAndTransform(u),n=0,c=h.length;n<c;n++)this.dot(u,h[n]);u.restore()},onMouseMove:function(u){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(u)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(u),this._render()):this.drawDot(u))},onMouseUp:function(){var u=this.canvas.renderOnAddRemove,n,c;this.canvas.renderOnAddRemove=!1;var h=[];for(n=0,c=this.points.length;n<c;n++){var r=this.points[n],l=new t.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(l.shadow=new t.Shadow(this.shadow)),h.push(l)}var o=new t.Group(h);o.canvas=this.canvas,this.canvas.fire("before:path:created",{path:o}),this.canvas.add(o),this.canvas.fire("path:created",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=u,this.canvas.requestRenderAll()},addPoint:function(u){var n=new t.Point(u.x,u.y),c=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return n.radius=c,n.fill=h,this.points.push(n),n}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(u){this.canvas=u,this.sprayChunks=[]},onMouseDown:function(u){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(u),this.render(this.sprayChunkPoints)},onMouseMove:function(u){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(u)||(this.addSprayChunk(u),this.render(this.sprayChunkPoints))},onMouseUp:function(){var u=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var n=[],c=0,h=this.sprayChunks.length;c<h;c++)for(var r=this.sprayChunks[c],l=0,o=r.length;l<o;l++){var f=new t.Rect({width:r[l].width,height:r[l].width,left:r[l].x+1,top:r[l].y+1,originX:"center",originY:"center",fill:this.color});n.push(f)}this.optimizeOverlapping&&(n=this._getOptimizedRects(n));var m=new t.Group(n);this.shadow&&m.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=u,this.canvas.requestRenderAll()},_getOptimizedRects:function(u){var n={},c,h,r;for(h=0,r=u.length;h<r;h++)c=u[h].left+""+u[h].top,n[c]||(n[c]=u[h]);var l=[];for(c in n)l.push(n[c]);return l},render:function(u){var n=this.canvas.contextTop,c,h;for(n.fillStyle=this.color,this._saveAndTransform(n),c=0,h=u.length;c<h;c++){var r=u[c];typeof r.opacity<"u"&&(n.globalAlpha=r.opacity),n.fillRect(r.x,r.y,r.width,r.width)}n.restore()},_render:function(){var u=this.canvas.contextTop,n,c;for(u.fillStyle=this.color,this._saveAndTransform(u),n=0,c=this.sprayChunks.length;n<c;n++)this.render(this.sprayChunks[n]);u.restore()},addSprayChunk:function(u){this.sprayChunkPoints=[];var n,c,h,r=this.width/2,l;for(l=0;l<this.density;l++){n=t.util.getRandomInt(u.x-r,u.x+r),c=t.util.getRandomInt(u.y-r,u.y+r),this.dotWidthVariance?h=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):h=this.dotWidth;var o=new t.Point(n,c);o.width=h,this.randomOpacity&&(o.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(o)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var u=20,n=5,c=t.util.createCanvasElement(),h=c.getContext("2d");return c.width=c.height=u+n,h.fillStyle=this.color,h.beginPath(),h.arc(u/2,u/2,u/2,0,Math.PI*2,!1),h.closePath(),h.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(u){return u.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(u){this.callSuper("_setBrushStyles",u),u.strokeStyle=this.getPattern(u)},createPath:function(u){var n=this.callSuper("createPath",u),c=n._getLeftTopCoords().scalarAdd(n.strokeWidth/2);return n.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),n}}),function(){var u=t.util.getPointer,n=t.util.degreesToRadians,c=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(r,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(r,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var r=this.getActiveObjects(),l,o,f;if(r.length>0&&!this.preserveObjectStacking){o=[],f=[];for(var m=0,a=this._objects.length;m<a;m++)l=this._objects[m],r.indexOf(l)===-1?o.push(l):f.push(l);r.length>1&&(this._activeObject._objects=f),o.push.apply(o,f)}else o=this._objects;return o},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var r=this.contextContainer;return this.renderCanvas(r,this._chooseObjectsToRender()),this},renderTopLayer:function(r){r.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(r),this.contextTopDirty=!0),r.restore()},renderTop:function(){var r=this.contextTop;return this.clearContext(r),this.renderTopLayer(r),this.fire("after:render"),this},_normalizePointer:function(r,l){var o=r.calcTransformMatrix(),f=t.util.invertTransform(o),m=this.restorePointerVpt(l);return t.util.transformPoint(m,f)},isTargetTransparent:function(r,l,o){if(r.shouldCache()&&r._cacheCanvas&&r!==this._activeObject){var f=this._normalizePointer(r,{x:l,y:o}),m=Math.max(r.cacheTranslationX+f.x*r.zoomX,0),a=Math.max(r.cacheTranslationY+f.y*r.zoomY,0),y=t.util.isTransparent(r._cacheContext,Math.round(m),Math.round(a),this.targetFindTolerance);return y}var p=this.contextCache,v=r.selectionBackgroundColor,b=this.viewportTransform;r.selectionBackgroundColor="",this.clearContext(p),p.save(),p.transform(b[0],b[1],b[2],b[3],b[4],b[5]),r.render(p),p.restore(),r.selectionBackgroundColor=v;var y=t.util.isTransparent(p,l,o,this.targetFindTolerance);return y},_isSelectionKeyPressed:function(r){var l=!1;return Array.isArray(this.selectionKey)?l=!!this.selectionKey.find(function(o){return r[o]===!0}):l=r[this.selectionKey],l},_shouldClearSelection:function(r,l){var o=this.getActiveObjects(),f=this._activeObject;return!l||l&&f&&o.length>1&&o.indexOf(l)===-1&&f!==l&&!this._isSelectionKeyPressed(r)||l&&!l.evented||l&&!l.selectable&&f&&f!==l},_shouldCenterTransform:function(r,l,o){if(r){var f;return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?f=this.centeredScaling||r.centeredScaling:l==="rotate"&&(f=this.centeredRotation||r.centeredRotation),f?!o:o}},_getOriginFromCorner:function(r,l){var o={x:r.originX,y:r.originY};return l==="ml"||l==="tl"||l==="bl"?o.x="right":(l==="mr"||l==="tr"||l==="br")&&(o.x="left"),l==="tl"||l==="mt"||l==="tr"?o.y="bottom":(l==="bl"||l==="mb"||l==="br")&&(o.y="top"),o},_getActionFromCorner:function(r,l,o,f){if(!l||!r)return"drag";var m=f.controls[l];return m.getActionName(o,m,f)},_setupCurrentTransform:function(r,l,o){if(l){var f=this.getPointer(r),m=l.__corner,a=l.controls[m],p=o&&m?a.getActionHandler(r,l,a):t.controlsUtils.dragHandler,v=this._getActionFromCorner(o,m,r,l),b=this._getOriginFromCorner(l,m),y=r[this.centeredKey],C={target:l,action:v,actionHandler:p,corner:m,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:f.x-l.left,offsetY:f.y-l.top,originX:b.x,originY:b.y,ex:f.x,ey:f.y,lastX:f.x,lastY:f.y,theta:n(l.angle),width:l.width*l.scaleX,shiftKey:r.shiftKey,altKey:y,original:t.util.saveObjectTransform(l)};this._shouldCenterTransform(l,v,y)&&(C.originX="center",C.originY="center"),C.original.originX=b.x,C.original.originY=b.y,this._currentTransform=C,this._beforeTransform(r)}},setCursor:function(r){this.upperCanvasEl.style.cursor=r},_drawSelection:function(r){var l=this._groupSelector,o=new t.Point(l.ex,l.ey),f=t.util.transformPoint(o,this.viewportTransform),m=new t.Point(l.ex+l.left,l.ey+l.top),a=t.util.transformPoint(m,this.viewportTransform),p=Math.min(f.x,a.x),v=Math.min(f.y,a.y),b=Math.max(f.x,a.x),y=Math.max(f.y,a.y),C=this.selectionLineWidth/2;this.selectionColor&&(r.fillStyle=this.selectionColor,r.fillRect(p,v,b-p,y-v)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(r.lineWidth=this.selectionLineWidth,r.strokeStyle=this.selectionBorderColor,p+=C,v+=C,b-=C,y-=C,t.Object.prototype._setLineDash.call(this,r,this.selectionDashArray),r.strokeRect(p,v,b-p,y-v))},findTarget:function(r,l){if(!this.skipTargetFind){var o=!0,f=this.getPointer(r,o),m=this._activeObject,a=this.getActiveObjects(),p,v,b=c(r),y=a.length>1&&!l||a.length===1;if(this.targets=[],y&&m._findTargetCorner(f,b)||a.length>1&&!l&&m===this._searchPossibleTargets([m],f))return m;if(a.length===1&&m===this._searchPossibleTargets([m],f))if(this.preserveObjectStacking)p=m,v=this.targets,this.targets=[];else return m;var C=this._searchPossibleTargets(this._objects,f);return r[this.altSelectionKey]&&C&&p&&C!==p&&(C=p,this.targets=v),C}},_checkTarget:function(r,l,o){if(l&&l.visible&&l.evented&&l.containsPoint(r))if((this.perPixelTargetFind||l.perPixelTargetFind)&&!l.isEditing){var f=this.isTargetTransparent(l,o.x,o.y);if(!f)return!0}else return!0},_searchPossibleTargets:function(r,l){for(var o,f=r.length,m;f--;){var a=r[f],p=a.group?this._normalizePointer(a.group,l):l;if(this._checkTarget(p,a,l)){o=r[f],o.subTargetCheck&&o instanceof t.Group&&(m=this._searchPossibleTargets(o._objects,l),m&&this.targets.push(m));break}}return o},restorePointerVpt:function(r){return t.util.transformPoint(r,t.util.invertTransform(this.viewportTransform))},getPointer:function(r,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var o=u(r),f=this.upperCanvasEl,m=f.getBoundingClientRect(),a=m.width||0,p=m.height||0,v;(!a||!p)&&("top"in m&&"bottom"in m&&(p=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(a=Math.abs(m.right-m.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,l||(o=this.restorePointerVpt(o));var b=this.getRetinaScaling();return b!==1&&(o.x/=b,o.y/=b),a===0||p===0?v={width:1,height:1}:v={width:f.width/a,height:f.height/p},{x:o.x*v.width,y:o.y*v.height}},_createUpperCanvas:function(){var r=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,o=this.upperCanvasEl;o?o.className="":(o=this._createCanvasElement(),this.upperCanvasEl=o),t.util.addClass(o,"upper-canvas "+r),this.wrapperEl.appendChild(o),this._copyCanvasStyle(l,o),this._applyCanvasStyle(o),this.contextTop=o.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(r){var l=this.width||r.width,o=this.height||r.height;t.util.setStyle(r,{position:"absolute",width:l+"px",height:o+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),r.width=l,r.height=o,t.util.makeElementUnselectable(r)},_copyCanvasStyle:function(r,l){l.style.cssText=r.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var r=this._activeObject;return r?r.type==="activeSelection"&&r._objects?r._objects.slice(0):[r]:[]},_onObjectRemoved:function(r){r===this._activeObject&&(this.fire("before:selection:cleared",{target:r}),this._discardActiveObject(),this.fire("selection:cleared",{target:r}),r.fire("deselected")),r===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",r)},_fireSelectionEvents:function(r,l){var o=!1,f=this.getActiveObjects(),m=[],a=[];r.forEach(function(p){f.indexOf(p)===-1&&(o=!0,p.fire("deselected",{e:l,target:p}),a.push(p))}),f.forEach(function(p){r.indexOf(p)===-1&&(o=!0,p.fire("selected",{e:l,target:p}),m.push(p))}),r.length>0&&f.length>0?o&&this.fire("selection:updated",{e:l,selected:m,deselected:a}):f.length>0?this.fire("selection:created",{e:l,selected:m}):r.length>0&&this.fire("selection:cleared",{e:l,deselected:a})},setActiveObject:function(r,l){var o=this.getActiveObjects();return this._setActiveObject(r,l),this._fireSelectionEvents(o,l),this},_setActiveObject:function(r,l){return this._activeObject===r||!this._discardActiveObject(l,r)||r.onSelect({e:l})?!1:(this._activeObject=r,!0)},_discardActiveObject:function(r,l){var o=this._activeObject;if(o){if(o.onDeselect({e:r,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(r){var l=this.getActiveObjects(),o=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:o,e:r}),this._discardActiveObject(r),this._fireSelectionEvents(l,r),this},dispose:function(){var r=this.wrapperEl;return this.removeListeners(),r.removeChild(this.upperCanvasEl),r.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(l){t.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this)),r.parentNode&&r.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(r){var l=this._activeObject;l&&l._renderControls(r)},_toObject:function(r,l,o){var f=this._realizeGroupTransformOnObject(r),m=this.callSuper("_toObject",r,l,o);return this._unwindGroupTransformOnObject(r,f),m},_realizeGroupTransformOnObject:function(r){if(r.group&&r.group.type==="activeSelection"&&this._activeObject===r.group){var l=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],o={};return l.forEach(function(f){o[f]=r[f]}),t.util.addTransformToObject(r,this._activeObject.calcOwnMatrix()),o}else return null},_unwindGroupTransformOnObject:function(r,l){l&&r.set(l)},_setSVGObject:function(r,l,o){var f=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",r,l,o),this._unwindGroupTransformOnObject(l,f)},setViewportTransform:function(r){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,r)}});for(var h in t.StaticCanvas)h!=="prototype"&&(t.Canvas[h]=t.StaticCanvas[h])}(),function(){var u=t.util.addListener,n=t.util.removeListener,c=3,h=2,r=1,l={passive:!1};function o(f,m){return f.button&&f.button===m-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(u,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(f,m){var a=this.upperCanvasEl,p=this._getEventPrefix();f(t.window,"resize",this._onResize),f(a,p+"down",this._onMouseDown),f(a,p+"move",this._onMouseMove,l),f(a,p+"out",this._onMouseOut),f(a,p+"enter",this._onMouseEnter),f(a,"wheel",this._onMouseWheel),f(a,"contextmenu",this._onContextMenu),f(a,"dblclick",this._onDoubleClick),f(a,"dragover",this._onDragOver),f(a,"dragenter",this._onDragEnter),f(a,"dragleave",this._onDragLeave),f(a,"drop",this._onDrop),this.enablePointerEvents||f(a,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](a,"gesture",this._onGesture),eventjs[m](a,"drag",this._onDrag),eventjs[m](a,"orientation",this._onOrientationChange),eventjs[m](a,"shake",this._onShake),eventjs[m](a,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var f=this._getEventPrefix();n(t.document,f+"up",this._onMouseUp),n(t.document,"touchend",this._onTouchEnd,l),n(t.document,f+"move",this._onMouseMove,l),n(t.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(f,m){this.__onTransformGesture&&this.__onTransformGesture(f,m)},_onDrag:function(f,m){this.__onDrag&&this.__onDrag(f,m)},_onMouseWheel:function(f){this.__onMouseWheel(f)},_onMouseOut:function(f){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:f}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:f});var a=this;this._hoveredTargets.forEach(function(p){a.fire("mouse:out",{target:m,e:f}),p&&m.fire("mouseout",{e:f})}),this._hoveredTargets=[]},_onMouseEnter:function(f){!this._currentTransform&&!this.findTarget(f)&&(this.fire("mouse:over",{target:null,e:f}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(f,m){this.__onOrientationChange&&this.__onOrientationChange(f,m)},_onShake:function(f,m){this.__onShake&&this.__onShake(f,m)},_onLongPress:function(f,m){this.__onLongPress&&this.__onLongPress(f,m)},_onDragOver:function(f){f.preventDefault();var m=this._simpleEventHandler("dragover",f);this._fireEnterLeaveEvents(m,f)},_onDrop:function(f){return this._simpleEventHandler("drop:before",f),this._simpleEventHandler("drop",f)},_onContextMenu:function(f){return this.stopContextMenu&&(f.stopPropagation(),f.preventDefault()),!1},_onDoubleClick:function(f){this._cacheTransformEventData(f),this._handleEvent(f,"dblclick"),this._resetTransformEventData(f)},getPointerId:function(f){var m=f.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?f.pointerId:-1},_isMainEvent:function(f){return f.isPrimary===!0?!0:f.isPrimary===!1?!1:f.type==="touchend"&&f.touches.length===0?!0:f.changedTouches?f.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(f){f.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(f)),this.__onMouseDown(f),this._resetTransformEventData();var m=this.upperCanvasEl,a=this._getEventPrefix();u(t.document,"touchend",this._onTouchEnd,l),u(t.document,"touchmove",this._onMouseMove,l),n(m,a+"down",this._onMouseDown)},_onMouseDown:function(f){this.__onMouseDown(f),this._resetTransformEventData();var m=this.upperCanvasEl,a=this._getEventPrefix();n(m,a+"move",this._onMouseMove,l),u(t.document,a+"up",this._onMouseUp),u(t.document,a+"move",this._onMouseMove,l)},_onTouchEnd:function(f){if(!(f.touches.length>0)){this.__onMouseUp(f),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();n(t.document,"touchend",this._onTouchEnd,l),n(t.document,"touchmove",this._onMouseMove,l);var a=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){u(a.upperCanvasEl,m+"down",a._onMouseDown),a._willAddMouseDown=0},400)}},_onMouseUp:function(f){this.__onMouseUp(f),this._resetTransformEventData();var m=this.upperCanvasEl,a=this._getEventPrefix();this._isMainEvent(f)&&(n(t.document,a+"up",this._onMouseUp),n(t.document,a+"move",this._onMouseMove,l),u(m,a+"move",this._onMouseMove,l))},_onMouseMove:function(f){!this.allowTouchScrolling&&f.preventDefault&&f.preventDefault(),this.__onMouseMove(f)},_onResize:function(){this.calcOffset()},_shouldRender:function(f){var m=this._activeObject;return!!m!=!!f||m&&f&&m!==f?!0:(m&&m.isEditing,!1)},__onMouseUp:function(f){var m,a=this._currentTransform,p=this._groupSelector,v=!1,b=!p||p.left===0&&p.top===0;if(this._cacheTransformEventData(f),m=this._target,this._handleEvent(f,"up:before"),o(f,c)){this.fireRightClick&&this._handleEvent(f,"up",c,b);return}if(o(f,h)){this.fireMiddleClick&&this._handleEvent(f,"up",h,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(f);return}if(this._isMainEvent(f)){if(a&&(this._finalizeCurrentTransform(f),v=a.actionPerformed),!b){var y=m===this._activeObject;this._maybeGroupObjects(f),v||(v=this._shouldRender(m)||!y&&m===this._activeObject)}var C,S;if(m){if(C=m._findTargetCorner(this.getPointer(f,!0),t.util.isTouchEvent(f)),m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,f),v=!0;else{var w=m.controls[C],k=w&&w.getMouseUpHandler(f,m,w);k&&(S=this.getPointer(f),k(f,a,S.x,S.y))}m.isMoving=!1}if(a&&(a.target!==m||a.corner!==C)){var F=a.target&&a.target.controls[a.corner],V=F&&F.getMouseUpHandler(f,m,w);S=S||this.getPointer(f),V&&V(f,a,S.x,S.y)}this._setCursorFromEvent(f,m),this._handleEvent(f,"up",r,b),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),v?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(f,m){var a=this.findTarget(m),p=this.targets,v={e:m,target:a,subTargets:p};if(this.fire(f,v),a&&a.fire(f,v),!p)return a;for(var b=0;b<p.length;b++)p[b].fire(f,v);return a},_handleEvent:function(f,m,a,p){var v=this._target,b=this.targets||[],y={e:f,target:v,subTargets:b,button:a||r,isClick:p||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(y.currentTarget=this.findTarget(f),y.currentSubTargets=this.targets),this.fire("mouse:"+m,y),v&&v.fire("mouse"+m,y);for(var C=0;C<b.length;C++)b[C].fire("mouse"+m,y)},_finalizeCurrentTransform:function(f){var m=this._currentTransform,a=m.target,p={e:f,target:a,transform:m,action:m.action};a._scaling&&(a._scaling=!1),a.setCoords(),(m.actionPerformed||this.stateful&&a.hasStateChanged())&&this._fire("modified",p)},_onMouseDownInDrawingMode:function(f){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(f).requestRenderAll();var m=this.getPointer(f);this.freeDrawingBrush.onMouseDown(m,{e:f,pointer:m}),this._handleEvent(f,"down")},_onMouseMoveInDrawingMode:function(f){if(this._isCurrentlyDrawing){var m=this.getPointer(f);this.freeDrawingBrush.onMouseMove(m,{e:f,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(f,"move")},_onMouseUpInDrawingMode:function(f){var m=this.getPointer(f);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:f,pointer:m}),this._handleEvent(f,"up")},__onMouseDown:function(f){this._cacheTransformEventData(f),this._handleEvent(f,"down:before");var m=this._target;if(o(f,c)){this.fireRightClick&&this._handleEvent(f,"down",c);return}if(o(f,h)){this.fireMiddleClick&&this._handleEvent(f,"down",h);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(f);return}if(this._isMainEvent(f)&&!this._currentTransform){var a=this._pointer;this._previousPointer=a;var p=this._shouldRender(m),v=this._shouldGroup(f,m);if(this._shouldClearSelection(f,m)?this.discardActiveObject(f):v&&(this._handleGrouping(f,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var b=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,f);var y=m._findTargetCorner(this.getPointer(f,!0),t.util.isTouchEvent(f));if(m.__corner=y,m===this._activeObject&&(y||!v)){this._setupCurrentTransform(f,m,b);var C=m.controls[y],a=this.getPointer(f),S=C&&C.getMouseDownHandler(f,m,C);S&&S(f,this._currentTransform,a.x,a.y)}}this._handleEvent(f,"down"),(p||v)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(f){this._resetTransformEventData(),this._pointer=this.getPointer(f,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(f)||null},_beforeTransform:function(f){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:f,transform:m})},__onMouseMove:function(f){this._handleEvent(f,"move:before"),this._cacheTransformEventData(f);var m,a;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(f);return}if(this._isMainEvent(f)){var p=this._groupSelector;p?(a=this._absolutePointer,p.left=a.x-p.ex,p.top=a.y-p.ey,this.renderTop()):this._currentTransform?this._transformObject(f):(m=this.findTarget(f)||null,this._setCursorFromEvent(f,m),this._fireOverOutEvents(m,f)),this._handleEvent(f,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(f,m){var a=this._hoveredTarget,p=this._hoveredTargets,v=this.targets,b=Math.max(p.length,v.length);this.fireSyntheticInOutEvents(f,m,{oldTarget:a,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(v[y],m,{oldTarget:p[y],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=f,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(f,m){var a=this._draggedoverTarget,p=this._hoveredTargets,v=this.targets,b=Math.max(p.length,v.length);this.fireSyntheticInOutEvents(f,m,{oldTarget:a,evtOut:"dragleave",evtIn:"dragenter"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(v[y],m,{oldTarget:p[y],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=f},fireSyntheticInOutEvents:function(f,m,a){var p,v,b=a.oldTarget,y,C,S=b!==f,w=a.canvasEvtIn,k=a.canvasEvtOut;S&&(p={e:m,target:f,previousTarget:b},v={e:m,target:b,nextTarget:f}),C=f&&S,y=b&&S,y&&(k&&this.fire(k,v),b.fire(a.evtOut,v)),C&&(w&&this.fire(w,p),f.fire(a.evtIn,p))},__onMouseWheel:function(f){this._cacheTransformEventData(f),this._handleEvent(f,"wheel"),this._resetTransformEventData()},_transformObject:function(f){var m=this.getPointer(f),a=this._currentTransform;a.reset=!1,a.shiftKey=f.shiftKey,a.altKey=f[this.centeredKey],this._performTransformAction(f,a,m),a.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(f,m,a){var p=a.x,v=a.y,b=m.action,y=!1,C=m.actionHandler;C&&(y=C(f,m,p,v)),b==="drag"&&y&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||y},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(f,m){if(!m)return this.setCursor(this.defaultCursor),!1;var a=m.hoverCursor||this.hoverCursor,p=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,v=(!p||!p.contains(m))&&m._findTargetCorner(this.getPointer(f,!0));v?this.setCursor(this.getCornerCursor(v,m,f)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(b){a=b.hoverCursor||a}),this.setCursor(a))},getCornerCursor:function(f,m,a){var p=m.controls[f];return p.cursorStyleHandler(a,p,m)}})}(),function(){var u=Math.min,n=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(c,h){var r=this._activeObject;return r&&this._isSelectionKeyPressed(c)&&h&&h.selectable&&this.selection&&(r!==h||r.type==="activeSelection")&&!h.onSelect({e:c})},_handleGrouping:function(c,h){var r=this._activeObject;r.__corner||h===r&&(h=this.findTarget(c,!0),!h||!h.selectable)||(r&&r.type==="activeSelection"?this._updateActiveSelection(h,c):this._createActiveSelection(h,c))},_updateActiveSelection:function(c,h){var r=this._activeObject,l=r._objects.slice(0);r.contains(c)?(r.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),r.size()===1&&this._setActiveObject(r.item(0),h)):(r.addWithUpdate(c),this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(l,h)},_createActiveSelection:function(c,h){var r=this.getActiveObjects(),l=this._createGroup(c);this._hoveredTarget=l,this._setActiveObject(l,h),this._fireSelectionEvents(r,h)},_createGroup:function(c){var h=this._objects,r=h.indexOf(this._activeObject)<h.indexOf(c),l=r?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(c){var h=this._collectObjects(c),r;h.length===1?this.setActiveObject(h[0],c):h.length>1&&(r=new t.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(r,c))},_collectObjects:function(c){for(var h=[],r,l=this._groupSelector.ex,o=this._groupSelector.ey,f=l+this._groupSelector.left,m=o+this._groupSelector.top,a=new t.Point(u(l,f),u(o,m)),p=new t.Point(n(l,f),n(o,m)),v=!this.selectionFullyContained,b=l===f&&o===m,y=this._objects.length;y--&&(r=this._objects[y],!(!(!r||!r.selectable||!r.visible)&&(v&&r.intersectsWithRect(a,p,!0)||r.isContainedWithinRect(a,p,!0)||v&&r.containsPoint(a,null,!0)||v&&r.containsPoint(p,null,!0))&&(h.push(r),b))););return h.length>1&&(h=h.filter(function(C){return!C.onSelect({e:c})})),h},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(u){u||(u={});var n=u.format||"png",c=u.quality||1,h=(u.multiplier||1)*(u.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(h,u);return t.util.toDataURL(r,n,c)},toCanvasElement:function(u,n){u=u||1,n=n||{};var c=(n.width||this.width)*u,h=(n.height||this.height)*u,r=this.getZoom(),l=this.width,o=this.height,f=r*u,m=this.viewportTransform,a=(m[4]-(n.left||0))*u,p=(m[5]-(n.top||0))*u,v=this.interactive,b=[f,0,0,f,a,p],y=this.enableRetinaScaling,C=t.util.createCanvasElement(),S=this.contextTop;return C.width=c,C.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=c,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),this._objects),this.viewportTransform=m,this.width=l,this.height=o,this.calcViewportBoundaries(),this.interactive=v,this.enableRetinaScaling=y,this.contextTop=S,C}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(u,n,c){if(u){var h=typeof u=="string"?JSON.parse(u):t.util.object.clone(u),r=this,l=h.clipPath,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(f){r.clear(),r._setBgOverlay(h,function(){l?r._enlivenObjects([l],function(m){r.clipPath=m[0],r.__setupCanvas.call(r,h,f,o,n)}):r.__setupCanvas.call(r,h,f,o,n)})},c),this}},__setupCanvas:function(u,n,c,h){var r=this;n.forEach(function(l,o){r.insertAt(l,o)}),this.renderOnAddRemove=c,delete u.objects,delete u.backgroundImage,delete u.overlayImage,delete u.background,delete u.overlay,this._setOptions(u),this.renderAll(),h&&h()},_setBgOverlay:function(u,n){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!u.backgroundImage&&!u.overlayImage&&!u.background&&!u.overlay){n&&n();return}var h=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&n&&n()};this.__setBgOverlay("backgroundImage",u.backgroundImage,c,h),this.__setBgOverlay("overlayImage",u.overlayImage,c,h),this.__setBgOverlay("backgroundColor",u.background,c,h),this.__setBgOverlay("overlayColor",u.overlay,c,h)},__setBgOverlay:function(u,n,c,h){var r=this;if(!n){c[u]=!0,h&&h();return}u==="backgroundImage"||u==="overlayImage"?t.util.enlivenObjects([n],function(l){r[u]=l[0],c[u]=!0,h&&h()}):this["set"+t.util.string.capitalize(u,!0)](n,function(){c[u]=!0,h&&h()})},_enlivenObjects:function(u,n,c){if(!u||u.length===0){n&&n([]);return}t.util.enlivenObjects(u,function(h){n&&n(h)},null,c)},_toDataURL:function(u,n){this.clone(function(c){n(c.toDataURL(u))})},_toDataURLWithMultiplier:function(u,n,c){this.clone(function(h){c(h.toDataURLWithMultiplier(u,n))})},clone:function(u,n){var c=JSON.stringify(this.toJSON(n));this.cloneWithoutData(function(h){h.loadFromJSON(c,function(){u&&u(h)})})},cloneWithoutData:function(u){var n=t.util.createCanvasElement();n.width=this.width,n.height=this.height;var c=new t.Canvas(n);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),u&&u(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):u&&u(c)}}),function(u){var n=u.fabric||(u.fabric={}),c=n.util.object.extend,h=n.util.object.clone,r=n.util.toFixed,l=n.util.string.capitalize,o=n.util.degreesToRadians,f=!n.isLikelyNode,m=2;n.Object||(n.Object=n.util.createClass(n.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:f,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(a){a&&this.setOptions(a)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=n.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(a){var p=n.perfLimitSizeTotal,v=a.width,b=a.height,y=n.maxCacheSideLimit,C=n.minCacheSideLimit;if(v<=y&&b<=y&&v*b<=p)return v<C&&(a.width=C),b<C&&(a.height=C),a;var S=v/b,w=n.util.limitDimsByArea(S,p),k=n.util.capValue,F=k(C,w.x,y),V=k(C,w.y,y);return v>F&&(a.zoomX/=v/F,a.width=F,a.capped=!0),b>V&&(a.zoomY/=b/V,a.height=V,a.capped=!0),a},_getCacheCanvasDimensions:function(){var a=this.getTotalObjectScaling(),p=this._getTransformedDimensions(0,0),v=p.x*a.scaleX/this.scaleX,b=p.y*a.scaleY/this.scaleY;return{width:v+m,height:b+m,zoomX:a.scaleX,zoomY:a.scaleY,x:v,y:b}},_updateCacheCanvas:function(){var a=this.canvas;if(this.noScaleCache&&a&&a._currentTransform){var p=a._currentTransform.target,v=a._currentTransform.action;if(this===p&&v.slice&&v.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,y=this._limitCacheSize(this._getCacheCanvasDimensions()),C=n.minCacheSideLimit,S=y.width,w=y.height,k,F,V=y.zoomX,z=y.zoomY,Y=S!==this.cacheWidth||w!==this.cacheHeight,et=this.zoomX!==V||this.zoomY!==z,H=Y||et,Q=0,ct=0,G=!1;if(Y){var lt=this._cacheCanvas.width,T=this._cacheCanvas.height,L=S>lt||w>T,D=(S<lt*.9||w<T*.9)&&lt>C&&T>C;G=L||D,L&&!y.capped&&(S>C||w>C)&&(Q=S*.1,ct=w*.1)}return this instanceof n.Text&&this.path&&(H=!0,G=!0,Q+=this.getHeightOfLine(0)*this.zoomX,ct+=this.getHeightOfLine(0)*this.zoomY),H?(G?(b.width=Math.ceil(S+Q),b.height=Math.ceil(w+ct)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),k=y.x/2,F=y.y/2,this.cacheTranslationX=Math.round(b.width/2-k)+k,this.cacheTranslationY=Math.round(b.height/2-F)+F,this.cacheWidth=S,this.cacheHeight=w,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(V,z),this.zoomX=V,this.zoomY=z,!0):!1},setOptions:function(a){this._setOptions(a),this._initGradient(a.fill,"fill"),this._initGradient(a.stroke,"stroke"),this._initPattern(a.fill,"fill"),this._initPattern(a.stroke,"stroke")},transform:function(a){var p=this.group&&!this.group._transformDone||this.group&&this.canvas&&a===this.canvas.contextTop,v=this.calcTransformMatrix(!p);a.transform(v[0],v[1],v[2],v[3],v[4],v[5])},toObject:function(a){var p=n.Object.NUM_FRACTION_DIGITS,v={type:this.type,version:n.version,originX:this.originX,originY:this.originY,left:r(this.left,p),top:r(this.top,p),width:r(this.width,p),height:r(this.height,p),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,p),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,p),scaleX:r(this.scaleX,p),scaleY:r(this.scaleY,p),angle:r(this.angle,p),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,p),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,p),skewY:r(this.skewY,p)};return this.clipPath&&!this.clipPath.excludeFromExport&&(v.clipPath=this.clipPath.toObject(a),v.clipPath.inverted=this.clipPath.inverted,v.clipPath.absolutePositioned=this.clipPath.absolutePositioned),n.util.populateWithProperties(this,v,a),this.includeDefaultValues||(v=this._removeDefaultValues(v)),v},toDatalessObject:function(a){return this.toObject(a)},_removeDefaultValues:function(a){var p=n.util.getKlass(a.type).prototype,v=p.stateProperties;return v.forEach(function(b){b==="left"||b==="top"||(a[b]===p[b]&&delete a[b],Array.isArray(a[b])&&Array.isArray(p[b])&&a[b].length===0&&p[b].length===0&&delete a[b])}),a},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var a=n.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(a.scaleX),scaleY:Math.abs(a.scaleY)}},getTotalObjectScaling:function(){var a=this.getObjectScaling(),p=a.scaleX,v=a.scaleY;if(this.canvas){var b=this.canvas.getZoom(),y=this.canvas.getRetinaScaling();p*=b*y,v*=b*y}return{scaleX:p,scaleY:v}},getObjectOpacity:function(){var a=this.opacity;return this.group&&(a*=this.group.getObjectOpacity()),a},_set:function(a,p){var v=a==="scaleX"||a==="scaleY",b=this[a]!==p,y=!1;return v&&(p=this._constrainScale(p)),a==="scaleX"&&p<0?(this.flipX=!this.flipX,p*=-1):a==="scaleY"&&p<0?(this.flipY=!this.flipY,p*=-1):a==="shadow"&&p&&!(p instanceof n.Shadow)?p=new n.Shadow(p):a==="dirty"&&this.group&&this.group.set("dirty",p),this[a]=p,b&&(y=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(a)>-1?(this.dirty=!0,y&&this.group.set("dirty",!0)):y&&this.stateProperties.indexOf(a)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:n.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(a){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(a.save(),this._setupCompositeOperation(a),this.drawSelectionBackground(a),this.transform(a),this._setOpacity(a),this._setShadow(a,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(a)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(a),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),a.restore())},renderCache:function(a){a=a||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,a.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(a,p){if(a.save(),p.inverted?a.globalCompositeOperation="destination-out":a.globalCompositeOperation="destination-in",p.absolutePositioned){var v=n.util.invertTransform(this.calcTransformMatrix());a.transform(v[0],v[1],v[2],v[3],v[4],v[5])}p.transform(a),a.scale(1/p.zoomX,1/p.zoomY),a.drawImage(p._cacheCanvas,-p.cacheTranslationX,-p.cacheTranslationY),a.restore()},drawObject:function(a,p){var v=this.fill,b=this.stroke;p?(this.fill="black",this.stroke="",this._setClippingProperties(a)):this._renderBackground(a),this._render(a),this._drawClipPath(a,this.clipPath),this.fill=v,this.stroke=b},_drawClipPath:function(a,p){p&&(p.canvas=this.canvas,p.shouldCache(),p._transformDone=!0,p.renderCache({forClipping:!0}),this.drawClipPathOnCache(a,p))},drawCacheOnCanvas:function(a){a.scale(1/this.zoomX,1/this.zoomY),a.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(a){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!a&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!a){var p=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-v/2,p,v)}return!0}return!1},_renderBackground:function(a){if(this.backgroundColor){var p=this._getNonTransformedDimensions();a.fillStyle=this.backgroundColor,a.fillRect(-p.x/2,-p.y/2,p.x,p.y),this._removeShadow(a)}},_setOpacity:function(a){this.group&&!this.group._transformDone?a.globalAlpha=this.getObjectOpacity():a.globalAlpha*=this.opacity},_setStrokeStyles:function(a,p){var v=p.stroke;v&&(a.lineWidth=p.strokeWidth,a.lineCap=p.strokeLineCap,a.lineDashOffset=p.strokeDashOffset,a.lineJoin=p.strokeLineJoin,a.miterLimit=p.strokeMiterLimit,v.toLive?v.gradientUnits==="percentage"||v.gradientTransform||v.patternTransform?this._applyPatternForTransformedGradient(a,v):(a.strokeStyle=v.toLive(a,this),this._applyPatternGradientTransform(a,v)):a.strokeStyle=p.stroke)},_setFillStyles:function(a,p){var v=p.fill;v&&(v.toLive?(a.fillStyle=v.toLive(a,this),this._applyPatternGradientTransform(a,p.fill)):a.fillStyle=v)},_setClippingProperties:function(a){a.globalAlpha=1,a.strokeStyle="transparent",a.fillStyle="#000000"},_setLineDash:function(a,p){!p||p.length===0||(1&p.length&&p.push.apply(p,p),a.setLineDash(p))},_renderControls:function(a,p){var v=this.getViewportTransform(),b=this.calcTransformMatrix(),y,C,S;p=p||{},C=typeof p.hasBorders<"u"?p.hasBorders:this.hasBorders,S=typeof p.hasControls<"u"?p.hasControls:this.hasControls,b=n.util.multiplyTransformMatrices(v,b),y=n.util.qrDecompose(b),a.save(),a.translate(y.translateX,y.translateY),a.lineWidth=1*this.borderScaleFactor,this.group||(a.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(y.angle-=180),a.rotate(o(this.group?y.angle:this.angle)),p.forActiveSelection||this.group?C&&this.drawBordersInGroup(a,y,p):C&&this.drawBorders(a,p),S&&this.drawControls(a,p),a.restore()},_setShadow:function(a){if(this.shadow){var p=this.shadow,v=this.canvas,b,y=v&&v.viewportTransform[0]||1,C=v&&v.viewportTransform[3]||1;p.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),v&&v._isRetinaScaling()&&(y*=n.devicePixelRatio,C*=n.devicePixelRatio),a.shadowColor=p.color,a.shadowBlur=p.blur*n.browserShadowBlurConstant*(y+C)*(b.scaleX+b.scaleY)/4,a.shadowOffsetX=p.offsetX*y*b.scaleX,a.shadowOffsetY=p.offsetY*C*b.scaleY}},_removeShadow:function(a){this.shadow&&(a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0)},_applyPatternGradientTransform:function(a,p){if(!p||!p.toLive)return{offsetX:0,offsetY:0};var v=p.gradientTransform||p.patternTransform,b=-this.width/2+p.offsetX||0,y=-this.height/2+p.offsetY||0;return p.gradientUnits==="percentage"?a.transform(this.width,0,0,this.height,b,y):a.transform(1,0,0,1,b,y),v&&a.transform(v[0],v[1],v[2],v[3],v[4],v[5]),{offsetX:b,offsetY:y}},_renderPaintInOrder:function(a){this.paintFirst==="stroke"?(this._renderStroke(a),this._renderFill(a)):(this._renderFill(a),this._renderStroke(a))},_render:function(){},_renderFill:function(a){this.fill&&(a.save(),this._setFillStyles(a,this),this.fillRule==="evenodd"?a.fill("evenodd"):a.fill(),a.restore())},_renderStroke:function(a){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this.strokeUniform&&this.group){var p=this.getObjectScaling();a.scale(1/p.scaleX,1/p.scaleY)}else this.strokeUniform&&a.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(a,this.strokeDashArray),this._setStrokeStyles(a,this),a.stroke(),a.restore()}},_applyPatternForTransformedGradient:function(a,p){var v=this._limitCacheSize(this._getCacheCanvasDimensions()),b=n.util.createCanvasElement(),y,C=this.canvas.getRetinaScaling(),S=v.x/this.scaleX/C,w=v.y/this.scaleY/C;b.width=S,b.height=w,y=b.getContext("2d"),y.beginPath(),y.moveTo(0,0),y.lineTo(S,0),y.lineTo(S,w),y.lineTo(0,w),y.closePath(),y.translate(S/2,w/2),y.scale(v.zoomX/this.scaleX/C,v.zoomY/this.scaleY/C),this._applyPatternGradientTransform(y,p),y.fillStyle=p.toLive(a),y.fill(),a.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),a.scale(C*this.scaleX/v.zoomX,C*this.scaleY/v.zoomY),a.strokeStyle=y.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var a=n.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",a.scaleX),this.set("scaleY",a.scaleY),this.angle=a.angle,this.skewX=a.skewX,this.skewY=0}},_removeTransformMatrix:function(a){var p=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),p=n.util.transformPoint(p,this.transformMatrix)),this.transformMatrix=null,a&&(this.scaleX*=a.scaleX,this.scaleY*=a.scaleY,this.cropX=a.cropX,this.cropY=a.cropY,p.x+=a.offsetLeft,p.y+=a.offsetTop,this.width=a.width,this.height=a.height),this.setPositionByOrigin(p,"center","center")},clone:function(a,p){var v=this.toObject(p);this.constructor.fromObject?this.constructor.fromObject(v,a):n.Object._fromObject("Object",v,a)},cloneAsImage:function(a,p){var v=this.toCanvasElement(p);return a&&a(new n.Image(v)),this},toCanvasElement:function(a){a||(a={});var p=n.util,v=p.saveObjectTransform(this),b=this.group,y=this.shadow,C=Math.abs,S=(a.multiplier||1)*(a.enableRetinaScaling?n.devicePixelRatio:1);delete this.group,a.withoutTransform&&p.resetObjectTransform(this),a.withoutShadow&&(this.shadow=null);var w=n.util.createCanvasElement(),k=this.getBoundingRect(!0,!0),F=this.shadow,V,z={x:0,y:0},Y,et,H;F&&(Y=F.blur,F.nonScaling?V={scaleX:1,scaleY:1}:V=this.getObjectScaling(),z.x=2*Math.round(C(F.offsetX)+Y)*C(V.scaleX),z.y=2*Math.round(C(F.offsetY)+Y)*C(V.scaleY)),et=k.width+z.x,H=k.height+z.y,w.width=Math.ceil(et),w.height=Math.ceil(H);var Q=new n.StaticCanvas(w,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});a.format==="jpeg"&&(Q.backgroundColor="#fff"),this.setPositionByOrigin(new n.Point(Q.width/2,Q.height/2),"center","center");var ct=this.canvas;Q.add(this);var G=Q.toCanvasElement(S||1,a);return this.shadow=y,this.set("canvas",ct),b&&(this.group=b),this.set(v).setCoords(),Q._objects=[],Q.dispose(),Q=null,G},toDataURL:function(a){return a||(a={}),n.util.toDataURL(this.toCanvasElement(a),a.format||"png",a.quality||1)},isType:function(a){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===a},complexity:function(){return 1},toJSON:function(a){return this.toObject(a)},rotate:function(a){var p=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return p&&this._setOriginToCenter(),this.set("angle",a),p&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(a,p){p=p||this.canvas.getPointer(a);var v=new n.Point(p.x,p.y),b=this._getLeftTopCoords();return this.angle&&(v=n.util.rotatePoint(v,b,o(-this.angle))),{x:v.x-b.x,y:v.y-b.y}},_setupCompositeOperation:function(a){this.globalCompositeOperation&&(a.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){n.runningAnimations&&n.runningAnimations.cancelByTarget(this)}}),n.util.createAccessors&&n.util.createAccessors(n.Object),c(n.Object.prototype,n.Observable),n.Object.NUM_FRACTION_DIGITS=2,n.Object.ENLIVEN_PROPS=["clipPath"],n.Object._fromObject=function(a,p,v,b){var y=n[a];p=h(p,!0),n.util.enlivenPatterns([p.fill,p.stroke],function(C){typeof C[0]<"u"&&(p.fill=C[0]),typeof C[1]<"u"&&(p.stroke=C[1]),n.util.enlivenObjectEnlivables(p,p,function(){var S=b?new y(p[b],p):new y(p);v&&v(S)})})},n.Object.__uid=0)}(s),function(){var u=t.util.degreesToRadians,n={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(h,r,l,o,f){var m=h.x,a=h.y,p,v,b;return typeof r=="string"?r=n[r]:r-=.5,typeof o=="string"?o=n[o]:o-=.5,p=o-r,typeof l=="string"?l=c[l]:l-=.5,typeof f=="string"?f=c[f]:f-=.5,v=f-l,(p||v)&&(b=this._getTransformedDimensions(),m=h.x+p*b.x,a=h.y+v*b.y),new t.Point(m,a)},translateToCenterPoint:function(h,r,l){var o=this.translateToGivenOrigin(h,r,l,"center","center");return this.angle?t.util.rotatePoint(o,h,u(this.angle)):o},translateToOriginPoint:function(h,r,l){var o=this.translateToGivenOrigin(h,"center","center",r,l);return this.angle?t.util.rotatePoint(o,h,u(this.angle)):o},getCenterPoint:function(){var h=new t.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,r){var l=this.getCenterPoint();return this.translateToOriginPoint(l,h,r)},toLocalPoint:function(h,r,l){var o=this.getCenterPoint(),f,m;return typeof r<"u"&&typeof l<"u"?f=this.translateToGivenOrigin(o,"center","center",r,l):f=new t.Point(this.left,this.top),m=new t.Point(h.x,h.y),this.angle&&(m=t.util.rotatePoint(m,o,-u(this.angle))),m.subtractEquals(f)},setPositionByOrigin:function(h,r,l){var o=this.translateToCenterPoint(h,r,l),f=this.translateToOriginPoint(o,this.originX,this.originY);this.set("left",f.x),this.set("top",f.y)},adjustPosition:function(h){var r=u(this.angle),l=this.getScaledWidth(),o=t.util.cos(r)*l,f=t.util.sin(r)*l,m,a;typeof this.originX=="string"?m=n[this.originX]:m=this.originX-.5,typeof h=="string"?a=n[h]:a=h-.5,this.left+=o*(a-m),this.top+=f*(a-m),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function u(l){return[new t.Point(l.tl.x,l.tl.y),new t.Point(l.tr.x,l.tr.y),new t.Point(l.br.x,l.br.y),new t.Point(l.bl.x,l.bl.y)]}var n=t.util,c=n.degreesToRadians,h=n.multiplyTransformMatrices,r=n.transformPoint;n.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(l,o){return o?l?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),l?this.aCoords:this.lineCoords)},getCoords:function(l,o){return u(this._getCoords(l,o))},intersectsWithRect:function(l,o,f,m){var a=this.getCoords(f,m),p=t.Intersection.intersectPolygonRectangle(a,l,o);return p.status==="Intersection"},intersectsWithObject:function(l,o,f){var m=t.Intersection.intersectPolygonPolygon(this.getCoords(o,f),l.getCoords(o,f));return m.status==="Intersection"||l.isContainedWithinObject(this,o,f)||this.isContainedWithinObject(l,o,f)},isContainedWithinObject:function(l,o,f){for(var m=this.getCoords(o,f),a=o?l.aCoords:l.lineCoords,p=0,v=l._getImageLines(a);p<4;p++)if(!l.containsPoint(m[p],v))return!1;return!0},isContainedWithinRect:function(l,o,f,m){var a=this.getBoundingRect(f,m);return a.left>=l.x&&a.left+a.width<=o.x&&a.top>=l.y&&a.top+a.height<=o.y},containsPoint:function(l,p,f,m){var a=this._getCoords(f,m),p=p||this._getImageLines(a),v=this._findCrossPoints(l,p);return v!==0&&v%2===1},isOnScreen:function(l){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,f=this.canvas.vptCoords.br,m=this.getCoords(!0,l);return m.some(function(a){return a.x<=f.x&&a.x>=o.x&&a.y<=f.y&&a.y>=o.y})||this.intersectsWithRect(o,f,!0,l)?!0:this._containsCenterOfCanvas(o,f,l)},_containsCenterOfCanvas:function(l,o,f){var m={x:(l.x+o.x)/2,y:(l.y+o.y)/2};return!!this.containsPoint(m,null,!0,f)},isPartiallyOnScreen:function(l){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,f=this.canvas.vptCoords.br;if(this.intersectsWithRect(o,f,!0,l))return!0;var m=this.getCoords(!0,l).every(function(a){return(a.x>=f.x||a.x<=o.x)&&(a.y>=f.y||a.y<=o.y)});return m&&this._containsCenterOfCanvas(o,f,l)},_getImageLines:function(l){var o={topline:{o:l.tl,d:l.tr},rightline:{o:l.tr,d:l.br},bottomline:{o:l.br,d:l.bl},leftline:{o:l.bl,d:l.tl}};return o},_findCrossPoints:function(l,o){var f,m,a,p,v,b=0,y;for(var C in o)if(y=o[C],!(y.o.y<l.y&&y.d.y<l.y)&&!(y.o.y>=l.y&&y.d.y>=l.y)&&(y.o.x===y.d.x&&y.o.x>=l.x?v=y.o.x:(f=0,m=(y.d.y-y.o.y)/(y.d.x-y.o.x),a=l.y-f*l.x,p=y.o.y-m*y.o.x,v=-(a-p)/(f-m)),v>=l.x&&(b+=1),b===2))break;return b},getBoundingRect:function(l,o){var f=this.getCoords(l,o);return n.makeBoundingBoxFromPoints(f)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(l){return Math.abs(l)<this.minScaleLimit?l<0?-this.minScaleLimit:this.minScaleLimit:l===0?1e-4:l},scale:function(l){return this._set("scaleX",l),this._set("scaleY",l),this.setCoords()},scaleToWidth:function(l,o){var f=this.getBoundingRect(o).width/this.getScaledWidth();return this.scale(l/this.width/f)},scaleToHeight:function(l,o){var f=this.getBoundingRect(o).height/this.getScaledHeight();return this.scale(l/this.height/f)},calcLineCoords:function(){var l=this.getViewportTransform(),o=this.padding,f=c(this.angle),m=n.cos(f),a=n.sin(f),p=m*o,v=a*o,b=p+v,y=p-v,C=this.calcACoords(),S={tl:r(C.tl,l),tr:r(C.tr,l),bl:r(C.bl,l),br:r(C.br,l)};return o&&(S.tl.x-=y,S.tl.y-=b,S.tr.x+=b,S.tr.y-=y,S.bl.x-=b,S.bl.y+=y,S.br.x+=y,S.br.y+=b),S},calcOCoords:function(){var l=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),f=this.getViewportTransform(),m=h(f,o),a=h(m,l),a=h(a,[1/f[0],0,0,1/f[3],0,0]),p=this._calculateCurrentDimensions(),v={};return this.forEachControl(function(b,y,C){v[y]=b.positionHandler(p,a,C)}),v},calcACoords:function(){var l=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),f=h(o,l),m=this._getTransformedDimensions(),a=m.x/2,p=m.y/2;return{tl:r({x:-a,y:-p},f),tr:r({x:a,y:-p},f),bl:r({x:-a,y:p},f),br:r({x:a,y:p},f)}},setCoords:function(l){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),l?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return n.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var l=this.getCenterPoint();return[1,0,0,1,l.x,l.y]},transformMatrixKey:function(l){var o="_",f="";return!l&&this.group&&(f=this.group.transformMatrixKey(l)+o),f+this.top+o+this.left+o+this.scaleX+o+this.scaleY+o+this.skewX+o+this.skewY+o+this.angle+o+this.originX+o+this.originY+o+this.width+o+this.height+o+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(l){var o=this.calcOwnMatrix();if(l||!this.group)return o;var f=this.transformMatrixKey(l),m=this.matrixCache||(this.matrixCache={});return m.key===f?m.value:(this.group&&(o=h(this.group.calcTransformMatrix(!1),o)),m.key=f,m.value=o,o)},calcOwnMatrix:function(){var l=this.transformMatrixKey(!0),o=this.ownMatrixCache||(this.ownMatrixCache={});if(o.key===l)return o.value;var f=this._calcTranslateMatrix(),m={angle:this.angle,translateX:f[4],translateY:f[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return o.key=l,o.value=n.composeMatrix(m),o.value},_getNonTransformedDimensions:function(){var l=this.strokeWidth,o=this.width+l,f=this.height+l;return{x:o,y:f}},_getTransformedDimensions:function(l,o){typeof l>"u"&&(l=this.skewX),typeof o>"u"&&(o=this.skewY);var f,m,a,p=l===0&&o===0;if(this.strokeUniform?(m=this.width,a=this.height):(f=this._getNonTransformedDimensions(),m=f.x,a=f.y),p)return this._finalizeDimensions(m*this.scaleX,a*this.scaleY);var v=n.sizeAfterTransform(m,a,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:l,skewY:o});return this._finalizeDimensions(v.x,v.y)},_finalizeDimensions:function(l,o){return this.strokeUniform?{x:l+this.strokeWidth,y:o+this.strokeWidth}:{x:l,y:o}},_calculateCurrentDimensions:function(){var l=this.getViewportTransform(),o=this._getTransformedDimensions(),f=r(o,l,!0);return f.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(u){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,u):this.canvas&&this.canvas.sendBackwards(this,u),this},bringForward:function(u){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,u):this.canvas&&this.canvas.bringForward(this,u),this},moveTo:function(u){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,u):this.canvas&&this.canvas.moveTo(this,u),this}}),function(){function u(c,h){if(h){if(h.toLive)return c+": url(#SVGID_"+h.id+"); ";var r=new t.Color(h),l=c+": "+r.toRgb()+"; ",o=r.getAlpha();return o!==1&&(l+=c+"-opacity: "+o.toString()+"; "),l}else return c+": none; "}var n=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(c){var h=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",f=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",p=typeof this.opacity<"u"?this.opacity:"1",v=this.visible?"":" visibility: hidden;",b=c?"":this.getSvgFilter(),y=u("fill",this.fill),C=u("stroke",this.stroke);return[C,"stroke-width: ",r,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",f,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",a,"; ",y,"fill-rule: ",h,"; ","opacity: ",p,";",b,v].join("")},getSvgSpanStyles:function(c,h){var r="; ",o=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+r:"",l=c.strokeWidth?"stroke-width: "+c.strokeWidth+r:"",o=o,f=c.fontSize?"font-size: "+c.fontSize+"px"+r:"",m=c.fontStyle?"font-style: "+c.fontStyle+r:"",a=c.fontWeight?"font-weight: "+c.fontWeight+r:"",p=c.fill?u("fill",c.fill):"",v=c.stroke?u("stroke",c.stroke):"",b=this.getSvgTextDecoration(c),y=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return b&&(b="text-decoration: "+b+r),[v,l,o,f,m,a,b,p,y,h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(h){return c[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,h){var r=c?this.calcTransformMatrix():this.calcOwnMatrix(),l='transform="'+t.util.matrixToSVG(r);return l+(h||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var h=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',n(-this.width/2,h),'" y="',n(-this.height/2,h),'" width="',n(this.width,h),'" height="',n(this.height,h),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,h){h=h||{};var r=h.reviver,l=h.additionalTransform||"",o=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),f=c.indexOf("COMMON_PARTS");return c[f]=o,r?r(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,h){h=h||{};var r=h.noStyle,l=h.reviver,o=r?"":'style="'+this.getSvgStyles()+'" ',f=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,a=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",p=m&&m.absolutePositioned,v=this.stroke,b=this.fill,y=this.shadow,C,S=[],w,k=c.indexOf("COMMON_PARTS"),F=h.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+t.Object.__uid++,w='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(l)+`</clipPath>
`),p&&S.push("<g ",f,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),p?"":f+this.getSvgCommons(),` >
`),C=[o,a,r?"":this.addPaintOrder()," ",F?'transform="'+F+'" ':""].join(""),c[k]=C,b&&b.toLive&&S.push(b.toSVG(this)),v&&v.toLive&&S.push(v.toSVG(this)),y&&S.push(y.toSVG(this)),m&&S.push(w),S.push(c.join("")),S.push(`</g>
`),p&&S.push(`</g>
`),l?l(S.join("")):S.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var u=t.util.object.extend,n="stateProperties";function c(r,l,o){var f={},m=!0;o.forEach(function(a){f[a]=r[a]}),u(r[l],f,m)}function h(r,l,o){if(r===l)return!0;if(Array.isArray(r)){if(!Array.isArray(l)||r.length!==l.length)return!1;for(var f=0,m=r.length;f<m;f++)if(!h(r[f],l[f]))return!1;return!0}else if(r&&typeof r=="object"){var a=Object.keys(r),p;if(!l||typeof l!="object"||!o&&a.length!==Object.keys(l).length)return!1;for(var f=0,m=a.length;f<m;f++)if(p=a[f],!(p==="canvas"||p==="group")&&!h(r[p],l[p]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(r){r=r||n;var l="_"+r;return Object.keys(this[l]).length<this[r].length?!0:!h(this[l],this,!0)},saveState:function(r){var l=r&&r.propertySet||n,o="_"+l;return this[o]?(c(this,o,this[l]),r&&r.stateProperties&&c(this,o,r.stateProperties),this):this.setupState(r)},setupState:function(r){r=r||{};var l=r.propertySet||n;return r.propertySet=l,this["_"+l]={},this.saveState(r),this}})}(),function(){var u=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(n,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h=n.x,r=n.y,l,o,f=Object.keys(this.oCoords),m=f.length-1,a;for(this.__corner=0;m>=0;m--)if(a=f[m],!!this.isControlVisible(a)&&(o=this._getImageLines(c?this.oCoords[a].touchCorner:this.oCoords[a].corner),l=this._findCrossPoints({x:h,y:r},o),l!==0&&l%2===1))return this.__corner=a,a;return!1},forEachControl:function(n){for(var c in this.controls)n(this.controls[c],c,this)},_setCornerCoords:function(){var n=this.oCoords;for(var c in n){var h=this.controls[c];n[c].corner=h.calcCornerCoords(this.angle,this.cornerSize,n[c].x,n[c].y,!1),n[c].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,n[c].x,n[c].y,!0)}},drawSelectionBackground:function(n){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;n.save();var c=this.getCenterPoint(),h=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return n.translate(c.x,c.y),n.scale(1/r[0],1/r[3]),n.rotate(u(this.angle)),n.fillStyle=this.selectionBackgroundColor,n.fillRect(-h.x/2,-h.y/2,h.x,h.y),n.restore(),this},drawBorders:function(n,c){c=c||{};var h=this._calculateCurrentDimensions(),r=this.borderScaleFactor,l=h.x+r,o=h.y+r,f=typeof c.hasControls<"u"?c.hasControls:this.hasControls,m=!1;return n.save(),n.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(n,c.borderDashArray||this.borderDashArray),n.strokeRect(-l/2,-o/2,l,o),f&&(n.beginPath(),this.forEachControl(function(a,p,v){a.withConnection&&a.getVisibility(v,p)&&(m=!0,n.moveTo(a.x*l,a.y*o),n.lineTo(a.x*l+a.offsetX,a.y*o+a.offsetY))}),m&&n.stroke()),n.restore(),this},drawBordersInGroup:function(n,c,h){h=h||{};var r=t.util.sizeAfterTransform(this.width,this.height,c),l=this.strokeWidth,o=this.strokeUniform,f=this.borderScaleFactor,m=r.x+l*(o?this.canvas.getZoom():c.scaleX)+f,a=r.y+l*(o?this.canvas.getZoom():c.scaleY)+f;return n.save(),this._setLineDash(n,h.borderDashArray||this.borderDashArray),n.strokeStyle=h.borderColor||this.borderColor,n.strokeRect(-m/2,-a/2,m,a),n.restore(),this},drawControls:function(n,c){c=c||{},n.save();var h=this.canvas.getRetinaScaling(),r,l;return n.setTransform(h,0,0,h,0,0),n.strokeStyle=n.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(n.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(n,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(r=this.group.calcTransformMatrix()),this.forEachControl(function(o,f,m){l=m.oCoords[f],o.getVisibility(m,f)&&(r&&(l=t.util.transformPoint(l,r)),o.render(n,l.x,l.y,c,m))}),n.restore(),this},isControlVisible:function(n){return this.controls[n]&&this.controls[n].getVisibility(this,n)},setControlVisible:function(n,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[n]=c,this},setControlsVisibility:function(n){n||(n={});for(var c in n)this.setControlVisible(c,n[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(u,n){n=n||{};var c=function(){},h=n.onComplete||c,r=n.onChange||c,l=this;return t.util.animate({target:this,startValue:u.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(o){u.set("left",o),l.requestRenderAll(),r()},onComplete:function(){u.setCoords(),h()}})},fxCenterObjectV:function(u,n){n=n||{};var c=function(){},h=n.onComplete||c,r=n.onChange||c,l=this;return t.util.animate({target:this,startValue:u.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(o){u.set("top",o),l.requestRenderAll(),r()},onComplete:function(){u.setCoords(),h()}})},fxRemove:function(u,n){n=n||{};var c=function(){},h=n.onComplete||c,r=n.onChange||c,l=this;return t.util.animate({target:this,startValue:u.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(o){u.set("opacity",o),l.requestRenderAll(),r()},onComplete:function(){l.remove(u),h()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var u=[],n,c,h=[];for(n in arguments[0])u.push(n);for(var r=0,l=u.length;r<l;r++)n=u[r],c=r!==l-1,h.push(this._animate(n,arguments[0][n],arguments[1],c));return h}else return this._animate.apply(this,arguments)},_animate:function(u,n,c,h){var r=this,l;n=n.toString(),c?c=t.util.object.clone(c):c={},~u.indexOf(".")&&(l=u.split("."));var o=r.colorProperties.indexOf(u)>-1||l&&r.colorProperties.indexOf(l[1])>-1,f=l?this.get(l[0])[l[1]]:this.get(u);"from"in c||(c.from=f),o||(~n.indexOf("=")?n=f+parseFloat(n.replace("=","")):n=parseFloat(n));var m={target:this,startValue:c.from,endValue:n,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(a,p,v){return c.abort.call(r,a,p,v)},onChange:function(a,p,v){l?r[l[0]][l[1]]=a:r.set(u,a),!h&&c.onChange&&c.onChange(a,p,v)},onComplete:function(a,p,v){h||(r.setCoords(),c.onComplete&&c.onComplete(a,p,v))}};return o?t.util.animateColor(m.startValue,m.endValue,m.duration,m):t.util.animate(m)}}),function(u){var n=u.fabric||(u.fabric={}),c=n.util.object.extend,h=n.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};if(n.Line){n.warn("fabric.Line is already defined");return}n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(o,f){o||(o=[0,0,0,0]),this.callSuper("initialize",f),this.set("x1",o[0]),this.set("y1",o[1]),this.set("x2",o[2]),this.set("y2",o[3]),this._setWidthHeight(f)},_setWidthHeight:function(o){o||(o={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in o?o.left:this._getLeftToOriginX(),this.top="top"in o?o.top:this._getTopToOriginY()},_set:function(o,f){return this.callSuper("_set",o,f),typeof r[o]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(o){o.beginPath();var f=this.calcLinePoints();o.moveTo(f.x1,f.y1),o.lineTo(f.x2,f.y2),o.lineWidth=this.strokeWidth;var m=o.strokeStyle;o.strokeStyle=this.stroke||o.fillStyle,this.stroke&&this._renderStroke(o),o.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(o){return c(this.callSuper("toObject",o),this.calcLinePoints())},_getNonTransformedDimensions:function(){var o=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(o.y-=this.strokeWidth),this.height===0&&(o.x-=this.strokeWidth)),o},calcLinePoints:function(){var o=this.x1<=this.x2?-1:1,f=this.y1<=this.y2?-1:1,m=o*this.width*.5,a=f*this.height*.5,p=o*this.width*-.5,v=f*this.height*-.5;return{x1:m,x2:p,y1:a,y2:v}},_toSVG:function(){var o=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',o.x1,'" y1="',o.y1,'" x2="',o.x2,'" y2="',o.y2,`" />
`]}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),n.Line.fromElement=function(o,f,m){m=m||{};var a=n.parseAttributes(o,n.Line.ATTRIBUTE_NAMES),p=[a.x1||0,a.y1||0,a.x2||0,a.y2||0];f(new n.Line(p,c(a,m)))},n.Line.fromObject=function(o,f){function m(p){delete p.points,f&&f(p)}var a=h(o,!0);a.points=[o.x1,o.y1,o.x2,o.y2],n.Object._fromObject("Line",a,m,"points")};function l(o,f){var m=o.origin,a=o.axis1,p=o.axis2,v=o.dimension,b=f.nearest,y=f.center,C=f.farthest;return function(){switch(this.get(m)){case b:return Math.min(this.get(a),this.get(p));case y:return Math.min(this.get(a),this.get(p))+.5*this.get(v);case C:return Math.max(this.get(a),this.get(p))}}}}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.util.degreesToRadians;if(n.Circle){n.warn("fabric.Circle is already defined.");return}n.Circle=n.util.createClass(n.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:n.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(r,l){return this.callSuper("_set",r,l),r==="radius"&&this.setRadius(l),this},toObject:function(r){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(r))},_toSVG:function(){var r,l=0,o=0,f=(this.endAngle-this.startAngle)%360;if(f===0)r=["<circle ","COMMON_PARTS",'cx="'+l+'" cy="'+o+'" ','r="',this.radius,`" />
`];else{var m=c(this.startAngle),a=c(this.endAngle),p=this.radius,v=n.util.cos(m)*p,b=n.util.sin(m)*p,y=n.util.cos(a)*p,C=n.util.sin(a)*p,S=f>180?"1":"0";r=['<path d="M '+v+" "+b," A "+p+" "+p," 0 ",+S+" 1"," "+y+" "+C,'" ',"COMMON_PARTS",` />
`]}return r},_render:function(r){r.beginPath(),r.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(r)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(r){return this.radius=r,this.set("width",r*2).set("height",r*2)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),n.Circle.fromElement=function(r,l){var o=n.parseAttributes(r,n.Circle.ATTRIBUTE_NAMES);if(!h(o))throw new Error("value of `r` attribute is required and can not be negative");o.left=(o.left||0)-o.radius,o.top=(o.top||0)-o.radius,l(new n.Circle(o))};function h(r){return"radius"in r&&r.radius>=0}n.Circle.fromObject=function(r,l){n.Object._fromObject("Circle",r,l)}}(s),function(u){var n=u.fabric||(u.fabric={});if(n.Triangle){n.warn("fabric.Triangle is already defined");return}n.Triangle=n.util.createClass(n.Object,{type:"triangle",width:100,height:100,_render:function(c){var h=this.width/2,r=this.height/2;c.beginPath(),c.moveTo(-h,r),c.lineTo(0,-r),c.lineTo(h,r),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,h=this.height/2,r=[-c+" "+h,"0 "+-h,c+" "+h].join(",");return["<polygon ","COMMON_PARTS",'points="',r,'" />']}}),n.Triangle.fromObject=function(c,h){return n.Object._fromObject("Triangle",c,h)}}(s),function(u){var n=u.fabric||(u.fabric={}),c=Math.PI*2;if(n.Ellipse){n.warn("fabric.Ellipse is already defined.");return}n.Ellipse=n.util.createClass(n.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,r){switch(this.callSuper("_set",h,r),h){case"rx":this.rx=r,this.set("width",r*2);break;case"ry":this.ry=r,this.set("height",r*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,c,!1),h.restore(),this._renderPaintInOrder(h)}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),n.Ellipse.fromElement=function(h,r){var l=n.parseAttributes(h,n.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,r(new n.Ellipse(l))},n.Ellipse.fromObject=function(h,r){n.Object._fromObject("Ellipse",h,r)}}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.util.object.extend;if(n.Rect){n.warn("fabric.Rect is already defined");return}n.Rect=n.util.createClass(n.Object,{stateProperties:n.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var r=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,o=this.width,f=this.height,m=-this.width/2,a=-this.height/2,p=r!==0||l!==0,v=1-.5522847498;h.beginPath(),h.moveTo(m+r,a),h.lineTo(m+o-r,a),p&&h.bezierCurveTo(m+o-v*r,a,m+o,a+v*l,m+o,a+l),h.lineTo(m+o,a+f-l),p&&h.bezierCurveTo(m+o,a+f-v*l,m+o-v*r,a+f,m+o-r,a+f),h.lineTo(m+r,a+f),p&&h.bezierCurveTo(m+v*r,a+f,m,a+f-v*l,m,a+f-l),h.lineTo(m,a+l),p&&h.bezierCurveTo(m,a+v*l,m+v*r,a,m+r,a),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){var h=-this.width/2,r=-this.height/2;return["<rect ","COMMON_PARTS",'x="',h,'" y="',r,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),n.Rect.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),n.Rect.fromElement=function(h,r,l){if(!h)return r(null);l=l||{};var o=n.parseAttributes(h,n.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var f=new n.Rect(c(l?n.util.object.clone(l):{},o));f.visible=f.visible&&f.width>0&&f.height>0,r(f)},n.Rect.fromObject=function(h,r){return n.Object._fromObject("Rect",h,r)}}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.util.object.extend,h=n.util.array.min,r=n.util.array.max,l=n.util.toFixed,o=n.util.projectStrokeOnPoints;if(n.Polyline){n.warn("fabric.Polyline is already defined");return}n.Polyline=n.util.createClass(n.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:n.Object.prototype.cacheProperties.concat("points"),initialize:function(f,m){m=m||{},this.points=f||[],this.callSuper("initialize",m),this._setPositionDimensions(m)},_projectStrokeOnPoints:function(){return o(this.points,this,!0)},_setPositionDimensions:function(f){var m=this._calcDimensions(f),a,p=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-p,this.height=m.height-p,f.fromSVG||(a=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+p/2,y:m.top-this.strokeWidth/2+p/2},"left","top",this.originX,this.originY)),typeof f.left>"u"&&(this.left=f.fromSVG?m.left:a.x),typeof f.top>"u"&&(this.top=f.fromSVG?m.top:a.y),this.pathOffset={x:m.left+this.width/2+p/2,y:m.top+this.height/2+p/2}},_calcDimensions:function(){var f=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,m=h(f,"x")||0,a=h(f,"y")||0,p=r(f,"x")||0,v=r(f,"y")||0,b=p-m,y=v-a;return{left:m,top:a,width:b,height:y}},toObject:function(f){return c(this.callSuper("toObject",f),{points:this.points.concat()})},_toSVG:function(){for(var f=[],m=this.pathOffset.x,a=this.pathOffset.y,p=n.Object.NUM_FRACTION_DIGITS,v=0,b=this.points.length;v<b;v++)f.push(l(this.points[v].x-m,p),",",l(this.points[v].y-a,p)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',f.join(""),`" />
`]},commonRender:function(f){var m,a=this.points.length,p=this.pathOffset.x,v=this.pathOffset.y;if(!a||isNaN(this.points[a-1].y))return!1;f.beginPath(),f.moveTo(this.points[0].x-p,this.points[0].y-v);for(var b=0;b<a;b++)m=this.points[b],f.lineTo(m.x-p,m.y-v);return!0},_render:function(f){this.commonRender(f)&&this._renderPaintInOrder(f)},complexity:function(){return this.get("points").length}}),n.Polyline.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polyline.fromElementGenerator=function(f){return function(m,a,p){if(!m)return a(null);p||(p={});var v=n.parsePointsAttribute(m.getAttribute("points")),b=n.parseAttributes(m,n[f].ATTRIBUTE_NAMES);b.fromSVG=!0,a(new n[f](v,c(b,p)))}},n.Polyline.fromElement=n.Polyline.fromElementGenerator("Polyline"),n.Polyline.fromObject=function(f,m){return n.Object._fromObject("Polyline",f,m,"points")}}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.util.projectStrokeOnPoints;if(n.Polygon){n.warn("fabric.Polygon is already defined");return}n.Polygon=n.util.createClass(n.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(h){this.commonRender(h)&&(h.closePath(),this._renderPaintInOrder(h))}}),n.Polygon.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polygon.fromElement=n.Polyline.fromElementGenerator("Polygon"),n.Polygon.fromObject=function(h,r){n.Object._fromObject("Polygon",h,r,"points")}}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.util.array.min,h=n.util.array.max,r=n.util.object.extend,l=n.util.object.clone,o=n.util.toFixed;if(n.Path){n.warn("fabric.Path is already defined");return}n.Path=n.util.createClass(n.Object,{type:"path",path:null,cacheProperties:n.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:n.Object.prototype.stateProperties.concat("path"),initialize:function(f,m){m=l(m||{}),delete m.path,this.callSuper("initialize",m),this._setPath(f||[],m)},_setPath:function(f,m){this.path=n.util.makePathSimpler(Array.isArray(f)?f:n.util.parsePath(f)),n.Polyline.prototype._setPositionDimensions.call(this,m||{})},_renderPathCommands:function(f){var m,a=0,p=0,v=0,b=0,y=0,C=0,S=-this.pathOffset.x,w=-this.pathOffset.y;f.beginPath();for(var k=0,F=this.path.length;k<F;++k)switch(m=this.path[k],m[0]){case"L":v=m[1],b=m[2],f.lineTo(v+S,b+w);break;case"M":v=m[1],b=m[2],a=v,p=b,f.moveTo(v+S,b+w);break;case"C":v=m[5],b=m[6],y=m[3],C=m[4],f.bezierCurveTo(m[1]+S,m[2]+w,y+S,C+w,v+S,b+w);break;case"Q":f.quadraticCurveTo(m[1]+S,m[2]+w,m[3]+S,m[4]+w),v=m[3],b=m[4],y=m[1],C=m[2];break;case"z":case"Z":v=a,b=p,f.closePath();break}},_render:function(f){this._renderPathCommands(f),this._renderPaintInOrder(f)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(f){return r(this.callSuper("toObject",f),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(f){var m=this.toObject(["sourcePath"].concat(f));return m.sourcePath&&delete m.path,m},_toSVG:function(){var f=n.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',f,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var f=n.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,f)+", "+o(-this.pathOffset.y,f)+")"},toClipPathSVG:function(f){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:f,additionalTransform:m})},toSVG:function(f){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:f,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var f=[],m=[],a,p=0,v=0,b=0,y=0,C,S=0,w=this.path.length;S<w;++S){switch(a=this.path[S],a[0]){case"L":b=a[1],y=a[2],C=[];break;case"M":b=a[1],y=a[2],p=b,v=y,C=[];break;case"C":C=n.util.getBoundsOfCurve(b,y,a[1],a[2],a[3],a[4],a[5],a[6]),b=a[5],y=a[6];break;case"Q":C=n.util.getBoundsOfCurve(b,y,a[1],a[2],a[1],a[2],a[3],a[4]),b=a[3],y=a[4];break;case"z":case"Z":b=p,y=v;break}C.forEach(function(H){f.push(H.x),m.push(H.y)}),f.push(b),m.push(y)}var k=c(f)||0,F=c(m)||0,V=h(f)||0,z=h(m)||0,Y=V-k,et=z-F;return{left:k,top:F,width:Y,height:et}}}),n.Path.fromObject=function(f,m){if(typeof f.sourcePath=="string"){var a=f.sourcePath;n.loadSVGFromURL(a,function(p){var v=p[0];v.setOptions(f),f.clipPath?n.util.enlivenObjects([f.clipPath],function(b){v.clipPath=b[0],m&&m(v)}):m&&m(v)})}else n.Object._fromObject("Path",f,m,"path")},n.Path.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(["d"]),n.Path.fromElement=function(f,m,a){var p=n.parseAttributes(f,n.Path.ATTRIBUTE_NAMES);p.fromSVG=!0,m(new n.Path(p.d,r(p,a)))}}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.util.array.min,h=n.util.array.max;n.Group||(n.Group=n.util.createClass(n.Object,n.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(r,l,o){l=l||{},this._objects=[],o&&this.callSuper("initialize",l),this._objects=r||[];for(var f=this._objects.length;f--;)this._objects[f].group=this;if(o)this._updateObjectsACoords();else{var m=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var r=!0,l=this._objects.length;l--;)this._objects[l].setCoords(r)},_updateObjectsCoords:function(l){for(var l=l||this.getCenterPoint(),o=this._objects.length;o--;)this._updateObjectCoords(this._objects[o],l)},_updateObjectCoords:function(r,l){var o=r.left,f=r.top,m=!0;r.set({left:o-l.x,top:f-l.y}),r.group=this,r.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(r){var l=!!this.group;return this._restoreObjectsState(),n.util.resetObjectTransform(this),r&&(l&&n.util.removeTransformFromObject(r,this.group.calcTransformMatrix()),this._objects.push(r),r.group=this,r._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(r){return this._restoreObjectsState(),n.util.resetObjectTransform(this),this.remove(r),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(r){this.dirty=!0,r.group=this,r._set("canvas",this.canvas)},_onObjectRemoved:function(r){this.dirty=!0,delete r.group},_set:function(r,l){var o=this._objects.length;if(this.useSetOnGroup)for(;o--;)this._objects[o].setOnGroup(r,l);if(r==="canvas")for(;o--;)this._objects[o]._set(r,l);n.Object.prototype._set.call(this,r,l)},toObject:function(r){var l=this.includeDefaultValues,o=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var a=m.includeDefaultValues;m.includeDefaultValues=l;var p=m.toObject(r);return m.includeDefaultValues=a,p}),f=n.Object.prototype.toObject.call(this,r);return f.objects=o,f},toDatalessObject:function(r){var l,o=this.sourcePath;if(o)l=o;else{var f=this.includeDefaultValues;l=this._objects.map(function(a){var p=a.includeDefaultValues;a.includeDefaultValues=f;var v=a.toDatalessObject(r);return a.includeDefaultValues=p,v})}var m=n.Object.prototype.toDatalessObject.call(this,r);return m.objects=l,m},render:function(r){this._transformDone=!0,this.callSuper("render",r),this._transformDone=!1},shouldCache:function(){var r=n.Object.prototype.shouldCache.call(this);if(r){for(var l=0,o=this._objects.length;l<o;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return r},willDrawShadow:function(){if(n.Object.prototype.willDrawShadow.call(this))return!0;for(var r=0,l=this._objects.length;r<l;r++)if(this._objects[r].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(r){for(var l=0,o=this._objects.length;l<o;l++)this._objects[l].render(r);this._drawClipPath(r,this.clipPath)},isCacheDirty:function(r){if(this.callSuper("isCacheDirty",r))return!0;if(!this.statefullCache)return!1;for(var l=0,o=this._objects.length;l<o;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var f=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-f/2,-m/2,f,m)}return!0}return!1},_restoreObjectsState:function(){var r=this.calcOwnMatrix();return this._objects.forEach(function(l){n.util.addTransformToObject(l,r),delete l.group,l.setCoords()}),this},destroy:function(){return this._objects.forEach(function(r){r.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(r){r.dispose&&r.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var r=this._objects,l=this.canvas;this._objects=[];var o=this.toObject();delete o.objects;var f=new n.ActiveSelection([]);return f.set(o),f.type="activeSelection",l.remove(this),r.forEach(function(m){m.group=f,m.dirty=!0,l.add(m)}),f.canvas=l,f._objects=r,l._activeObject=f,f.setCoords(),f}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var r=!0;return this.forEachObject(function(l){l.setCoords(r)}),this},_calcBounds:function(r){for(var l=[],o=[],f,m,a,p=["tr","br","bl","tl"],v=0,b=this._objects.length,y,C=p.length;v<b;++v){for(f=this._objects[v],a=f.calcACoords(),y=0;y<C;y++)m=p[y],l.push(a[m].x),o.push(a[m].y);f.aCoords=a}this._getBounds(l,o,r)},_getBounds:function(r,l,o){var f=new n.Point(c(r),c(l)),m=new n.Point(h(r),h(l)),a=f.y||0,p=f.x||0,v=m.x-f.x||0,b=m.y-f.y||0;this.width=v,this.height=b,o||this.setPositionByOrigin({x:p,y:a},"left","top")},_toSVG:function(r){for(var l=["<g ","COMMON_PARTS",` >
`],o=0,f=this._objects.length;o<f;o++)l.push("		",this._objects[o].toSVG(r));return l.push(`</g>
`),l},getSvgStyles:function(){var r=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[r,this.getSvgFilter(),l].join("")},toClipPathSVG:function(r){for(var l=[],o=0,f=this._objects.length;o<f;o++)l.push("	",this._objects[o].toClipPathSVG(r));return this._createBaseClipPathSVGMarkup(l,{reviver:r})}}),n.Group.fromObject=function(r,l){var o=r.objects,f=n.util.object.clone(r,!0);if(delete f.objects,typeof o=="string"){n.loadSVGFromURL(o,function(m){var a=n.util.groupSVGElements(m,r,o),p=f.clipPath;delete f.clipPath,a.set(f),p?n.util.enlivenObjects([p],function(v){a.clipPath=v[0],l&&l(a)}):l&&l(a)});return}n.util.enlivenObjects(o,function(m){n.util.enlivenObjectEnlivables(r,f,function(){l&&l(new n.Group(m,f,!0))})})})}(s),function(u){var n=u.fabric||(u.fabric={});n.ActiveSelection||(n.ActiveSelection=n.util.createClass(n.Group,{type:"activeSelection",initialize:function(c,h){h=h||{},this._objects=c||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),n.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var h=n.Object.prototype.toObject.call(this),r=new n.Group([]);if(delete h.type,r.set(h),c.forEach(function(o){o.canvas.remove(o),o.group=r}),r._objects=c,!this.canvas)return r;var l=this.canvas;return l.add(r),l._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,h,r){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,h),r=r||{},typeof r.hasControls>"u"&&(r.hasControls=!1),r.forActiveSelection=!0;for(var l=0,o=this._objects.length;l<o;l++)this._objects[l]._renderControls(c,r);c.restore()}}),n.ActiveSelection.fromObject=function(c,h){n.util.enlivenObjects(c.objects,function(r){delete c.objects,h&&h(new n.ActiveSelection(r,c,!0))})})}(s),function(u){var n=t.util.object.extend;if(u.fabric||(u.fabric={}),u.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,h){h||(h={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",h),this._initElement(c,h)},getElement:function(){return this._element||{}},setElement:function(c,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(h),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var h=t.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){t.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var h=this.width/2,r=this.height/2;c.beginPath(),c.moveTo(-h,-r),c.lineTo(h,-r),c.lineTo(h,r),c.lineTo(-h,r),c.lineTo(-h,-r),c.closePath()}},toObject:function(c){var h=[];this.filters.forEach(function(l){l&&h.push(l.toObject())});var r=n(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],h=[],r,l=this._element,o=-this.width/2,f=-this.height/2,m="",a="";if(!l)return[];if(this.hasCrop()){var p=t.Object.__uid++;c.push('<clipPath id="imageCrop_'+p+`">
`,'	<rect x="'+o+'" y="'+f+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+p+')" '}if(this.imageSmoothing||(a='" image-rendering="optimizeSpeed'),h.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',f-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,a,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var v=this.fill;this.fill=null,r=["	<rect ",'x="',o,'" y="',f,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=v}return this.paintFirst!=="fill"?c=c.concat(r,h):c=c.concat(h,r),c},getSrc:function(c){var h=c?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(c,h,r){return t.util.loadImage(c,function(l,o){this.setElement(l,r),this._setWidthHeight(),h&&h(this,o)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,h=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),l=r.scaleX,o=r.scaleY,f=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||l>h&&o>h){this._element=f,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,this._lastScaleY=o;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var m=t.util.createCanvasElement(),a=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,p=f.width,v=f.height;m.width=p,m.height=v,this._element=m,this._lastScaleX=c.scaleX=l,this._lastScaleY=c.scaleY=o,t.filterBackend.applyFilters([c],f,p,v,this._element,a),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(f){return f&&!f.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,r=h.naturalWidth||h.width,l=h.naturalHeight||h.height;if(this._element===this._originalElement){var o=t.util.createCanvasElement();o.width=r,o.height=l,this._element=o,this._filteredEl=o}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,l),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(c,this._originalElement,r,l,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var h=this._element;if(h){var r=this._filterScalingX,l=this._filterScalingY,o=this.width,f=this.height,m=Math.min,a=Math.max,p=a(this.cropX,0),v=a(this.cropY,0),b=h.naturalWidth||h.width,y=h.naturalHeight||h.height,C=p*r,S=v*l,w=m(o*r,b-C),k=m(f*l,y-S),F=-o/2,V=-f/2,z=m(o,b/r-p),Y=m(f,y/l-v);h&&c.drawImage(h,C,S,w,k,F,V,z,Y)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,h){this.setElement(t.util.getById(c),h),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,h){c&&c.length?t.util.enlivenObjects(c,function(r){h&&h(r)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(c){c||(c={});var h=this.getElement();this.width=c.width||h.naturalWidth||h.width||0,this.height=c.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var c=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,r=this._element.height,l=1,o=1,f=0,m=0,a=0,p=0,v,b=this.width,y=this.height,C={width:b,height:y};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(l=o=t.util.findScaleToFit(this._element,C),v=(b-h*l)/2,c.alignX==="Min"&&(f=-v),c.alignX==="Max"&&(f=v),v=(y-r*o)/2,c.alignY==="Min"&&(m=-v),c.alignY==="Max"&&(m=v)),c.meetOrSlice==="slice"&&(l=o=t.util.findScaleToCover(this._element,C),v=h-b/l,c.alignX==="Mid"&&(a=v/2),c.alignX==="Max"&&(a=v),v=r-y/o,c.alignY==="Mid"&&(p=v/2),c.alignY==="Max"&&(p=v),h=b/l,r=y/o)):(l=b/h,o=y/r),{width:h,height:r,scaleX:l,scaleY:o,offsetLeft:f,offsetTop:m,cropX:a,cropY:p}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(c,h){var r=t.util.object.clone(c);t.util.loadImage(r.src,function(l,o){if(o){h&&h(null,!0);return}t.Image.prototype._initFilters.call(r,r.filters,function(f){r.filters=f||[],t.Image.prototype._initFilters.call(r,[r.resizeFilter],function(m){r.resizeFilter=m[0],t.util.enlivenObjectEnlivables(r,r,function(){var a=new t.Image(l,r);h(a,!1)})})})},null,r.crossOrigin)},t.Image.fromURL=function(c,h,r){t.util.loadImage(c,function(l,o){h&&h(new t.Image(l,r),o)},null,r&&r.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(c,h,r){var l=t.parseAttributes(c,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(l["xlink:href"],h,n(r?t.util.object.clone(r):{},l))}}(s),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var u=this.angle%360;return u>0?Math.round((u-1)/90)*90:Math.round(u/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(u){u=u||{};var n=function(){},c=u.onComplete||n,h=u.onChange||n,r=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){r.rotate(l),h()},onComplete:function(){r.setCoords(),c()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(u){return u.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(u){return u.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function u(c,h){var r="precision "+h+` float;
void main(){}`,l=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(l,r),c.compileShader(l),!!c.getShaderParameter(l,c.COMPILE_STATUS)}t.isWebglSupported=function(c){if(t.isLikelyNode)return!1;c=c||t.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),r=h.getContext("webgl")||h.getContext("experimental-webgl"),l=!1;if(r){t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),l=t.maxTextureSize>=c;for(var o=["highp","mediump","lowp"],f=0;f<3;f++)if(u(r,o[f])){t.webGlPrecision=o[f];break}}return this.isSupported=l,l},t.WebglFilterBackend=n;function n(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}n.prototype={tileSize:2048,resources:{},setupGLContext:function(c,h){this.dispose(),this.createWebGLCanvas(c,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,h)},chooseFastestCopyGLTo2DMethod:function(c,h){var r=typeof window.performance<"u",l;try{new ImageData(1,1),l=!0}catch{l=!1}var o=typeof ArrayBuffer<"u",f=typeof Uint8ClampedArray<"u";if(r&&l&&o&&f){var m=t.util.createCanvasElement(),a=new ArrayBuffer(c*h*4);if(t.forceGLPutImageData){this.imageBuffer=a,this.copyGLTo2D=_;return}var p={imageBuffer:a,destinationWidth:c,destinationHeight:h,targetCanvas:m},v,b,y;m.width=c,m.height=h,v=window.performance.now(),d.call(p,this.gl,p),b=window.performance.now()-v,v=window.performance.now(),_.call(p,this.gl,p),y=window.performance.now()-v,b>y?(this.imageBuffer=a,this.copyGLTo2D=_):this.copyGLTo2D=d}},createWebGLCanvas:function(c,h){var r=t.util.createCanvasElement();r.width=c,r.height=h;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=r.getContext("webgl",l);o||(o=r.getContext("experimental-webgl",l)),o&&(o.clearColor(0,0,0,0),this.canvas=r,this.gl=o)},applyFilters:function(c,h,r,l,o,f){var m=this.gl,a;f&&(a=this.getCachedTexture(f,h));var p={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:r,sourceHeight:l,destinationWidth:r,destinationHeight:l,context:m,sourceTexture:this.createTexture(m,r,l,!a&&h),targetTexture:this.createTexture(m,r,l),originalTexture:a||this.createTexture(m,r,l,!a&&h),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},v=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,v),c.forEach(function(b){b&&b.applyTo(p)}),g(p),this.copyGLTo2D(m,p),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(p.sourceTexture),m.deleteTexture(p.targetTexture),m.deleteFramebuffer(v),o.getContext("2d").setTransform(1,0,0,1,0,0),p},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,h,r,l,o){var f=c.createTexture();return c.bindTexture(c.TEXTURE_2D,f),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,o||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,o||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),l?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,l):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,h,r,0,c.RGBA,c.UNSIGNED_BYTE,null),f},getCachedTexture:function(c,h){if(this.textureCache[c])return this.textureCache[c];var r=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[c]=r,r},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:d,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,h={renderer:"",vendor:""};if(!c)return h;var r=c.getExtension("WEBGL_debug_renderer_info");if(r){var l=c.getParameter(r.UNMASKED_RENDERER_WEBGL),o=c.getParameter(r.UNMASKED_VENDOR_WEBGL);l&&(h.renderer=l.toLowerCase()),o&&(h.vendor=o.toLowerCase())}return this.gpuInfo=h,h}}}();function g(u){var n=u.targetCanvas,c=n.width,h=n.height,r=u.destinationWidth,l=u.destinationHeight;(c!==r||h!==l)&&(n.width=r,n.height=l)}function d(u,n){var c=u.canvas,h=n.targetCanvas,r=h.getContext("2d");r.translate(0,h.height),r.scale(1,-1);var l=c.height-h.height;r.drawImage(c,0,l,h.width,h.height,0,0,h.width,h.height)}function _(u,n){var c=n.targetCanvas,h=c.getContext("2d"),r=n.destinationWidth,l=n.destinationHeight,o=r*l*4,f=new Uint8Array(this.imageBuffer,0,o),m=new Uint8ClampedArray(this.imageBuffer,0,o);u.readPixels(0,0,r,l,u.RGBA,u.UNSIGNED_BYTE,f);var a=new ImageData(m,r,l);h.putImageData(a,0,0)}(function(){var u=function(){};t.Canvas2dFilterBackend=n;function n(){}n.prototype={evictCachesForKey:u,dispose:u,clearWebGLCaches:u,resources:{},applyFilters:function(c,h,r,l,o){var f=o.getContext("2d");f.drawImage(h,0,0,r,l);var m=f.getImageData(0,0,r,l),a=f.getImageData(0,0,r,l),p={sourceWidth:r,sourceHeight:l,imageData:m,originalEl:h,originalImageData:a,canvasEl:o,ctx:f,filterBackend:this};return c.forEach(function(v){v.applyTo(p)}),(p.imageData.width!==r||p.imageData.height!==l)&&(o.width=p.imageData.width,o.height=p.imageData.height),f.putImageData(p.imageData,0,0),p}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(u){u&&this.setOptions(u)},setOptions:function(u){for(var n in u)this[n]=u[n]},createProgram:function(u,n,c){n=n||this.fragmentSource,c=c||this.vertexSource,t.webGlPrecision!=="highp"&&(n=n.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var h=u.createShader(u.VERTEX_SHADER);if(u.shaderSource(h,c),u.compileShader(h),!u.getShaderParameter(h,u.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+u.getShaderInfoLog(h));var r=u.createShader(u.FRAGMENT_SHADER);if(u.shaderSource(r,n),u.compileShader(r),!u.getShaderParameter(r,u.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+u.getShaderInfoLog(r));var l=u.createProgram();if(u.attachShader(l,h),u.attachShader(l,r),u.linkProgram(l),!u.getProgramParameter(l,u.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+u.getProgramInfoLog(l));var o=this.getAttributeLocations(u,l),f=this.getUniformLocations(u,l)||{};return f.uStepW=u.getUniformLocation(l,"uStepW"),f.uStepH=u.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:o,uniformLocations:f}},getAttributeLocations:function(u,n){return{aPosition:u.getAttribLocation(n,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(u,n,c){var h=n.aPosition,r=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,r),u.enableVertexAttribArray(h),u.vertexAttribPointer(h,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,c,u.STATIC_DRAW)},_setupFrameBuffer:function(u){var n=u.context,c,h;u.passes>1?(c=u.destinationWidth,h=u.destinationHeight,(u.sourceWidth!==c||u.sourceHeight!==h)&&(n.deleteTexture(u.targetTexture),u.targetTexture=u.filterBackend.createTexture(n,c,h)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,u.targetTexture,0)):(n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish())},_swapTextures:function(u){u.passes--,u.pass++;var n=u.targetTexture;u.targetTexture=u.sourceTexture,u.sourceTexture=n},isNeutralState:function(){var u=this.mainParameter,n=t.Image.filters[this.type].prototype;if(u)if(Array.isArray(n[u])){for(var c=n[u].length;c--;)if(this[u][c]!==n[u][c])return!1;return!0}else return n[u]===this[u];else return!1},applyTo:function(u){u.webgl?(this._setupFrameBuffer(u),this.applyToWebGL(u),this._swapTextures(u)):this.applyTo2d(u)},retrieveShader:function(u){return u.programCache.hasOwnProperty(this.type)||(u.programCache[this.type]=this.createProgram(u.context)),u.programCache[this.type]},applyToWebGL:function(u){var n=u.context,c=this.retrieveShader(u);u.pass===0&&u.originalTexture?n.bindTexture(n.TEXTURE_2D,u.originalTexture):n.bindTexture(n.TEXTURE_2D,u.sourceTexture),n.useProgram(c.program),this.sendAttributeData(n,c.attributeLocations,u.aPosition),n.uniform1f(c.uniformLocations.uStepW,1/u.sourceWidth),n.uniform1f(c.uniformLocations.uStepH,1/u.sourceHeight),this.sendUniformData(n,c.uniformLocations),n.viewport(0,0,u.destinationWidth,u.destinationHeight),n.drawArrays(n.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(u,n,c){u.activeTexture(c),u.bindTexture(u.TEXTURE_2D,n),u.activeTexture(u.TEXTURE0)},unbindAdditionalTexture:function(u,n){u.activeTexture(n),u.bindTexture(u.TEXTURE_2D,null),u.activeTexture(u.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(u){this[this.mainParameter]=u},sendUniformData:function(){},createHelpLayer:function(u){if(!u.helpLayer){var n=document.createElement("canvas");n.width=u.sourceWidth,n.height=u.sourceHeight,u.helpLayer=n}},toObject:function(){var u={type:this.type},n=this.mainParameter;return n&&(u[n]=this[n]),u},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(u,n){var c=new t.Image.filters[u.type](u);return n&&n(c),c},function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.ColorMatrix=h(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(r){this.callSuper("initialize",r),this.matrix=this.matrix.slice(0)},applyTo2d:function(r){var l=r.imageData,o=l.data,f=o.length,m=this.matrix,a,p,v,b,y,C=this.colorsOnly;for(y=0;y<f;y+=4)a=o[y],p=o[y+1],v=o[y+2],C?(o[y]=a*m[0]+p*m[1]+v*m[2]+m[4]*255,o[y+1]=a*m[5]+p*m[6]+v*m[7]+m[9]*255,o[y+2]=a*m[10]+p*m[11]+v*m[12]+m[14]*255):(b=o[y+3],o[y]=a*m[0]+p*m[1]+v*m[2]+b*m[3]+m[4]*255,o[y+1]=a*m[5]+p*m[6]+v*m[7]+b*m[8]+m[9]*255,o[y+2]=a*m[10]+p*m[11]+v*m[12]+b*m[13]+m[14]*255,o[y+3]=a*m[15]+p*m[16]+v*m[17]+b*m[18]+m[19]*255)},getUniformLocations:function(r,l){return{uColorMatrix:r.getUniformLocation(l,"uColorMatrix"),uConstants:r.getUniformLocation(l,"uConstants")}},sendUniformData:function(r,l){var o=this.matrix,f=[o[0],o[1],o[2],o[3],o[5],o[6],o[7],o[8],o[10],o[11],o[12],o[13],o[15],o[16],o[17],o[18]],m=[o[4],o[9],o[14],o[19]];r.uniformMatrix4fv(l.uColorMatrix,!1,f),r.uniform4fv(l.uConstants,m)}}),n.Image.filters.ColorMatrix.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.Brightness=h(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(r){if(this.brightness!==0){var l=r.imageData,o=l.data,f,m=o.length,a=Math.round(this.brightness*255);for(f=0;f<m;f+=4)o[f]=o[f]+a,o[f+1]=o[f+1]+a,o[f+2]=o[f+2]+a}},getUniformLocations:function(r,l){return{uBrightness:r.getUniformLocation(l,"uBrightness")}},sendUniformData:function(r,l){r.uniform1f(l.uBrightness,this.brightness)}}),n.Image.filters.Brightness.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.util.object.extend,h=n.Image.filters,r=n.util.createClass;h.Convolute=r(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var o=Math.sqrt(this.matrix.length),f=this.type+"_"+o+"_"+(this.opaque?1:0),m=this.fragmentSource[f];return l.programCache.hasOwnProperty(f)||(l.programCache[f]=this.createProgram(l.context,m)),l.programCache[f]},applyTo2d:function(l){var o=l.imageData,f=o.data,m=this.matrix,a=Math.round(Math.sqrt(m.length)),p=Math.floor(a/2),v=o.width,b=o.height,y=l.ctx.createImageData(v,b),C=y.data,S=this.opaque?1:0,w,k,F,V,z,Y,et,H,Q,ct,G,lt,T;for(G=0;G<b;G++)for(ct=0;ct<v;ct++){for(z=(G*v+ct)*4,w=0,k=0,F=0,V=0,T=0;T<a;T++)for(lt=0;lt<a;lt++)et=G+T-p,Y=ct+lt-p,!(et<0||et>=b||Y<0||Y>=v)&&(H=(et*v+Y)*4,Q=m[T*a+lt],w+=f[H]*Q,k+=f[H+1]*Q,F+=f[H+2]*Q,S||(V+=f[H+3]*Q));C[z]=w,C[z+1]=k,C[z+2]=F,S?C[z+3]=f[z+3]:C[z+3]=V}l.imageData=y},getUniformLocations:function(l,o){return{uMatrix:l.getUniformLocation(o,"uMatrix"),uOpaque:l.getUniformLocation(o,"uOpaque"),uHalfSize:l.getUniformLocation(o,"uHalfSize"),uSize:l.getUniformLocation(o,"uSize")}},sendUniformData:function(l,o){l.uniform1fv(o.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),n.Image.filters.Convolute.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.Grayscale=h(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(r){var l=r.imageData,o=l.data,f,m=o.length,a,p=this.mode;for(f=0;f<m;f+=4)p==="average"?a=(o[f]+o[f+1]+o[f+2])/3:p==="lightness"?a=(Math.min(o[f],o[f+1],o[f+2])+Math.max(o[f],o[f+1],o[f+2]))/2:p==="luminosity"&&(a=.21*o[f]+.72*o[f+1]+.07*o[f+2]),o[f]=a,o[f+1]=a,o[f+2]=a},retrieveShader:function(r){var l=this.type+"_"+this.mode;if(!r.programCache.hasOwnProperty(l)){var o=this.fragmentSource[this.mode];r.programCache[l]=this.createProgram(r.context,o)}return r.programCache[l]},getUniformLocations:function(r,l){return{uMode:r.getUniformLocation(l,"uMode")}},sendUniformData:function(r,l){var o=1;r.uniform1i(l.uMode,o)},isNeutralState:function(){return!1}}),n.Image.filters.Grayscale.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.Invert=h(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(r){var l=r.imageData,o=l.data,f,m=o.length;for(f=0;f<m;f+=4)o[f]=255-o[f],o[f+1]=255-o[f+1],o[f+2]=255-o[f+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(r,l){return{uInvert:r.getUniformLocation(l,"uInvert")}},sendUniformData:function(r,l){r.uniform1i(l.uInvert,this.invert)}}),n.Image.filters.Invert.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.util.object.extend,h=n.Image.filters,r=n.util.createClass;h.Noise=r(h.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var o=l.imageData,f=o.data,m,a=f.length,p=this.noise,v;for(m=0,a=f.length;m<a;m+=4)v=(.5-Math.random())*p,f[m]+=v,f[m+1]+=v,f[m+2]+=v}},getUniformLocations:function(l,o){return{uNoise:l.getUniformLocation(o,"uNoise"),uSeed:l.getUniformLocation(o,"uSeed")}},sendUniformData:function(l,o){l.uniform1f(o.uNoise,this.noise/255),l.uniform1f(o.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),n.Image.filters.Noise.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.Pixelate=h(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(r){var l=r.imageData,o=l.data,f=l.height,m=l.width,a,p,v,b,y,C,S,w,k,F,V;for(p=0;p<f;p+=this.blocksize)for(v=0;v<m;v+=this.blocksize)for(a=p*4*m+v*4,b=o[a],y=o[a+1],C=o[a+2],S=o[a+3],F=Math.min(p+this.blocksize,f),V=Math.min(v+this.blocksize,m),w=p;w<F;w++)for(k=v;k<V;k++)a=w*4*m+k*4,o[a]=b,o[a+1]=y,o[a+2]=C,o[a+3]=S},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(r,l){return{uBlocksize:r.getUniformLocation(l,"uBlocksize"),uStepW:r.getUniformLocation(l,"uStepW"),uStepH:r.getUniformLocation(l,"uStepH")}},sendUniformData:function(r,l){r.uniform1f(l.uBlocksize,this.blocksize)}}),n.Image.filters.Pixelate.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.util.object.extend,h=n.Image.filters,r=n.util.createClass;h.RemoveColor=r(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var o=l.imageData,f=o.data,m,a=this.distance*255,p,v,b,y=new n.Color(this.color).getSource(),C=[y[0]-a,y[1]-a,y[2]-a],S=[y[0]+a,y[1]+a,y[2]+a];for(m=0;m<f.length;m+=4)p=f[m],v=f[m+1],b=f[m+2],p>C[0]&&v>C[1]&&b>C[2]&&p<S[0]&&v<S[1]&&b<S[2]&&(f[m+3]=0)},getUniformLocations:function(l,o){return{uLow:l.getUniformLocation(o,"uLow"),uHigh:l.getUniformLocation(o,"uHigh")}},sendUniformData:function(l,o){var f=new n.Color(this.color).getSource(),m=parseFloat(this.distance),a=[0+f[0]/255-m,0+f[1]/255-m,0+f[2]/255-m,1],p=[f[0]/255+m,f[1]/255+m,f[2]/255+m,1];l.uniform4fv(o.uLow,a),l.uniform4fv(o.uHigh,p)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),n.Image.filters.RemoveColor.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in r)c[l]=h(c.ColorMatrix,{type:l,matrix:r[l],mainParameter:!1,colorsOnly:!0}),n.Image.filters[l].fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric,c=n.Image.filters,h=n.util.createClass;c.BlendColor=h(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(r){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[r]+`}
}`},retrieveShader:function(r){var l=this.type+"_"+this.mode,o;return r.programCache.hasOwnProperty(l)||(o=this.buildSource(this.mode),r.programCache[l]=this.createProgram(r.context,o)),r.programCache[l]},applyTo2d:function(r){var l=r.imageData,o=l.data,f=o.length,m,a,p,v,b,y,C,S=1-this.alpha;C=new n.Color(this.color).getSource(),m=C[0]*this.alpha,a=C[1]*this.alpha,p=C[2]*this.alpha;for(var w=0;w<f;w+=4)switch(v=o[w],b=o[w+1],y=o[w+2],this.mode){case"multiply":o[w]=v*m/255,o[w+1]=b*a/255,o[w+2]=y*p/255;break;case"screen":o[w]=255-(255-v)*(255-m)/255,o[w+1]=255-(255-b)*(255-a)/255,o[w+2]=255-(255-y)*(255-p)/255;break;case"add":o[w]=v+m,o[w+1]=b+a,o[w+2]=y+p;break;case"diff":case"difference":o[w]=Math.abs(v-m),o[w+1]=Math.abs(b-a),o[w+2]=Math.abs(y-p);break;case"subtract":o[w]=v-m,o[w+1]=b-a,o[w+2]=y-p;break;case"darken":o[w]=Math.min(v,m),o[w+1]=Math.min(b,a),o[w+2]=Math.min(y,p);break;case"lighten":o[w]=Math.max(v,m),o[w+1]=Math.max(b,a),o[w+2]=Math.max(y,p);break;case"overlay":o[w]=m<128?2*v*m/255:255-2*(255-v)*(255-m)/255,o[w+1]=a<128?2*b*a/255:255-2*(255-b)*(255-a)/255,o[w+2]=p<128?2*y*p/255:255-2*(255-y)*(255-p)/255;break;case"exclusion":o[w]=m+v-2*m*v/255,o[w+1]=a+b-2*a*b/255,o[w+2]=p+y-2*p*y/255;break;case"tint":o[w]=m+v*S,o[w+1]=a+b*S,o[w+2]=p+y*S}},getUniformLocations:function(r,l){return{uColor:r.getUniformLocation(l,"uColor")}},sendUniformData:function(r,l){var o=new n.Color(this.color).getSource();o[0]=this.alpha*o[0]/255,o[1]=this.alpha*o[1]/255,o[2]=this.alpha*o[2]/255,o[3]=this.alpha,r.uniform4fv(l.uColor,o)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendColor.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric,c=n.Image.filters,h=n.util.createClass;c.BlendImage=h(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(r){var l=this.type+"_"+this.mode,o=this.fragmentSource[this.mode];return r.programCache.hasOwnProperty(l)||(r.programCache[l]=this.createProgram(r.context,o)),r.programCache[l]},applyToWebGL:function(r){var l=r.context,o=this.createTexture(r.filterBackend,this.image);this.bindAdditionalTexture(l,o,l.TEXTURE1),this.callSuper("applyToWebGL",r),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(r,l){return r.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var r=this.image,l=r._element.width,o=r._element.height;return[1/r.scaleX,0,0,0,1/r.scaleY,0,-r.left/l,-r.top/o,1]},applyTo2d:function(r){var l=r.imageData,o=r.filterBackend.resources,f=l.data,m=f.length,a=l.width,p=l.height,v,b,y,C,S,w,k,F,V,z,Y=this.image,et;o.blendImage||(o.blendImage=n.util.createCanvasElement()),V=o.blendImage,z=V.getContext("2d"),V.width!==a||V.height!==p?(V.width=a,V.height=p):z.clearRect(0,0,a,p),z.setTransform(Y.scaleX,0,0,Y.scaleY,Y.left,Y.top),z.drawImage(Y._element,0,0,a,p),et=z.getImageData(0,0,a,p).data;for(var H=0;H<m;H+=4)switch(S=f[H],w=f[H+1],k=f[H+2],F=f[H+3],v=et[H],b=et[H+1],y=et[H+2],C=et[H+3],this.mode){case"multiply":f[H]=S*v/255,f[H+1]=w*b/255,f[H+2]=k*y/255,f[H+3]=F*C/255;break;case"mask":f[H+3]=C;break}},getUniformLocations:function(r,l){return{uTransformMatrix:r.getUniformLocation(l,"uTransformMatrix"),uImage:r.getUniformLocation(l,"uImage")}},sendUniformData:function(r,l){var o=this.calculateMatrix();r.uniform1i(l.uImage,1),r.uniformMatrix3fv(l.uTransformMatrix,!1,o)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendImage.fromObject=function(r,l){n.Image.fromObject(r.image,function(o){var f=n.util.object.clone(r);f.image=o,l(new n.Image.filters.BlendImage(f))})}}(s),function(u){var n=u.fabric||(u.fabric={}),c=Math.pow,h=Math.floor,r=Math.sqrt,l=Math.abs,o=Math.round,f=Math.sin,m=Math.ceil,a=n.Image.filters,p=n.util.createClass;a.Resize=p(a.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(v,b){return{uDelta:v.getUniformLocation(b,"uDelta"),uTaps:v.getUniformLocation(b,"uTaps")}},sendUniformData:function(v,b){v.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),v.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(v){var b=this.getFilterWindow(),y=this.type+"_"+b;if(!v.programCache.hasOwnProperty(y)){var C=this.generateShader(b);v.programCache[y]=this.createProgram(v.context,C)}return v.programCache[y]},getFilterWindow:function(){var v=this.tempScale;return Math.ceil(this.lanczosLobes/v)},getTaps:function(){for(var v=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,y=this.getFilterWindow(),C=new Array(y),S=1;S<=y;S++)C[S-1]=v(S*b);return C},generateShader:function(C){for(var b=new Array(C),y=this.fragmentSourceTOP,C,S=1;S<=C;S++)b[S-1]=S+".0 * uDelta";return y+="uniform float uTaps["+C+`];
`,y+=`void main() {
`,y+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,y+=`  float sum = 1.0;
`,b.forEach(function(w,k){y+="  color += texture2D(uTexture, vTexCoord + "+w+") * uTaps["+k+`];
`,y+="  color += texture2D(uTexture, vTexCoord - "+w+") * uTaps["+k+`];
`,y+="  sum += 2.0 * uTaps["+k+`];
`}),y+=`  gl_FragColor = color / sum;
`,y+="}",y},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(v){v.webgl?(v.passes++,this.width=v.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=v.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),v.destinationWidth=this.dW,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceWidth=v.destinationWidth,this.height=v.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),v.destinationHeight=this.dH,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceHeight=v.destinationHeight):this.applyTo2d(v)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(v){return function(b){if(b>=v||b<=-v)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var y=b/v;return f(b)/b*f(y)/y}},applyTo2d:function(v){var b=v.imageData,y=this.scaleX,C=this.scaleY;this.rcpScaleX=1/y,this.rcpScaleY=1/C;var S=b.width,w=b.height,k=o(S*y),F=o(w*C),V;this.resizeType==="sliceHack"?V=this.sliceByTwo(v,S,w,k,F):this.resizeType==="hermite"?V=this.hermiteFastResize(v,S,w,k,F):this.resizeType==="bilinear"?V=this.bilinearFiltering(v,S,w,k,F):this.resizeType==="lanczos"&&(V=this.lanczosResize(v,S,w,k,F)),v.imageData=V},sliceByTwo:function(v,b,y,C,S){var w=v.imageData,k=.5,F=!1,V=!1,z=b*k,Y=y*k,et=n.filterBackend.resources,H,Q,ct=0,G=0,lt=b,T=0;for(et.sliceByTwo||(et.sliceByTwo=document.createElement("canvas")),H=et.sliceByTwo,(H.width<b*1.5||H.height<y)&&(H.width=b*1.5,H.height=y),Q=H.getContext("2d"),Q.clearRect(0,0,b*1.5,y),Q.putImageData(w,0,0),C=h(C),S=h(S);!F||!V;)b=z,y=Y,C<h(z*k)?z=h(z*k):(z=C,F=!0),S<h(Y*k)?Y=h(Y*k):(Y=S,V=!0),Q.drawImage(H,ct,G,b,y,lt,T,z,Y),ct=lt,G=T,T+=Y;return Q.getImageData(ct,G,C,S)},lanczosResize:function(v,b,y,C,S){function w(D){var E,U,x,O,I,W,Z,q,nt,at,ht;for(T.x=(D+.5)*Y,L.x=h(T.x),E=0;E<S;E++){for(T.y=(E+.5)*et,L.y=h(T.y),I=0,W=0,Z=0,q=0,nt=0,U=L.x-ct;U<=L.x+ct;U++)if(!(U<0||U>=b)){at=h(1e3*l(U-T.x)),lt[at]||(lt[at]={});for(var J=L.y-G;J<=L.y+G;J++)J<0||J>=y||(ht=h(1e3*l(J-T.y)),lt[at][ht]||(lt[at][ht]=z(r(c(at*H,2)+c(ht*Q,2))/1e3)),x=lt[at][ht],x>0&&(O=(J*b+U)*4,I+=x,W+=x*k[O],Z+=x*k[O+1],q+=x*k[O+2],nt+=x*k[O+3]))}O=(E*C+D)*4,V[O]=W/I,V[O+1]=Z/I,V[O+2]=q/I,V[O+3]=nt/I}return++D<C?w(D):F}var k=v.imageData.data,F=v.ctx.createImageData(C,S),V=F.data,z=this.lanczosCreate(this.lanczosLobes),Y=this.rcpScaleX,et=this.rcpScaleY,H=2/this.rcpScaleX,Q=2/this.rcpScaleY,ct=m(Y*this.lanczosLobes/2),G=m(et*this.lanczosLobes/2),lt={},T={},L={};return w(0)},bilinearFiltering:function(v,b,y,C,S){var w,k,F,V,z,Y,et,H,Q,ct,G,lt,T=0,L,D=this.rcpScaleX,E=this.rcpScaleY,U=4*(b-1),x=v.imageData,O=x.data,I=v.ctx.createImageData(C,S),W=I.data;for(et=0;et<S;et++)for(H=0;H<C;H++)for(z=h(D*H),Y=h(E*et),Q=D*H-z,ct=E*et-Y,L=4*(Y*b+z),G=0;G<4;G++)w=O[L+G],k=O[L+4+G],F=O[L+U+G],V=O[L+U+4+G],lt=w*(1-Q)*(1-ct)+k*Q*(1-ct)+F*ct*(1-Q)+V*Q*ct,W[T++]=lt;return I},hermiteFastResize:function(v,b,y,C,S){for(var w=this.rcpScaleX,k=this.rcpScaleY,F=m(w/2),V=m(k/2),z=v.imageData,Y=z.data,et=v.ctx.createImageData(C,S),H=et.data,Q=0;Q<S;Q++)for(var ct=0;ct<C;ct++){for(var G=(ct+Q*C)*4,lt=0,T=0,L=0,D=0,E=0,U=0,x=0,O=(Q+.5)*k,I=h(Q*k);I<(Q+1)*k;I++)for(var W=l(O-(I+.5))/V,Z=(ct+.5)*w,q=W*W,nt=h(ct*w);nt<(ct+1)*w;nt++){var at=l(Z-(nt+.5))/F,ht=r(q+at*at);ht>1&&ht<-1||(lt=2*ht*ht*ht-3*ht*ht+1,lt>0&&(at=4*(nt+I*b),x+=lt*Y[at+3],L+=lt,Y[at+3]<255&&(lt=lt*Y[at+3]/250),D+=lt*Y[at],E+=lt*Y[at+1],U+=lt*Y[at+2],T+=lt))}H[G]=D/T,H[G+1]=E/T,H[G+2]=U/T,H[G+3]=x/L}return et},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),n.Image.filters.Resize.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.Contrast=h(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(r){if(this.contrast!==0){var l=r.imageData,o,m,f=l.data,m=f.length,a=Math.floor(this.contrast*255),p=259*(a+255)/(255*(259-a));for(o=0;o<m;o+=4)f[o]=p*(f[o]-128)+128,f[o+1]=p*(f[o+1]-128)+128,f[o+2]=p*(f[o+2]-128)+128}},getUniformLocations:function(r,l){return{uContrast:r.getUniformLocation(l,"uContrast")}},sendUniformData:function(r,l){r.uniform1f(l.uContrast,this.contrast)}}),n.Image.filters.Contrast.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.Saturation=h(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(r){if(this.saturation!==0){var l=r.imageData,o=l.data,f=o.length,m=-this.saturation,a,p;for(a=0;a<f;a+=4)p=Math.max(o[a],o[a+1],o[a+2]),o[a]+=p!==o[a]?(p-o[a])*m:0,o[a+1]+=p!==o[a+1]?(p-o[a+1])*m:0,o[a+2]+=p!==o[a+2]?(p-o[a+2])*m:0}},getUniformLocations:function(r,l){return{uSaturation:r.getUniformLocation(l,"uSaturation")}},sendUniformData:function(r,l){r.uniform1f(l.uSaturation,-this.saturation)}}),n.Image.filters.Saturation.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.Vibrance=h(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(r){if(this.vibrance!==0){var l=r.imageData,o=l.data,f=o.length,m=-this.vibrance,a,p,v,b;for(a=0;a<f;a+=4)p=Math.max(o[a],o[a+1],o[a+2]),v=(o[a]+o[a+1]+o[a+2])/3,b=Math.abs(p-v)*2/255*m,o[a]+=p!==o[a]?(p-o[a])*b:0,o[a+1]+=p!==o[a+1]?(p-o[a+1])*b:0,o[a+2]+=p!==o[a+2]?(p-o[a+2])*b:0}},getUniformLocations:function(r,l){return{uVibrance:r.getUniformLocation(l,"uVibrance")}},sendUniformData:function(r,l){r.uniform1f(l.uVibrance,-this.vibrance)}}),n.Image.filters.Vibrance.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.Blur=h(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(r){r.webgl?(this.aspectRatio=r.sourceWidth/r.sourceHeight,r.passes++,this._setupFrameBuffer(r),this.horizontal=!0,this.applyToWebGL(r),this._swapTextures(r),this._setupFrameBuffer(r),this.horizontal=!1,this.applyToWebGL(r),this._swapTextures(r)):this.applyTo2d(r)},applyTo2d:function(r){r.imageData=this.simpleBlur(r)},simpleBlur:function(r){var l=r.filterBackend.resources,o,f,m=r.imageData.width,a=r.imageData.height;l.blurLayer1||(l.blurLayer1=n.util.createCanvasElement(),l.blurLayer2=n.util.createCanvasElement()),o=l.blurLayer1,f=l.blurLayer2,(o.width!==m||o.height!==a)&&(f.width=o.width=m,f.height=o.height=a);var p=o.getContext("2d"),v=f.getContext("2d"),b=15,y,C,S,w,k=this.blur*.06*.5;for(p.putImageData(r.imageData,0,0),v.clearRect(0,0,m,a),w=-b;w<=b;w++)y=(Math.random()-.5)/4,C=w/b,S=k*C*m+y,v.globalAlpha=1-Math.abs(C),v.drawImage(o,S,y),p.drawImage(f,0,0),v.globalAlpha=1,v.clearRect(0,0,f.width,f.height);for(w=-b;w<=b;w++)y=(Math.random()-.5)/4,C=w/b,S=k*C*a+y,v.globalAlpha=1-Math.abs(C),v.drawImage(o,y,S),p.drawImage(f,0,0),v.globalAlpha=1,v.clearRect(0,0,f.width,f.height);r.ctx.drawImage(o,0,0);var F=r.ctx.getImageData(0,0,o.width,o.height);return p.globalAlpha=1,p.clearRect(0,0,o.width,o.height),F},getUniformLocations:function(r,l){return{delta:r.getUniformLocation(l,"uDelta")}},sendUniformData:function(r,l){var o=this.chooseRightDelta();r.uniform2fv(l.delta,o)},chooseRightDelta:function(){var r=1,l=[0,0],o;return this.horizontal?this.aspectRatio>1&&(r=1/this.aspectRatio):this.aspectRatio<1&&(r=this.aspectRatio),o=r*this.blur*.12,this.horizontal?l[0]=o:l[1]=o,l}}),c.Blur.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.Gamma=h(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(r){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,r)},applyTo2d:function(r){var l=r.imageData,o=l.data,f=this.gamma,m=o.length,a=1/f[0],p=1/f[1],v=1/f[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,m=256;b<m;b++)this.rVals[b]=Math.pow(b/255,a)*255,this.gVals[b]=Math.pow(b/255,p)*255,this.bVals[b]=Math.pow(b/255,v)*255;for(b=0,m=o.length;b<m;b+=4)o[b]=this.rVals[o[b]],o[b+1]=this.gVals[o[b+1]],o[b+2]=this.bVals[o[b+2]]},getUniformLocations:function(r,l){return{uGamma:r.getUniformLocation(l,"uGamma")}},sendUniformData:function(r,l){r.uniform3fv(l.uGamma,this.gamma)}}),n.Image.filters.Gamma.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.Composed=h(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(r){this.callSuper("initialize",r),this.subFilters=this.subFilters.slice(0)},applyTo:function(r){r.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(r)})},toObject:function(){return n.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(r){return r.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(r){return!r.isNeutralState()})}}),n.Image.filters.Composed.fromObject=function(r,l){var o=r.subFilters||[],f=o.map(function(a){return new n.Image.filters[a.type](a)}),m=new n.Image.filters.Composed({subFilters:f});return l&&l(m),m}}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.Image.filters,h=n.util.createClass;c.HueRotation=h(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var r=this.rotation*Math.PI,l=n.util.cos(r),o=n.util.sin(r),f=1/3,m=Math.sqrt(f)*o,a=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+a/3,this.matrix[1]=f*a-m,this.matrix[2]=f*a+m,this.matrix[5]=f*a+m,this.matrix[6]=l+f*a,this.matrix[7]=f*a-m,this.matrix[10]=f*a-m,this.matrix[11]=f*a+m,this.matrix[12]=l+f*a},isNeutralState:function(r){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,r)},applyTo:function(r){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,r)}}),n.Image.filters.HueRotation.fromObject=n.Image.filters.BaseFilter.fromObject}(s),function(u){var n=u.fabric||(u.fabric={}),c=n.util.object.clone;if(n.Text){n.warn("fabric.Text is already defined");return}var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:n.Object.prototype.stateProperties.concat(h),cacheProperties:n.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(r,l){this.styles=l?l.styles||{}:{},this.text=r,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var r=this.path;r&&(r.segmentsInfo=n.util.getPathSegmentsInfo(r.path))},getMeasuringContext:function(){return n._measuringContext||(n._measuringContext=this.canvas&&this.canvas.contextCache||n.util.createCanvasElement().getContext("2d")),n._measuringContext},_splitText:function(){var r=this._splitTextIntoLines(this.text);return this.textLines=r.lines,this._textLines=r.graphemeLines,this._unwrappedTextLines=r._unwrappedLines,this._text=r.graphemeText,r},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var r,l,o,f,m,a,p,v=0,b=this._textLines.length;v<b;v++)if(!(this.textAlign!=="justify"&&(v===b-1||this.isEndOfWrapping(v)))&&(f=0,m=this._textLines[v],l=this.getLineWidth(v),l<this.width&&(p=this.textLines[v].match(this._reSpacesAndTabs)))){o=p.length,r=(this.width-l)/o;for(var y=0,C=m.length;y<=C;y++)a=this.__charBounds[v][y],this._reSpaceAndTab.test(m[y])?(a.width+=r,a.kernedWidth+=r,a.left+=f,f+=r):a.left+=f}},isEndOfWrapping:function(r){return r===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var r=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return r.width+=l*r.zoomX,r.height+=l*r.zoomY,r},_render:function(r){var l=this.path;l&&!l.isNotVisible()&&l._render(r),this._setTextStyles(r),this._renderTextLinesBackground(r),this._renderTextDecoration(r,"underline"),this._renderText(r),this._renderTextDecoration(r,"overline"),this._renderTextDecoration(r,"linethrough")},_renderText:function(r){this.paintFirst==="stroke"?(this._renderTextStroke(r),this._renderTextFill(r)):(this._renderTextFill(r),this._renderTextStroke(r))},_setTextStyles:function(r,l,o){if(r.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":r.textBaseline="middle";break;case"ascender":r.textBaseline="top";break;case"descender":r.textBaseline="bottom";break}r.font=this._getFontDeclaration(l,o)},calcTextWidth:function(){for(var r=this.getLineWidth(0),l=1,o=this._textLines.length;l<o;l++){var f=this.getLineWidth(l);f>r&&(r=f)}return r},_renderTextLine:function(r,l,o,f,m,a){this._renderChars(r,l,o,f,m,a)},_renderTextLinesBackground:function(r){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var l,o,f=r.fillStyle,m,a,p=this._getLeftOffset(),v=this._getTopOffset(),b=0,y=0,C,S,w=this.path,k,F=0,V=this._textLines.length;F<V;F++){if(l=this.getHeightOfLine(F),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",F)){v+=l;continue}m=this._textLines[F],o=this._getLineLeftOffset(F),y=0,b=0,a=this.getValueOfPropertyAt(F,0,"textBackgroundColor");for(var z=0,Y=m.length;z<Y;z++)C=this.__charBounds[F][z],S=this.getValueOfPropertyAt(F,z,"textBackgroundColor"),w?(r.save(),r.translate(C.renderLeft,C.renderTop),r.rotate(C.angle),r.fillStyle=S,S&&r.fillRect(-C.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),C.width,l/this.lineHeight),r.restore()):S!==a?(k=p+o+b,this.direction==="rtl"&&(k=this.width-k-y),r.fillStyle=a,a&&r.fillRect(k,v,y,l/this.lineHeight),b=C.left,y=C.width,a=S):y+=C.kernedWidth;S&&!w&&(k=p+o+b,this.direction==="rtl"&&(k=this.width-k-y),r.fillStyle=S,r.fillRect(k,v,y,l/this.lineHeight)),v+=l}r.fillStyle=f,this._removeShadow(r)}},getFontCache:function(r){var l=r.fontFamily.toLowerCase();n.charWidthsCache[l]||(n.charWidthsCache[l]={});var o=n.charWidthsCache[l],f=r.fontStyle.toLowerCase()+"_"+(r.fontWeight+"").toLowerCase();return o[f]||(o[f]={}),o[f]},_measureChar:function(r,l,o,f){var m=this.getFontCache(l),a=this._getFontDeclaration(l),p=this._getFontDeclaration(f),v=o+r,b=a===p,y,C,S,w=l.fontSize/this.CACHE_FONT_SIZE,k;if(o&&m[o]!==void 0&&(S=m[o]),m[r]!==void 0&&(k=y=m[r]),b&&m[v]!==void 0&&(C=m[v],k=C-S),y===void 0||S===void 0||C===void 0){var F=this.getMeasuringContext();this._setTextStyles(F,l,!0)}return y===void 0&&(k=y=F.measureText(r).width,m[r]=y),S===void 0&&b&&o&&(S=F.measureText(o).width,m[o]=S),b&&C===void 0&&(C=F.measureText(v).width,m[v]=C,k=C-S),{width:y*w,kernedWidth:k*w}},getHeightOfChar:function(r,l){return this.getValueOfPropertyAt(r,l,"fontSize")},measureLine:function(r){var l=this._measureLine(r);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(r){var l=0,o,f,m=this._textLines[r],a,p,v=0,b=new Array(m.length),y=0,C,S,w=this.path,k=this.pathSide==="right";for(this.__charBounds[r]=b,o=0;o<m.length;o++)f=m[o],p=this._getGraphemeBox(f,r,o,a),b[o]=p,l+=p.kernedWidth,a=f;if(b[o]={left:p?p.left+p.width:0,width:0,kernedWidth:0,height:this.fontSize},w){switch(S=w.segmentsInfo[w.segmentsInfo.length-1].length,C=n.util.getPointOnPath(w.path,0,w.segmentsInfo),C.x+=w.pathOffset.x,C.y+=w.pathOffset.y,this.textAlign){case"left":y=k?S-l:0;break;case"center":y=(S-l)/2;break;case"right":y=k?0:S-l;break}for(y+=this.pathStartOffset*(k?-1:1),o=k?m.length-1:0;k?o>=0:o<m.length;k?o--:o++)p=b[o],y>S?y%=S:y<0&&(y+=S),this._setGraphemeOnPath(y,p,C),y+=p.kernedWidth}return{width:l,numOfSpaces:v}},_setGraphemeOnPath:function(r,l,o){var f=r+l.kernedWidth/2,m=this.path,a=n.util.getPointOnPath(m.path,f,m.segmentsInfo);l.renderLeft=a.x-o.x,l.renderTop=a.y-o.y,l.angle=a.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(r,l,o,f,m){var a=this.getCompleteStyleDeclaration(l,o),p=f?this.getCompleteStyleDeclaration(l,o-1):{},v=this._measureChar(r,a,f,p),b=v.kernedWidth,y=v.width,C;this.charSpacing!==0&&(C=this._getWidthOfCharSpacing(),y+=C,b+=C);var S={width:y,left:0,height:a.fontSize,kernedWidth:b,deltaY:a.deltaY};if(o>0&&!m){var w=this.__charBounds[l][o-1];S.left=w.left+w.width+v.kernedWidth-v.width}return S},getHeightOfLine:function(r){if(this.__lineHeights[r])return this.__lineHeights[r];for(var l=this._textLines[r],o=this.getHeightOfChar(r,0),f=1,m=l.length;f<m;f++)o=Math.max(this.getHeightOfChar(r,f),o);return this.__lineHeights[r]=o*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var r,l=0,o=0,f=this._textLines.length;o<f;o++)r=this.getHeightOfLine(o),l+=o===f-1?r/this.lineHeight:r;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(r,l){r.save();for(var o=0,f=this._getLeftOffset(),m=this._getTopOffset(),a=0,p=this._textLines.length;a<p;a++){var v=this.getHeightOfLine(a),b=v/this.lineHeight,y=this._getLineLeftOffset(a);this._renderTextLine(l,r,this._textLines[a],f+y,m+o+b,a),o+=v}r.restore()},_renderTextFill:function(r){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(r,"fillText")},_renderTextStroke:function(r){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this._setLineDash(r,this.strokeDashArray),r.beginPath(),this._renderTextCommon(r,"strokeText"),r.closePath(),r.restore())},_renderChars:function(r,l,o,f,m,a){var p=this.getHeightOfLine(a),v=this.textAlign.indexOf("justify")!==-1,b,y,C="",S,w=0,k,F=this.path,V=!v&&this.charSpacing===0&&this.isEmptyStyles(a)&&!F,z=this.direction==="ltr",Y=this.direction==="ltr"?1:-1,et,H=l.canvas.getAttribute("dir");if(l.save(),H!==this.direction&&(l.canvas.setAttribute("dir",z?"ltr":"rtl"),l.direction=z?"ltr":"rtl",l.textAlign=z?"left":"right"),m-=p*this._fontSizeFraction/this.lineHeight,V){this._renderChar(r,l,a,0,o.join(""),f,m,p),l.restore();return}for(var Q=0,ct=o.length-1;Q<=ct;Q++)k=Q===ct||this.charSpacing||F,C+=o[Q],S=this.__charBounds[a][Q],w===0?(f+=Y*(S.kernedWidth-S.width),w+=S.width):w+=S.kernedWidth,v&&!k&&this._reSpaceAndTab.test(o[Q])&&(k=!0),k||(b=b||this.getCompleteStyleDeclaration(a,Q),y=this.getCompleteStyleDeclaration(a,Q+1),k=n.util.hasStyleChanged(b,y,!1)),k&&(F?(l.save(),l.translate(S.renderLeft,S.renderTop),l.rotate(S.angle),this._renderChar(r,l,a,Q,C,-w/2,0,p),l.restore()):(et=f,this._renderChar(r,l,a,Q,C,et,m,p)),C="",b=y,f+=Y*w,w=0);l.restore()},_applyPatternGradientTransformText:function(r){var l=n.util.createCanvasElement(),o,f=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return l.width=f,l.height=m,o=l.getContext("2d"),o.beginPath(),o.moveTo(0,0),o.lineTo(f,0),o.lineTo(f,m),o.lineTo(0,m),o.closePath(),o.translate(f/2,m/2),o.fillStyle=r.toLive(o),this._applyPatternGradientTransform(o,r),o.fill(),o.createPattern(l,"no-repeat")},handleFiller:function(r,l,o){var f,m;return o.toLive?o.gradientUnits==="percentage"||o.gradientTransform||o.patternTransform?(f=-this.width/2,m=-this.height/2,r.translate(f,m),r[l]=this._applyPatternGradientTransformText(o),{offsetX:f,offsetY:m}):(r[l]=o.toLive(r,this),this._applyPatternGradientTransform(r,o)):(r[l]=o,{offsetX:0,offsetY:0})},_setStrokeStyles:function(r,l){return r.lineWidth=l.strokeWidth,r.lineCap=this.strokeLineCap,r.lineDashOffset=this.strokeDashOffset,r.lineJoin=this.strokeLineJoin,r.miterLimit=this.strokeMiterLimit,this.handleFiller(r,"strokeStyle",l.stroke)},_setFillStyles:function(r,l){return this.handleFiller(r,"fillStyle",l.fill)},_renderChar:function(r,l,o,f,m,a,p){var v=this._getStyleDeclaration(o,f),b=this.getCompleteStyleDeclaration(o,f),y=r==="fillText"&&b.fill,C=r==="strokeText"&&b.stroke&&b.strokeWidth,S,w;!C&&!y||(l.save(),y&&(S=this._setFillStyles(l,b)),C&&(w=this._setStrokeStyles(l,b)),l.font=this._getFontDeclaration(b),v&&v.textBackgroundColor&&this._removeShadow(l),v&&v.deltaY&&(p+=v.deltaY),y&&l.fillText(m,a-S.offsetX,p-S.offsetY),C&&l.strokeText(m,a-w.offsetX,p-w.offsetY),l.restore())},setSuperscript:function(r,l){return this._setScript(r,l,this.superscript)},setSubscript:function(r,l){return this._setScript(r,l,this.subscript)},_setScript:function(r,l,o){var f=this.get2DCursorLocation(r,!0),m=this.getValueOfPropertyAt(f.lineIndex,f.charIndex,"fontSize"),a=this.getValueOfPropertyAt(f.lineIndex,f.charIndex,"deltaY"),p={fontSize:m*o.size,deltaY:a+m*o.baseline};return this.setSelectionStyles(p,r,l),this},_getLineLeftOffset:function(r){var l=this.getLineWidth(r),o=this.width-l,f=this.textAlign,m=this.direction,p,a=0,p=this.isEndOfWrapping(r);return f==="justify"||f==="justify-center"&&!p||f==="justify-right"&&!p||f==="justify-left"&&!p?0:(f==="center"&&(a=o/2),f==="right"&&(a=o),f==="justify-center"&&(a=o/2),f==="justify-right"&&(a=o),m==="rtl"&&(a-=o),a)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var r=this._forceClearCache;return r||(r=this.hasStateChanged("_dimensionAffectingProps")),r&&(this.dirty=!0,this._forceClearCache=!1),r},getLineWidth:function(r){if(this.__lineWidths[r]!==void 0)return this.__lineWidths[r];var l=this.measureLine(r),o=l.width;return this.__lineWidths[r]=o,o},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(r,l,o){var f=this._getStyleDeclaration(r,l);return f&&typeof f[o]<"u"?f[o]:this[o]},_renderTextDecoration:function(r,l){if(!(!this[l]&&!this.styleHas(l))){for(var o,f,m,a,p,v,b,y,C=this._getLeftOffset(),S=this._getTopOffset(),w,k,F,V,z,Y,et,H,Q=this.path,ct=this._getWidthOfCharSpacing(),G=this.offsets[l],lt=0,T=this._textLines.length;lt<T;lt++){if(o=this.getHeightOfLine(lt),!this[l]&&!this.styleHas(l,lt)){S+=o;continue}b=this._textLines[lt],Y=o/this.lineHeight,a=this._getLineLeftOffset(lt),k=0,F=0,y=this.getValueOfPropertyAt(lt,0,l),H=this.getValueOfPropertyAt(lt,0,"fill"),w=S+Y*(1-this._fontSizeFraction),f=this.getHeightOfChar(lt,0),p=this.getValueOfPropertyAt(lt,0,"deltaY");for(var L=0,D=b.length;L<D;L++)if(V=this.__charBounds[lt][L],z=this.getValueOfPropertyAt(lt,L,l),et=this.getValueOfPropertyAt(lt,L,"fill"),m=this.getHeightOfChar(lt,L),v=this.getValueOfPropertyAt(lt,L,"deltaY"),Q&&z&&et)r.save(),r.fillStyle=H,r.translate(V.renderLeft,V.renderTop),r.rotate(V.angle),r.fillRect(-V.kernedWidth/2,G*m+v,V.kernedWidth,this.fontSize/15),r.restore();else if((z!==y||et!==H||m!==f||v!==p)&&F>0){var E=C+a+k;this.direction==="rtl"&&(E=this.width-E-F),y&&H&&(r.fillStyle=H,r.fillRect(E,w+G*f+p,F,this.fontSize/15)),k=V.left,F=V.width,y=z,H=et,f=m,p=v}else F+=V.kernedWidth;var E=C+a+k;this.direction==="rtl"&&(E=this.width-E-F),r.fillStyle=et,z&&et&&r.fillRect(E,w+G*f+p,F-ct,this.fontSize/15),S+=o}this._removeShadow(r)}},_getFontDeclaration:function(r,l){var o=r||this,f=this.fontFamily,m=n.Text.genericFonts.indexOf(f.toLowerCase())>-1,a=f===void 0||f.indexOf("'")>-1||f.indexOf(",")>-1||f.indexOf('"')>-1||m?o.fontFamily:'"'+o.fontFamily+'"';return[n.isLikelyNode?o.fontWeight:o.fontStyle,n.isLikelyNode?o.fontStyle:o.fontWeight,l?this.CACHE_FONT_SIZE+"px":o.fontSize+"px",a].join(" ")},render:function(r){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",r)))},_splitTextIntoLines:function(r){for(var l=r.split(this._reNewline),o=new Array(l.length),f=[`
`],m=[],a=0;a<l.length;a++)o[a]=n.util.string.graphemeSplit(l[a]),m=m.concat(o[a],f);return m.pop(),{_unwrappedLines:o,lines:l,graphemeText:m,graphemeLines:o}},toObject:function(r){var l=h.concat(r),o=this.callSuper("toObject",l);return o.styles=n.util.stylesToArray(this.styles,this.text),o.path&&(o.path=this.path.toObject()),o},set:function(r,l){this.callSuper("set",r,l);var o=!1,f=!1;if(typeof r=="object")for(var m in r)m==="path"&&this.setPathInfo(),o=o||this._dimensionAffectingProps.indexOf(m)!==-1,f=f||m==="path";else o=this._dimensionAffectingProps.indexOf(r)!==-1,f=r==="path";return f&&this.setPathInfo(),o&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(r,l,o){if(!r)return l(null);var f=n.parseAttributes(r,n.Text.ATTRIBUTE_NAMES),m=f.textAnchor||"left";if(o=n.util.object.extend(o?c(o):{},f),o.top=o.top||0,o.left=o.left||0,f.textDecoration){var a=f.textDecoration;a.indexOf("underline")!==-1&&(o.underline=!0),a.indexOf("overline")!==-1&&(o.overline=!0),a.indexOf("line-through")!==-1&&(o.linethrough=!0),delete o.textDecoration}"dx"in f&&(o.left+=f.dx),"dy"in f&&(o.top+=f.dy),"fontSize"in o||(o.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE);var p="";"textContent"in r?p=r.textContent:"firstChild"in r&&r.firstChild!==null&&"data"in r.firstChild&&r.firstChild.data!==null&&(p=r.firstChild.data),p=p.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var v=o.strokeWidth;o.strokeWidth=0;var b=new n.Text(p,o),y=b.getScaledHeight()/b.height,C=(b.height+b.strokeWidth)*b.lineHeight-b.height,S=C*y,w=b.getScaledHeight()+S,k=0;m==="center"&&(k=b.getScaledWidth()/2),m==="right"&&(k=b.getScaledWidth()),b.set({left:b.left-k,top:b.top-(w-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof v<"u"?v:1}),l(b)},n.Text.fromObject=function(r,l){var o=c(r),f=r.path;return delete o.path,n.Object._fromObject("Text",o,function(m){m.styles=n.util.stylesFromArray(r.styles,r.text),f?n.Object._fromObject("Path",f,function(a){m.set("path",a),l(m)},"path"):l(m)},"text")},n.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],n.util.createAccessors&&n.util.createAccessors(n.Text)}(s),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(u){if(!this.styles||typeof u<"u"&&!this.styles[u])return!0;var n=typeof u>"u"?this.styles:{line:this.styles[u]};for(var c in n)for(var h in n[c])for(var r in n[c][h])return!1;return!0},styleHas:function(u,n){if(!this.styles||!u||u===""||typeof n<"u"&&!this.styles[n])return!1;var c=typeof n>"u"?this.styles:{0:this.styles[n]};for(var h in c)for(var r in c[h])if(typeof c[h][r][u]<"u")return!0;return!1},cleanStyle:function(u){if(!this.styles||!u||u==="")return!1;var n=this.styles,c=0,h,r,l=!0,o=0,f;for(var m in n){h=0;for(var a in n[m]){var f=n[m][a],p=f.hasOwnProperty(u);c++,p?(r?f[u]!==r&&(l=!1):r=f[u],f[u]===this[u]&&delete f[u]):l=!1,Object.keys(f).length!==0?h++:delete n[m][a]}h===0&&delete n[m]}for(var v=0;v<this._textLines.length;v++)o+=this._textLines[v].length;l&&c===o&&(this[u]=r,this.removeStyle(u))},removeStyle:function(u){if(!(!this.styles||!u||u==="")){var n=this.styles,c,h,r;for(h in n){c=n[h];for(r in c)delete c[r][u],Object.keys(c[r]).length===0&&delete c[r];Object.keys(c).length===0&&delete n[h]}}},_extendStyles:function(u,n){var c=this.get2DCursorLocation(u);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),n)},get2DCursorLocation:function(u,n){typeof u>"u"&&(u=this.selectionStart);for(var c=n?this._unwrappedTextLines:this._textLines,h=c.length,r=0;r<h;r++){if(u<=c[r].length)return{lineIndex:r,charIndex:u};u-=c[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:c[r-1].length<u?c[r-1].length:u}},getSelectionStyles:function(u,n,c){typeof u>"u"&&(u=this.selectionStart||0),typeof n>"u"&&(n=this.selectionEnd||u);for(var h=[],r=u;r<n;r++)h.push(this.getStyleAtPosition(r,c));return h},getStyleAtPosition:function(u,n){var c=this.get2DCursorLocation(u),h=n?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return h||{}},setSelectionStyles:function(u,n,c){typeof n>"u"&&(n=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||n);for(var h=n;h<c;h++)this._extendStyles(h,u);return this._forceClearCache=!0,this},_getStyleDeclaration:function(u,n){var c=this.styles&&this.styles[u];return c?c[n]:null},getCompleteStyleDeclaration:function(u,n){for(var c=this._getStyleDeclaration(u,n)||{},h={},r,l=0;l<this._styleProperties.length;l++)r=this._styleProperties[l],h[r]=typeof c[r]>"u"?this[r]:c[r];return h},_setStyleDeclaration:function(u,n,c){this.styles[u][n]=c},_deleteStyleDeclaration:function(u,n){delete this.styles[u][n]},_getLineStyle:function(u){return!!this.styles[u]},_setLineStyle:function(u){this.styles[u]={}},_deleteLineStyle:function(u){delete this.styles[u]}})}(),function(){function u(n){n.textDecoration&&(n.textDecoration.indexOf("underline")>-1&&(n.underline=!0),n.textDecoration.indexOf("line-through")>-1&&(n.linethrough=!0),n.textDecoration.indexOf("overline")>-1&&(n.overline=!0),delete n.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(n,c){this.callSuper("initialize",n,c),this.initBehavior()},setSelectionStart:function(n){n=Math.max(n,0),this._updateAndFire("selectionStart",n)},setSelectionEnd:function(n){n=Math.min(n,this.text.length),this._updateAndFire("selectionEnd",n)},_updateAndFire:function(n,c){this[n]!==c&&(this._fireSelectionChanged(),this[n]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(n){this.clearContextTop(),this.callSuper("render",n),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(n){this.callSuper("_render",n)},clearContextTop:function(n){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,h=this.canvas.viewportTransform;c.save(),c.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(c),this._clearTextArea(c),n||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var n=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(n,c):this.renderSelection(n,c),c.restore()}},_clearTextArea:function(n){var c=this.width+4,h=this.height+4;n.clearRect(-c/2,-h/2,c,h)},_getCursorBoundaries:function(n){typeof n>"u"&&(n=this.selectionStart);var c=this._getLeftOffset(),h=this._getTopOffset(),r=this._getCursorBoundariesOffsets(n);return{left:c,top:h,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(n){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,h,r,l=0,o=0,f,m=this.get2DCursorLocation(n);r=m.charIndex,h=m.lineIndex;for(var a=0;a<h;a++)l+=this.getHeightOfLine(a);c=this._getLineLeftOffset(h);var p=this.__charBounds[h][r];return p&&(o=p.left),this.charSpacing!==0&&r===this._textLines[h].length&&(o-=this._getWidthOfCharSpacing()),f={top:l,left:c+(o>0?o:0)},this.direction==="rtl"&&(f.left*=-1),this.cursorOffsetCache=f,this.cursorOffsetCache},renderCursor:function(n,c){var h=this.get2DCursorLocation(),r=h.lineIndex,l=h.charIndex>0?h.charIndex-1:0,o=this.getValueOfPropertyAt(r,l,"fontSize"),f=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/f,a=n.topOffset,p=this.getValueOfPropertyAt(r,l,"deltaY");a+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(n,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,l,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(n.left+n.leftOffset-m/2,a+n.top+p,m,o)},renderSelection:function(n,c){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,o=this.get2DCursorLocation(h),f=this.get2DCursorLocation(r),m=o.lineIndex,a=f.lineIndex,p=o.charIndex<0?0:o.charIndex,v=f.charIndex<0?0:f.charIndex,b=m;b<=a;b++){var y=this._getLineLeftOffset(b)||0,C=this.getHeightOfLine(b),S=0,w=0,k=0;if(b===m&&(w=this.__charBounds[m][p].left),b>=m&&b<a)k=l&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===a)if(v===0)k=this.__charBounds[a][v].left;else{var F=this._getWidthOfCharSpacing();k=this.__charBounds[a][v-1].left+this.__charBounds[a][v-1].width-F}S=C,(this.lineHeight<1||b===a&&this.lineHeight>1)&&(C/=this.lineHeight);var V=n.left+y+w,z=k-w,Y=C,et=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",Y=1,et=C):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(V=this.width-V-z),c.fillRect(V,n.top+n.topOffset+et,z,Y),n.topOffset+=S}},getCurrentCharFontSize:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fontSize")},getCurrentCharColor:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fill")},_getCurrentCharIndex:function(){var n=this.get2DCursorLocation(this.selectionStart,!0),c=n.charIndex>0?n.charIndex-1:0;return{l:n.lineIndex,c}}}),t.IText.fromObject=function(n,c){var h=t.util.stylesFromArray(n.styles,n.text),r=Object.assign({},n,{styles:h});if(u(r),r.styles)for(var l in r.styles)for(var o in r.styles[l])u(r.styles[l][o]);t.Object._fromObject("IText",r,c,"text")}}(),function(){var u=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var n=this;this.on("added",function(){var c=n.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,n._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(n))})},initRemovedHandler:function(){var n=this;this.on("removed",function(){var c=n.canvas;c&&(c._iTextInstances=c._iTextInstances||[],t.util.removeFromArray(c._iTextInstances,n),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,n._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(n){n._mouseUpITextHandler=function(){n._iTextInstances&&n._iTextInstances.forEach(function(c){c.__isMousedown=!1})},n.on("mouse:up",n._mouseUpITextHandler)},_removeCanvasHandlers:function(n){n.off("mouse:up",n._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(n,c,h,r){var l;return l={isAborted:!1,abort:function(){this.isAborted=!0}},n.animate("_currentCursorOpacity",c,{duration:h,onComplete:function(){l.isAborted||n[r]()},onChange:function(){n.canvas&&n.selectionStart===n.selectionEnd&&n.renderCursorOrSelection()},abort:function(){return l.isAborted}}),l},_onTickComplete:function(){var n=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){n._currentTickCompleteState=n._animateCursor(n,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(n){var c=this,h=n?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},h)},abortCursorAnimation:function(){var n=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,n&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(n){var c=0,h=n-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)c++,h--;for(;/\S/.test(this._text[h])&&h>-1;)c++,h--;return n-c},findWordBoundaryRight:function(n){var c=0,h=n;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)c++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)c++,h++;return n+c},findLineBoundaryLeft:function(n){for(var c=0,h=n-1;!/\n/.test(this._text[h])&&h>-1;)c++,h--;return n-c},findLineBoundaryRight:function(n){for(var c=0,h=n;!/\n/.test(this._text[h])&&h<this._text.length;)c++,h++;return n+c},searchWordBoundary:function(n,c){for(var h=this._text,r=this._reSpace.test(h[n])?n-1:n,l=h[r],o=t.reNonWord;!o.test(l)&&r>0&&r<h.length;)r+=c,l=h[r];return o.test(l)&&(r+=c===1?0:1),r},selectWord:function(n){n=n||this.selectionStart;var c=this.searchWordBoundary(n,-1),h=this.searchWordBoundary(n,1);this.selectionStart=c,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(n){n=n||this.selectionStart;var c=this.findLineBoundaryLeft(n),h=this.findLineBoundaryRight(n);return this.selectionStart=c,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(n){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(n),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(n){n._iTextInstances&&n._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(n){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(n.e),h=this.selectionStart,r=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||h===r)&&(h===c||r===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==r)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(n,c,h){var r=h.slice(0,n),l=t.util.string.graphemeSplit(r).length;if(n===c)return{selectionStart:l,selectionEnd:l};var o=h.slice(n,c),f=t.util.string.graphemeSplit(o).length;return{selectionStart:l,selectionEnd:l+f}},fromGraphemeToStringSelection:function(n,c,h){var r=h.slice(0,n),l=r.join("").length;if(n===c)return{selectionStart:l,selectionEnd:l};var o=h.slice(n,c),f=o.join("").length;return{selectionStart:l,selectionEnd:l+f}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var n=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=n.selectionStart,this.hiddenTextarea.selectionEnd=n.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var n=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=n.selectionEnd,this.inCompositionMode||(this.selectionStart=n.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var n=this._calcTextareaPosition();this.hiddenTextarea.style.left=n.left,this.hiddenTextarea.style.top=n.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var n=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(n),h=this.get2DCursorLocation(n),r=h.lineIndex,l=h.charIndex,o=this.getValueOfPropertyAt(r,l,"fontSize")*this.lineHeight,f=c.leftOffset,m=this.calcTransformMatrix(),a={x:c.left+f,y:c.top+c.topOffset+o},p=this.canvas.getRetinaScaling(),v=this.canvas.upperCanvasEl,b=v.width/p,y=v.height/p,C=b-o,S=y-o,w=v.clientWidth/b,k=v.clientHeight/y;return a=t.util.transformPoint(a,m),a=t.util.transformPoint(a,this.canvas.viewportTransform),a.x*=w,a.y*=k,a.x<0&&(a.x=0),a.x>C&&(a.x=C),a.y<0&&(a.y=0),a.y>S&&(a.y=S),a.x+=this.canvas._offset.left,a.y+=this.canvas._offset.top,{left:a.x+"px",top:a.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var n=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),n&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),n&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var n in this.styles)this._textLines[n]||delete this.styles[n]},removeStyleFromTo:function(n,c){var h=this.get2DCursorLocation(n,!0),r=this.get2DCursorLocation(c,!0),l=h.lineIndex,o=h.charIndex,f=r.lineIndex,m=r.charIndex,a,p;if(l!==f){if(this.styles[l])for(a=o;a<this._unwrappedTextLines[l].length;a++)delete this.styles[l][a];if(this.styles[f])for(a=m;a<this._unwrappedTextLines[f].length;a++)p=this.styles[f][a],p&&(this.styles[l]||(this.styles[l]={}),this.styles[l][o+a-m]=p);for(a=l+1;a<=f;a++)delete this.styles[a];this.shiftLineStyles(f,l-f)}else if(this.styles[l]){p=this.styles[l];var v=m-o,b,y;for(a=o;a<m;a++)delete p[a];for(y in this.styles[l])b=parseInt(y,10),b>=m&&(p[b-v]=p[y],delete p[y])}},shiftLineStyles:function(n,c){var h=u(this.styles);for(var r in this.styles){var l=parseInt(r,10);l>n&&(this.styles[l+c]=h[l],h[l-c]||delete this.styles[l])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(n,c,h,r){var l,o={},f=!1,m=this._unwrappedTextLines[n].length===c;h||(h=1),this.shiftLineStyles(n,h),this.styles[n]&&(l=this.styles[n][c===0?c:c-1]);for(var a in this.styles[n]){var p=parseInt(a,10);p>=c&&(f=!0,o[p-c]=this.styles[n][a],m&&c===0||delete this.styles[n][a])}var v=!1;for(f&&!m&&(this.styles[n+h]=o,v=!0),v&&h--;h>0;)r&&r[h-1]?this.styles[n+h]={0:u(r[h-1])}:l?this.styles[n+h]={0:u(l)}:delete this.styles[n+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(n,c,h,r){this.styles||(this.styles={});var l=this.styles[n],o=l?u(l):{};h||(h=1);for(var f in o){var m=parseInt(f,10);m>=c&&(l[m+h]=o[m],o[m-h]||delete l[m])}if(this._forceClearCache=!0,r){for(;h--;)Object.keys(r[h]).length&&(this.styles[n]||(this.styles[n]={}),this.styles[n][c+h]=u(r[h]));return}if(l)for(var a=l[c?c-1:1];a&&h--;)this.styles[n][c+h]=u(a)},insertNewStyleBlock:function(n,c,h){for(var r=this.get2DCursorLocation(c,!0),l=[0],o=0,f=0;f<n.length;f++)n[f]===`
`?(o++,l[o]=0):l[o]++;l[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,l[0],h),h=h&&h.slice(l[0]+1)),o&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+l[0],o);for(var f=1;f<o;f++)l[f]>0?this.insertCharStyleObject(r.lineIndex+f,0,l[f],h):h&&this.styles[r.lineIndex+f]&&h[0]&&(this.styles[r.lineIndex+f][0]=h[0]),h=h&&h.slice(l[f]+1);l[f]>0&&this.insertCharStyleObject(r.lineIndex+f,0,l[f],h)},setSelectionStartEndWithShift:function(n,c,h){h<=n?(c===n?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=n),this.selectionStart=h):h>n&&h<c?this._selectionDirection==="right"?this.selectionEnd=h:this.selectionStart=h:(c===n?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=h)},setSelectionInBoundaries:function(){var n=this.text.length;this.selectionStart>n?this.selectionStart=n:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>n?this.selectionEnd=n:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(u){if(this.canvas){this.__newClickTime=+new Date;var n=u.pointer;this.isTripleClick(n)&&(this.fire("tripleclick",u),this._stopEvent(u.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=n,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(u){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===u.x&&this.__lastPointer.y===u.y},_stopEvent:function(u){u.preventDefault&&u.preventDefault(),u.stopPropagation&&u.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(u){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(u.e))},tripleClickHandler:function(u){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(u.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(u){!this.canvas||!this.editable||u.e.button&&u.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(u.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(u){!this.canvas||!this.editable||u.e.button&&u.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(u){if(this.__isMousedown=!1,!(!this.editable||this.group||u.transform&&u.transform.actionPerformed||u.e.button&&u.e.button!==1)){if(this.canvas){var n=this.canvas._activeObject;if(n&&n!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(u.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(u){var n=this.getSelectionStartFromPointer(u),c=this.selectionStart,h=this.selectionEnd;u.shiftKey?this.setSelectionStartEndWithShift(c,h,n):(this.selectionStart=n,this.selectionEnd=n),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(u){for(var n=this.getLocalPointer(u),c=0,h=0,r=0,l=0,o=0,f,m,a=0,p=this._textLines.length;a<p&&r<=n.y;a++)r+=this.getHeightOfLine(a)*this.scaleY,o=a,a>0&&(l+=this._textLines[a-1].length+this.missingNewlineOffset(a-1));f=this._getLineLeftOffset(o),h=f*this.scaleX,m=this._textLines[o],this.direction==="rtl"&&(n.x=this.width*this.scaleX-n.x+h);for(var v=0,b=m.length;v<b&&(c=h,h+=this.__charBounds[o][v].kernedWidth*this.scaleX,h<=n.x);v++)l++;return this._getNewSelectionStartFromOffset(n,c,h,l,b)},_getNewSelectionStartFromOffset:function(u,n,c,h,r){var l=u.x-n,o=c-u.x,f=o>l||o<0?0:1,m=h+f;return this.flipX&&(m=r-m),m>this._text.length&&(m=this._text.length),m}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var u=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+u.top+"; left: "+u.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+u.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(u){if(this.isEditing){var n=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(u.keyCode in n)this[n[u.keyCode]](u);else if(u.keyCode in this.ctrlKeysMapDown&&(u.ctrlKey||u.metaKey))this[this.ctrlKeysMapDown[u.keyCode]](u);else return;u.stopImmediatePropagation(),u.preventDefault(),u.keyCode>=33&&u.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(u){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(u.keyCode in this.ctrlKeysMapUp&&(u.ctrlKey||u.metaKey))this[this.ctrlKeysMapUp[u.keyCode]](u);else return;u.stopImmediatePropagation(),u.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(u){var n=this.fromPaste;if(this.fromPaste=!1,u&&u.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,r=c.length,l,o,f=r-h,m=this.selectionStart,a=this.selectionEnd,p=m!==a,v,b,y;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),S=m>C.selectionStart;p?(l=this._text.slice(m,a),f+=a-m):r<h&&(S?l=this._text.slice(a+f,a):l=this._text.slice(m,m-f)),o=c.slice(C.selectionEnd-f,C.selectionEnd),l&&l.length&&(o.length&&(v=this.getSelectionStyles(m,m+1,!1),v=o.map(function(){return v[0]})),p?(b=m,y=a):S?(b=a-l.length,y=a):(b=a,y=a+l.length),this.removeStyleFromTo(b,y)),o.length&&(n&&o.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(v=t.copiedTextStyle),this.insertNewStyleBlock(o,m,v)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(u){this.compositionStart=u.target.selectionStart,this.compositionEnd=u.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(u){return u&&u.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(u,n){var c=this._getLineLeftOffset(u),h;return n>0&&(h=this.__charBounds[u][n-1],c+=h.left+h.width),c},getDownCursorOffset:function(u,n){var c=this._getSelectionForOffset(u,n),h=this.get2DCursorLocation(c),r=h.lineIndex;if(r===this._textLines.length-1||u.metaKey||u.keyCode===34)return this._text.length-c;var l=h.charIndex,o=this._getWidthBeforeCursor(r,l),f=this._getIndexOnLine(r+1,o),m=this._textLines[r].slice(l);return m.length+f+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(u,n){return u.shiftKey&&this.selectionStart!==this.selectionEnd&&n?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(u,n){var c=this._getSelectionForOffset(u,n),h=this.get2DCursorLocation(c),r=h.lineIndex;if(r===0||u.metaKey||u.keyCode===33)return-c;var l=h.charIndex,o=this._getWidthBeforeCursor(r,l),f=this._getIndexOnLine(r-1,o),m=this._textLines[r].slice(0,l),a=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+f-m.length+(1-a)},_getIndexOnLine:function(u,n){for(var c=this._textLines[u],h=this._getLineLeftOffset(u),r=h,l=0,o,f,m=0,a=c.length;m<a;m++)if(o=this.__charBounds[u][m].width,r+=o,r>n){f=!0;var p=r-o,v=r,b=Math.abs(p-n),y=Math.abs(v-n);l=y<b?m:m-1;break}return f||(l=c.length-1),l},moveCursorDown:function(u){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",u)},moveCursorUp:function(u){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",u)},_moveCursorUpOrDown:function(u,n){var c="get"+u+"CursorOffset",h=this[c](n,this._selectionDirection==="right");n.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),h!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(u){var n=this._selectionDirection==="left"?this.selectionStart+u:this.selectionEnd+u;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,n),u!==0},moveCursorWithoutShift:function(u){return u<0?(this.selectionStart+=u,this.selectionEnd=this.selectionStart):(this.selectionEnd+=u,this.selectionStart=this.selectionEnd),u!==0},moveCursorLeft:function(u){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",u)},_move:function(u,n,c){var h;if(u.altKey)h=this["findWordBoundary"+c](this[n]);else if(u.metaKey||u.keyCode===35||u.keyCode===36)h=this["findLineBoundary"+c](this[n]);else return this[n]+=c==="Left"?-1:1,!0;if(typeof h<"u"&&this[n]!==h)return this[n]=h,!0},_moveLeft:function(u,n){return this._move(u,n,"Left")},_moveRight:function(u,n){return this._move(u,n,"Right")},moveCursorLeftWithoutShift:function(u){var n=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(n=this._moveLeft(u,"selectionStart")),this.selectionEnd=this.selectionStart,n},moveCursorLeftWithShift:function(u){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(u,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(u,"selectionStart")},moveCursorRight:function(u){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",u)},_moveCursorLeftOrRight:function(u,n){var c="moveCursor"+u+"With";this._currentCursorOpacity=1,n.shiftKey?c+="Shift":c+="outShift",this[c](n)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(u){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(u,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(u,"selectionEnd")},moveCursorRightWithoutShift:function(u){var n=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(n=this._moveRight(u,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,n},removeChars:function(u,n){typeof n>"u"&&(n=u+1),this.removeStyleFromTo(u,n),this._text.splice(u,n-u),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(u,n,c,h){typeof h>"u"&&(h=c),h>c&&this.removeStyleFromTo(c,h);var r=t.util.string.graphemeSplit(u);this.insertNewStyleBlock(r,c,n),this._text=[].concat(this._text.slice(0,c),r,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var u=t.util.toFixed,n=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),h=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(h)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var h=!0,r=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",r?'text-decoration="'+r+'" ':"",'style="',this.getSvgStyles(h),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,h){var r=[],l=[],o=c,f;this._setSVGBg(l);for(var m=0,a=this._textLines.length;m<a;m++)f=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(l,m,h+f,o),this._setSVGTextLineText(r,m,h+f,o),o+=this.getHeightOfLine(m);return{textSpans:r,textBgRects:l}},_createTextCharSpan:function(c,h,r,l){var o=c!==c.trim()||c.match(n),f=this.getSvgSpanStyles(h,o),m=f?'style="'+f+'"':"",a=h.deltaY,p="",v=t.Object.NUM_FRACTION_DIGITS;return a&&(p=' dy="'+u(a,v)+'" '),['<tspan x="',u(r,v),'" y="',u(l,v),'" ',p,m,">",t.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,h,r,l){var o=this.getHeightOfLine(h),f=this.textAlign.indexOf("justify")!==-1,m,a,p="",v,b,y=0,C=this._textLines[h],S;l+=o*(1-this._fontSizeFraction)/this.lineHeight;for(var w=0,k=C.length-1;w<=k;w++)S=w===k||this.charSpacing,p+=C[w],v=this.__charBounds[h][w],y===0?(r+=v.kernedWidth-v.width,y+=v.width):y+=v.kernedWidth,f&&!S&&this._reSpaceAndTab.test(C[w])&&(S=!0),S||(m=m||this.getCompleteStyleDeclaration(h,w),a=this.getCompleteStyleDeclaration(h,w+1),S=t.util.hasStyleChanged(m,a,!0)),S&&(b=this._getStyleDeclaration(h,w)||{},c.push(this._createTextCharSpan(p,b,r,l)),p="",m=a,r+=y,y=0)},_pushTextBgRect:function(c,h,r,l,o,f){var m=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(h),' x="',u(r,m),'" y="',u(l,m),'" width="',u(o,m),'" height="',u(f,m),`"></rect>
`)},_setSVGTextLineBg:function(c,h,r,l){for(var o=this._textLines[h],f=this.getHeightOfLine(h)/this.lineHeight,m=0,a=0,p,v,b=this.getValueOfPropertyAt(h,0,"textBackgroundColor"),y=0,C=o.length;y<C;y++)p=this.__charBounds[h][y],v=this.getValueOfPropertyAt(h,y,"textBackgroundColor"),v!==b?(b&&this._pushTextBgRect(c,b,r+a,l,m,f),a=p.left,m=p.width,b=v):m+=p.kernedWidth;v&&this._pushTextBgRect(c,v,r+a,l,m,f)},_getFillAttributes:function(c){var h=c&&typeof c=="string"?new t.Color(c):"";return!h||!h.getSource()||h.getAlpha()===1?'fill="'+c+'"':'opacity="'+h.getAlpha()+'" fill="'+h.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var h=0,r=0,l=0;l<c;l++)h+=this.getHeightOfLine(l);return r=this.getHeightOfLine(l),{lineTop:h,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var h=t.Object.prototype.getSvgStyles.call(this,c);return h+" white-space: pre;"}})}(),function(u){var n=u.fabric||(u.fabric={});n.Textbox=n.util.createClass(n.IText,n.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:n.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var h=0,r=0,l=0,o={},f=0;f<c.graphemeLines.length;f++)c.graphemeText[l]===`
`&&f>0?(r=0,l++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[l])&&f>0&&(r++,l++),o[f]={line:h,offset:r},l+=c.graphemeLines[f].length,r+=c.graphemeLines[f].length;return o},styleHas:function(c,h){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[h];r&&(h=r.line)}return n.Text.prototype.styleHas.call(this,c,h)},isEmptyStyles:function(c){if(!this.styles)return!0;var h=0,r=c+1,l,o,f=!1,m=this._styleMap[c],a=this._styleMap[c+1];m&&(c=m.line,h=m.offset),a&&(r=a.line,f=r===c,l=a.offset),o=typeof c>"u"?this.styles:{line:this.styles[c]};for(var p in o)for(var v in o[p])if(v>=h&&(!f||v<l))for(var b in o[p][v])return!1;return!0},_getStyleDeclaration:function(c,h){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[c];if(!r)return null;c=r.line,h=r.offset+h}return this.callSuper("_getStyleDeclaration",c,h)},_setStyleDeclaration:function(c,h,r){var l=this._styleMap[c];c=l.line,h=l.offset+h,this.styles[c][h]=r},_deleteStyleDeclaration:function(c,h){var r=this._styleMap[c];c=r.line,h=r.offset+h,delete this.styles[c][h]},_getLineStyle:function(c){var h=this._styleMap[c];return!!this.styles[h.line]},_setLineStyle:function(c){var h=this._styleMap[c];this.styles[h.line]={}},_wrapText:function(c,h){var r=[],l;for(this.isWrapping=!0,l=0;l<c.length;l++)r=r.concat(this._wrapLine(c[l],l,h));return this.isWrapping=!1,r},_measureWord:function(c,h,r){var l=0,o,f=!0;r=r||0;for(var m=0,a=c.length;m<a;m++){var p=this._getGraphemeBox(c[m],h,m+r,o,f);l+=p.kernedWidth,o=c[m]}return l},_wrapLine:function(c,h,r,V){var o=0,f=this.splitByGrapheme,m=[],a=[],p=f?n.util.string.graphemeSplit(c):c.split(this._wordJoiners),v="",b=0,y=f?"":" ",C=0,S=0,w=0,k=!0,F=this._getWidthOfCharSpacing(),V=V||0;p.length===0&&p.push([]),r-=V;for(var z=0;z<p.length;z++)v=f?p[z]:n.util.string.graphemeSplit(p[z]),C=this._measureWord(v,h,b),b+=v.length,o+=S+C-F,o>r&&!k?(m.push(a),a=[],o=C,k=!0):o+=F,!k&&!f&&a.push(y),a=a.concat(v),S=f?0:this._measureWord([y],h,b),b++,k=!1,C>w&&(w=C);return z&&m.push(a),w+V>this.dynamicMinWidth&&(this.dynamicMinWidth=w-F+V),m},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var h=n.Text.prototype._splitTextIntoLines.call(this,c),r=this._wrapText(h.lines,this.width),l=new Array(r.length),o=0;o<r.length;o++)l[o]=r[o].join("");return h.lines=l,h.graphemeLines=r,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var h in this._styleMap)this._textLines[h]&&(c[this._styleMap[h].line]=1);for(var h in this.styles)c[h]||delete this.styles[h]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),n.Textbox.fromObject=function(c,h){var r=n.util.stylesFromArray(c.styles,c.text),l=Object.assign({},c,{styles:r});return n.Object._fromObject("Textbox",l,h,"text")}}(s),function(){var u=t.controlsUtils,n=u.scaleSkewCursorStyleHandler,c=u.scaleCursorStyleHandler,h=u.scalingEqually,r=u.scalingYOrSkewingX,l=u.scalingXOrSkewingY,o=u.scaleOrSkewActionName,f=t.Object.prototype.controls;if(f.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:n,actionHandler:l,getActionName:o}),f.mr=new t.Control({x:.5,y:0,cursorStyleHandler:n,actionHandler:l,getActionName:o}),f.mb=new t.Control({x:0,y:.5,cursorStyleHandler:n,actionHandler:r,getActionName:o}),f.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:n,actionHandler:r,getActionName:o}),f.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:h}),f.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:h}),f.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:h}),f.br=new t.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:h}),f.mtr=new t.Control({x:0,y:-.5,actionHandler:u.rotationWithSnapping,cursorStyleHandler:u.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var m=t.Textbox.prototype.controls={};m.mtr=f.mtr,m.tr=f.tr,m.br=f.br,m.tl=f.tl,m.bl=f.bl,m.mt=f.mt,m.mb=f.mb,m.mr=new t.Control({x:.5,y:0,actionHandler:u.changeWidth,cursorStyleHandler:n,actionName:"resizing"}),m.ml=new t.Control({x:-.5,y:0,actionHandler:u.changeWidth,cursorStyleHandler:n,actionName:"resizing"})}}(),function(){t.Object.ENLIVEN_PROPS.push("eraser");var u=t.Object.prototype._drawClipPath,n=t.Object.prototype.needsItsOwnCache,c=t.Object.prototype.toObject,h=t.Object.prototype.getSvgCommons,r=t.Object.prototype._createBaseClipPathSVGMarkup,l=t.Object.prototype._createBaseSVGMarkup;t.Object.prototype.cacheProperties.push("eraser"),t.Object.prototype.stateProperties.push("eraser"),t.util.object.extend(t.Object.prototype,{erasable:!0,eraser:void 0,needsItsOwnCache:function(){return n.call(this)||!!this.eraser},_drawClipPath:function(m,a){if(u.call(this,m,a),this.eraser){var p=this._getNonTransformedDimensions();this.eraser.isType("eraser")&&this.eraser.set({width:p.x,height:p.y}),u.call(this,m,this.eraser)}},toObject:function(m){var a=c.call(this,["erasable"].concat(m));return this.eraser&&!this.eraser.excludeFromExport&&(a.eraser=this.eraser.toObject(m)),a},getSvgCommons:function(){return h.call(this)+(this.eraser?'mask="url(#'+this.eraser.clipPathId+')" ':"")},_createEraserSVGMarkup:function(m){return this.eraser?(this.eraser.clipPathId="MASK_"+t.Object.__uid++,['<mask id="',this.eraser.clipPathId,'" >',this.eraser.toSVG(m),"</mask>",`
`].join("")):""},_createBaseClipPathSVGMarkup:function(m,a){return[this._createEraserSVGMarkup(a&&a.reviver),r.call(this,m,a)].join("")},_createBaseSVGMarkup:function(m,a){return[this._createEraserSVGMarkup(a&&a.reviver),l.call(this,m,a)].join("")}});var o=t.Group.prototype._restoreObjectsState;t.util.object.extend(t.Group.prototype,{_addEraserPathToObjects:function(m){this._objects.forEach(function(a){t.EraserBrush.prototype._addPathToObjectEraser.call(t.EraserBrush.prototype,a,m)})},applyEraserToObjects:function(){var m=this,a=this.eraser;if(a){delete this.eraser;var p=m.calcTransformMatrix();a.clone(function(v){var b=m.clipPath;v.getObjects("path").forEach(function(y){var C=t.util.multiplyTransformMatrices(p,y.calcTransformMatrix());t.util.applyTransformToObject(y,C),b?b.clone(function(S){var w=t.EraserBrush.prototype.applyClipPathToPath.call(t.EraserBrush.prototype,y,S,p);m._addEraserPathToObjects(w)},["absolutePositioned","inverted"]):m._addEraserPathToObjects(y)})})}},_restoreObjectsState:function(){return this.erasable===!0&&this.applyEraserToObjects(),o.call(this)}}),t.Eraser=t.util.createClass(t.Group,{type:"eraser",originX:"center",originY:"center",drawObject:function(m){m.save(),m.fillStyle="black",m.fillRect(-this.width/2,-this.height/2,this.width,this.height),m.restore(),this.callSuper("drawObject",m)},_getBounds:function(){},_toSVG:function(m){var a=["<g ","COMMON_PARTS",` >
`],p=-this.width/2,v=-this.height/2,b=["<rect ",'fill="white" ','x="',p,'" y="',v,'" width="',this.width,'" height="',this.height,`" />
`].join("");a.push("		",b);for(var y=0,C=this._objects.length;y<C;y++)a.push("		",this._objects[y].toSVG(m));return a.push(`</g>
`),a}}),t.Eraser.fromObject=function(m,a){var p=m.objects;t.util.enlivenObjects(p,function(v){var b=t.util.object.clone(m,!0);delete b.objects,t.util.enlivenObjectEnlivables(m,b,function(){a&&a(new t.Eraser(v,b,!0))})})};var f=t.Canvas.prototype._renderOverlay;t.util.object.extend(t.Canvas.prototype,{isErasing:function(){return this.isDrawingMode&&this.freeDrawingBrush&&this.freeDrawingBrush.type==="eraser"&&this.freeDrawingBrush._isErasing},_renderOverlay:function(m){f.call(this,m),this.isErasing()&&!this.freeDrawingBrush.inverted&&this.freeDrawingBrush._render()}}),t.EraserBrush=t.util.createClass(t.PencilBrush,{type:"eraser",inverted:!1,_isErasing:!1,_isErasable:function(m){return m.erasable!==!1},_prepareCollectionTraversal:function(m,a,p){m.forEachObject(function(v){v.forEachObject&&v.erasable==="deep"?this._prepareCollectionTraversal(v,a,p):!this.inverted&&v.erasable&&v.visible?(v.visible=!1,m.dirty=!0,p.visibility.push(v),p.collection.push(m)):this.inverted&&v.visible&&(v.erasable&&v.eraser?(v.eraser.inverted=!0,v.dirty=!0,m.dirty=!0,p.eraser.push(v),p.collection.push(m)):(v.visible=!1,m.dirty=!0,p.visibility.push(v),p.collection.push(m)))},this)},preparePattern:function(){this._patternCanvas||(this._patternCanvas=t.util.createCanvasElement());var m=this._patternCanvas;m.width=this.canvas.width,m.height=this.canvas.height;var a=m.getContext("2d");if(this.canvas._isRetinaScaling()){var p=this.canvas.getRetinaScaling();this.canvas.__initRetinaScaling(p,m,a)}var v=this.canvas.backgroundImage,b=v&&this._isErasable(v),y=this.canvas.overlayImage,C=y&&this._isErasable(y);if(!this.inverted&&(v&&!b||this.canvas.backgroundColor))b&&(this.canvas.backgroundImage=void 0),this.canvas._renderBackground(a),b&&(this.canvas.backgroundImage=v);else if(this.inverted&&v&&b){var S=this.canvas.backgroundColor;this.canvas.backgroundColor=void 0,this.canvas._renderBackground(a),this.canvas.backgroundColor=S}a.save(),a.transform.apply(a,this.canvas.viewportTransform);var w={visibility:[],eraser:[],collection:[]};if(this._prepareCollectionTraversal(this.canvas,a,w),this.canvas._renderObjects(a,this.canvas._objects),w.visibility.forEach(function(k){k.visible=!0}),w.eraser.forEach(function(k){k.eraser.inverted=!1,k.dirty=!0}),w.collection.forEach(function(k){k.dirty=!0}),a.restore(),!this.inverted&&(y&&!C||this.canvas.overlayColor))C&&(this.canvas.overlayImage=void 0),f.call(this.canvas,a),C&&(this.canvas.overlayImage=y);else if(this.inverted&&y&&C){var S=this.canvas.overlayColor;this.canvas.overlayColor=void 0,f.call(this.canvas,a),this.canvas.overlayColor=S}},_setBrushStyles:function(m){this.callSuper("_setBrushStyles",m),m.strokeStyle="black"},_saveAndTransform:function(m){this.callSuper("_saveAndTransform",m),this._setBrushStyles(m),m.globalCompositeOperation=m===this.canvas.getContext()?"destination-out":"source-over"},needsFullRender:function(){return!0},onMouseDown:function(m,a){this.canvas._isMainEvent(a.e)&&(this._prepareForDrawing(m),this._captureDrawingPath(m),this.preparePattern(),this._isErasing=!0,this.canvas.fire("erasing:start"),this._render())},_render:function(){var m;this.inverted||(m=this.canvas.getContext(),this.callSuper("_render",m)),m=this.canvas.contextTop,this.canvas.clearContext(m),this.callSuper("_render",m),m.save();var a=this.canvas.getRetinaScaling(),p=1/a;m.scale(p,p),m.globalCompositeOperation="source-in",m.drawImage(this._patternCanvas,0,0),m.restore()},createPath:function(m){var a=this.callSuper("createPath",m);return a.globalCompositeOperation=this.inverted?"source-over":"destination-out",a.stroke=this.inverted?"white":"black",a},applyClipPathToPath:function(m,a,p){var v=t.util.invertTransform(m.calcTransformMatrix()),b=a.calcTransformMatrix(),y=a.absolutePositioned?v:t.util.multiplyTransformMatrices(v,p);return a.absolutePositioned=!1,t.util.applyTransformToObject(a,t.util.multiplyTransformMatrices(y,b)),m.clipPath=m.clipPath?t.util.mergeClipPaths(a,m.clipPath):a,m},clonePathWithClipPath:function(m,a,p){var v=a.calcTransformMatrix(),b=a.clipPath,y=this;m.clone(function(C){b.clone(function(S){p(y.applyClipPathToPath(C,S,v))},["absolutePositioned","inverted"])})},_addPathToObjectEraser:function(m,a){var p=this;if(m.forEachObject&&m.erasable==="deep"){var v=m._objects.filter(function(y){return y.erasable});v.length>0&&m.clipPath?this.clonePathWithClipPath(a,m,function(y){v.forEach(function(C){p._addPathToObjectEraser(C,y)})}):v.length>0&&v.forEach(function(y){p._addPathToObjectEraser(y,a)});return}var b=m.eraser;b||(b=new t.Eraser,m.eraser=b),a.clone(function(y){var C=t.util.multiplyTransformMatrices(t.util.invertTransform(m.calcTransformMatrix()),y.calcTransformMatrix());t.util.applyTransformToObject(y,C),b.addWithUpdate(y),m.set("dirty",!0),m.fire("erasing:end",{path:y}),m.group&&Array.isArray(p.__subTargets)&&p.__subTargets.push(m)})},applyEraserToCanvas:function(m){var a=this.canvas,p={};return["backgroundImage","overlayImage"].forEach(function(v){var b=a[v];b&&b.erasable&&(this._addPathToObjectEraser(b,m),p[v]=b)},this),p},_finalizeAndAddPath:function(){var m=this.canvas.contextTop,a=this.canvas;m.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate)),a.clearContext(a.contextTop),this._isErasing=!1;var p=this._points&&this._points.length>1?this.convertPointsToSVGPath(this._points):null;if(!p||this._isEmptySVGPath(p)){a.fire("erasing:end"),a.requestRenderAll();return}var v=this.createPath(p);v.setCoords(),a.fire("before:path:created",{path:v});var b=this.applyEraserToCanvas(v),y=this;this.__subTargets=[];var C=[];a.forEachObject(function(S){S.erasable&&S.intersectsWithObject(v,!0,!0)&&(y._addPathToObjectEraser(S,v),C.push(S))}),a.fire("erasing:end",{path:v,targets:C,subTargets:this.__subTargets,drawables:b}),delete this.__subTargets,a.requestRenderAll(),this._resetShadow(),a.fire("path:created",{path:v})}})}()})(fe);const Zh=(s,t=1e3)=>{let e;return(...i)=>{clearTimeout(e),e=setTimeout(()=>{s(...i)},t)}},Qe=ce(2),Ze=ce("#000000"),ve=ce("select"),ji=ce(!1),Lo=ce(null),lr=ce(null);class $h{constructor(t){Xt(this,"isDrawing",ce(!1));Xt(this,"subscribeToStrokeWidth",null);Xt(this,"subscribeToStrokeColor",null);Xt(this,"clearBoard",()=>{this.canvas.clear(),this.resetEvents()});Xt(this,"resetZoom",()=>{this.resetEvents(),this.canvas.setZoom(1)});Xt(this,"resetEvents",()=>{ve.set("select"),this.canvas.defaultCursor="default",this.canvas.off(),this.canvas.isDrawingMode=!1,document.querySelectorAll(".fabric-toolbar-button.btn-neutral").forEach(t=>{t.classList.remove("btn-neutral"),t.classList.add("btn-ghost")}),this.subscribeToStrokeWidth&&this.subscribeToStrokeWidth(),this.subscribeToStrokeColor&&this.subscribeToStrokeColor(),this.setZoom()});Xt(this,"setZoom",()=>{this.canvas.on("mouse:wheel",t=>{var e=t.e.deltaY,i=this.canvas.getZoom();i*=.999**e,i>1&&(i=1),i<.01&&(i=.01),this.canvas.setZoom(i),t.e.preventDefault(),t.e.stopPropagation()})});Xt(this,"activateEraser",()=>{this.resetEvents(),setTimeout(()=>{ve.set("eraser"),this.canvas.freeDrawingBrush=new fe.fabric.EraserBrush(this.canvas),this.canvas.isDrawingMode=!0,this.canvas.freeDrawingBrush.width=30},100),this.canvas.on("mouse:up",()=>{this.saveBoard()})});Xt(this,"drawline",t=>{this.resetEvents(),setTimeout(()=>{ve.set("line"),this.canvas.defaultCursor="crosshair";let e;this.canvas.on("mouse:down",i=>{this.isDrawing.set(!0);let g=this.canvas.getPointer(i.e),d=[g.x,g.y,g.x,g.y];e=new fe.fabric.Line(d,{strokeWidth:ee(Qe),stroke:ee(Ze)}),this.canvas.add(e),this.canvas.renderAll()}),this.canvas.on("mouse:move",i=>{if(!ee(this.isDrawing))return;let g=this.canvas.getPointer(i.e);e.set({x2:g.x,y2:g.y}),this.canvas.renderAll()}),this.canvas.on("mouse:up",()=>{this.isDrawing.set(!1),this.saveBoard()})},100)});Xt(this,"drawRect",t=>{this.resetEvents(),setTimeout(()=>{ve.set("rect"),this.canvas.defaultCursor="crosshair";let e;this.canvas.on("mouse:down",i=>{this.isDrawing.set(!0);let g=this.canvas.getPointer(i.e),d={x:g.x,y:g.y},_={x:g.x,y:g.y};e=new fe.fabric.Rect({left:d.x,top:d.y,width:_.x-d.x,height:_.y-d.y,strokeWidth:ee(Qe),stroke:ee(Ze),fill:"transparent"}),this.canvas.add(e),this.canvas.renderAll()}),this.canvas.on("mouse:move",i=>{if(!ee(this.isDrawing))return;let g=this.canvas.getPointer(i.e);e&&e.left&&e.top&&(e.set({width:g.x-e.left,height:g.y-e.top}),this.canvas.renderAll())}),this.canvas.on("mouse:up",()=>{this.isDrawing.set(!1),this.saveBoard()})},100)});Xt(this,"drawCircle",t=>{this.resetEvents(),setTimeout(()=>{ve.set("circle"),this.canvas.defaultCursor="crosshair";let e;this.canvas.on("mouse:down",i=>{this.isDrawing.set(!0);let g=this.canvas.getPointer(i.e),d={x:g.x,y:g.y},_={x:g.x,y:g.y},u=Math.abs((_.x-d.x)/2);e=new fe.fabric.Circle({left:d.x-u,top:d.y-u,radius:u,strokeWidth:ee(Qe),stroke:ee(Ze),fill:"transparent"}),this.canvas.add(e),this.canvas.renderAll()}),this.canvas.on("mouse:move",i=>{if(!ee(this.isDrawing))return;let g=this.canvas.getPointer(i.e);if(e&&e.left){let d=Math.abs((g.x-e.left)/2);e.set({radius:d}),this.canvas.renderAll()}}),this.canvas.on("mouse:up",()=>{this.isDrawing.set(!1),this.saveBoard()})},100)});Xt(this,"drawFreeform",t=>{this.resetEvents(),setTimeout(()=>{ve.set("freeform"),this.canvas.freeDrawingBrush=new fe.fabric.PencilBrush(this.canvas),this.canvas.isDrawingMode=!0,this.subscribeToStrokeWidth=Qe.subscribe(e=>{this.canvas.freeDrawingBrush.width=e}),this.subscribeToStrokeColor=Ze.subscribe(e=>{this.canvas.freeDrawingBrush.color=e}),this.canvas.on("mouse:down",()=>{this.isDrawing.set(!0)}),this.canvas.on("mouse:up",()=>{this.isDrawing.set(!1),this.saveBoard()})},100)});Xt(this,"addText",(t="Edit me")=>{this.resetEvents(),setTimeout(()=>{ve.set("select");const e=new fe.fabric.IText(t,{left:50,top:50,fontSize:ee(Qe)*10,fill:ee(Ze)});this.canvas.add(e),this.saveBoard()},100)});Xt(this,"pasteItem",(t=null)=>{this.resetEvents(),setTimeout(async()=>{},100)});Xt(this,"startTakingScreenshot",async()=>{this.resetEvents(),setTimeout(async()=>{const t=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"window",width:{ideal:1920,max:1920},height:{ideal:1080,max:1080}}}),e=t.getVideoTracks()[0];new ImageCapture(e).grabFrame().then(function(g){console.log(g);const d=document.getElementById("capturedStill");d.width=window.innerWidth,d.height=window.innerHeight,d.getContext("2d").drawImage(g,0,0,window.innerWidth,window.innerHeight)}),setTimeout(()=>{t.getTracks().forEach(g=>g.stop())},1e3),ji.set(!0)},100)});Xt(this,"saveBoard",Zh(()=>{lr.set(this.canvas.toJSON())}));Xt(this,"setFixed",t=>{this.canvas.getObjects().forEach(e=>{e.lockMovementX=t,e.lockMovementY=t})});Xt(this,"enterDragMode",()=>{this.resetEvents(),setTimeout(()=>{ve.set("move");let t=!1,e,i;this.canvas.discardActiveObject(),this.canvas.defaultCursor="move",this.canvas.on("mouse:up",g=>{t=!1}),this.canvas.on("mouse:down",g=>{t=!0,e=g.e.clientX,i=g.e.clientY}),this.canvas.on("mouse:move",g=>{if(!t)return;let d=0,_=0;e&&(d=g.e.clientX-e),i&&(_=g.e.clientY-i),e=g.e.clientX,i=g.e.clientY;let u=new fe.fabric.Point(d,_);this.canvas.relativePan(u)})},100)});Xt(this,"finishTakingScreenshot",t=>{let e=t;fe.fabric.Image.fromURL(e,i=>{console.log(e),i.set({left:100,top:100}),this.canvas.add(i),this.canvas.renderAll(),this.saveBoard()})});this.canvas=t,this.isDrawing.subscribe(e=>{this.setFixed(e)}),document.onkeydown=e=>{e.key==="Delete"&&this.canvas.getActiveObjects().forEach(i=>{this.canvas.remove(i)})},document.addEventListener("paste",e=>{const i=e.clipboardData;if(i){const g=i.items;let d=null;g.length>0&&(d=g[0].kind),this.pasteItem(d)}}),ee(lr)&&this.canvas.loadFromJSON(ee(lr),async()=>{}),this.setZoom()}}function td(s){let t;return{c(){t=Pt("Whiteboard")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function ed(s){let t,e;return t=new Ft({props:{name:"adjustments-horizontal"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function id(s){let t;return{c(){t=Pt("Select Tool")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function nd(s){let t,e;return t=new Ft({props:{name:"pointer-filled"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function rd(s){let t;return{c(){t=Pt("Select")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function sd(s){let t,e;return t=new Ft({props:{name:"arrows-move"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function od(s){let t;return{c(){t=Pt("Move")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function ad(s){let t,e;return t=new Ft({props:{name:"zoom-reset"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function ld(s){let t;return{c(){t=Pt("Reset Zoom")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function cd(s){let t,e;return t=new Ft({props:{name:"eraser"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function fd(s){let t;return{c(){t=Pt("Eraser")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function ud(s){let t,e;return t=new Ft({props:{name:"screenshot"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function hd(s){let t;return{c(){t=Pt("Screenshot")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function dd(s){let t,e;return t=new Ft({props:{name:"slash"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function gd(s){let t;return{c(){t=Pt("Line")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function md(s){let t,e;return t=new Ft({props:{name:"scribble"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function pd(s){let t;return{c(){t=Pt("Scribble")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function vd(s){let t,e;return t=new Ft({props:{name:"circle"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function _d(s){let t;return{c(){t=Pt("Circle")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function bd(s){let t,e;return t=new Ft({props:{name:"rectangle"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function yd(s){let t;return{c(){t=Pt("Rectangle")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function Cd(s){let t,e;return t=new Ft({props:{name:"typography"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Sd(s){let t;return{c(){t=Pt("Text")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function wd(s){let t,e;return t=new Ft({props:{name:"trash-filled"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Td(s){let t;return{c(){t=Pt("Clear")},m(e,i){st(e,t,i)},d(e){e&&it(t)}}}function xd(s){let t,e,i,g,d,_,u,n,c,h,r,l,o,f,m,a,p,v,b,y,C,S,w,k,F,V,z,Y,et,H,Q,ct,G,lt,T,L,D,E,U,x,O,I,W,Z,q,nt,at,ht,J,N,tt,$,K,rt,dt,_t;return i=new xt({props:{color:s[5]==="select"?"dark":"",$$slots:{default:[nd]},$$scope:{ctx:s}}}),i.$on("click",function(){$t(s[4].resetEvents)&&s[4].resetEvents.apply(this,arguments)}),d=new jt({props:{placement:"top",$$slots:{default:[rd]},$$scope:{ctx:s}}}),n=new xt({props:{color:s[5]==="move"?"dark":"",$$slots:{default:[sd]},$$scope:{ctx:s}}}),n.$on("click",function(){$t(s[4].enterDragMode)&&s[4].enterDragMode.apply(this,arguments)}),h=new jt({props:{placement:"top",$$slots:{default:[od]},$$scope:{ctx:s}}}),o=new xt({props:{$$slots:{default:[ad]},$$scope:{ctx:s}}}),o.$on("click",function(){$t(s[4].resetZoom)&&s[4].resetZoom.apply(this,arguments)}),m=new jt({props:{placement:"top",$$slots:{default:[ld]},$$scope:{ctx:s}}}),v=new xt({props:{color:s[5]==="eraser"?"dark":"",$$slots:{default:[cd]},$$scope:{ctx:s}}}),v.$on("click",function(){$t(s[4].activateEraser)&&s[4].activateEraser.apply(this,arguments)}),y=new jt({props:{placement:"top",$$slots:{default:[fd]},$$scope:{ctx:s}}}),w=new xt({props:{$$slots:{default:[ud]},$$scope:{ctx:s}}}),w.$on("click",function(){$t(s[4].startTakingScreenshot)&&s[4].startTakingScreenshot.apply(this,arguments)}),F=new jt({props:{placement:"top",$$slots:{default:[hd]},$$scope:{ctx:s}}}),Y=new xt({props:{color:s[5]==="line"?"dark":"",$$slots:{default:[dd]},$$scope:{ctx:s}}}),Y.$on("click",function(){$t(s[4].drawline)&&s[4].drawline.apply(this,arguments)}),H=new jt({props:{placement:"top",$$slots:{default:[gd]},$$scope:{ctx:s}}}),G=new xt({props:{color:s[5]==="freeform"?"dark":"",$$slots:{default:[md]},$$scope:{ctx:s}}}),G.$on("click",function(){$t(s[4].drawFreeform)&&s[4].drawFreeform.apply(this,arguments)}),T=new jt({props:{placement:"top",$$slots:{default:[pd]},$$scope:{ctx:s}}}),E=new xt({props:{color:s[5]==="circle"?"dark":"",$$slots:{default:[vd]},$$scope:{ctx:s}}}),E.$on("click",function(){$t(s[4].drawCircle)&&s[4].drawCircle.apply(this,arguments)}),x=new jt({props:{placement:"top",$$slots:{default:[_d]},$$scope:{ctx:s}}}),W=new xt({props:{color:s[5]==="rect"?"dark":"",$$slots:{default:[bd]},$$scope:{ctx:s}}}),W.$on("click",function(){$t(s[4].drawRect)&&s[4].drawRect.apply(this,arguments)}),q=new jt({props:{placement:"top",$$slots:{default:[yd]},$$scope:{ctx:s}}}),ht=new xt({props:{$$slots:{default:[Cd]},$$scope:{ctx:s}}}),ht.$on("click",s[11]),N=new jt({props:{placement:"top",$$slots:{default:[Sd]},$$scope:{ctx:s}}}),K=new xt({props:{color:"warning",$$slots:{default:[wd]},$$scope:{ctx:s}}}),K.$on("click",function(){$t(s[4].clearBoard)&&s[4].clearBoard.apply(this,arguments)}),dt=new jt({props:{placement:"top",$$slots:{default:[Td]},$$scope:{ctx:s}}}),{c(){t=mt("div"),e=mt("div"),B(i.$$.fragment),g=ft(),B(d.$$.fragment),_=ft(),u=mt("div"),B(n.$$.fragment),c=ft(),B(h.$$.fragment),r=ft(),l=mt("div"),B(o.$$.fragment),f=ft(),B(m.$$.fragment),a=ft(),p=mt("div"),B(v.$$.fragment),b=ft(),B(y.$$.fragment),C=ft(),S=mt("div"),B(w.$$.fragment),k=ft(),B(F.$$.fragment),V=ft(),z=mt("div"),B(Y.$$.fragment),et=ft(),B(H.$$.fragment),Q=ft(),ct=mt("div"),B(G.$$.fragment),lt=ft(),B(T.$$.fragment),L=ft(),D=mt("div"),B(E.$$.fragment),U=ft(),B(x.$$.fragment),O=ft(),I=mt("div"),B(W.$$.fragment),Z=ft(),B(q.$$.fragment),nt=ft(),at=mt("div"),B(ht.$$.fragment),J=ft(),B(N.$$.fragment),tt=ft(),$=mt("div"),B(K.$$.fragment),rt=ft(),B(dt.$$.fragment),St(t,"class","grid grid-cols-3 gap-2")},m(ot,X){st(ot,t,X),ut(t,e),R(i,e,null),ut(e,g),R(d,e,null),ut(t,_),ut(t,u),R(n,u,null),ut(u,c),R(h,u,null),ut(t,r),ut(t,l),R(o,l,null),ut(l,f),R(m,l,null),ut(t,a),ut(t,p),R(v,p,null),ut(p,b),R(y,p,null),ut(t,C),ut(t,S),R(w,S,null),ut(S,k),R(F,S,null),ut(t,V),ut(t,z),R(Y,z,null),ut(z,et),R(H,z,null),ut(t,Q),ut(t,ct),R(G,ct,null),ut(ct,lt),R(T,ct,null),ut(t,L),ut(t,D),R(E,D,null),ut(D,U),R(x,D,null),ut(t,O),ut(t,I),R(W,I,null),ut(I,Z),R(q,I,null),ut(t,nt),ut(t,at),R(ht,at,null),ut(at,J),R(N,at,null),ut(t,tt),ut(t,$),R(K,$,null),ut($,rt),R(dt,$,null),_t=!0},p(ot,X){s=ot;const pt={};X&32&&(pt.color=s[5]==="select"?"dark":""),X&524288&&(pt.$$scope={dirty:X,ctx:s}),i.$set(pt);const bt={};X&524288&&(bt.$$scope={dirty:X,ctx:s}),d.$set(bt);const wt={};X&32&&(wt.color=s[5]==="move"?"dark":""),X&524288&&(wt.$$scope={dirty:X,ctx:s}),n.$set(wt);const Dt={};X&524288&&(Dt.$$scope={dirty:X,ctx:s}),h.$set(Dt);const Ot={};X&524288&&(Ot.$$scope={dirty:X,ctx:s}),o.$set(Ot);const Gt={};X&524288&&(Gt.$$scope={dirty:X,ctx:s}),m.$set(Gt);const It={};X&32&&(It.color=s[5]==="eraser"?"dark":""),X&524288&&(It.$$scope={dirty:X,ctx:s}),v.$set(It);const Zt={};X&524288&&(Zt.$$scope={dirty:X,ctx:s}),y.$set(Zt);const ae={};X&524288&&(ae.$$scope={dirty:X,ctx:s}),w.$set(ae);const Jt={};X&524288&&(Jt.$$scope={dirty:X,ctx:s}),F.$set(Jt);const ge={};X&32&&(ge.color=s[5]==="line"?"dark":""),X&524288&&(ge.$$scope={dirty:X,ctx:s}),Y.$set(ge);const me={};X&524288&&(me.$$scope={dirty:X,ctx:s}),H.$set(me);const pe={};X&32&&(pe.color=s[5]==="freeform"?"dark":""),X&524288&&(pe.$$scope={dirty:X,ctx:s}),G.$set(pe);const Se={};X&524288&&(Se.$$scope={dirty:X,ctx:s}),T.$set(Se);const Pe={};X&32&&(Pe.color=s[5]==="circle"?"dark":""),X&524288&&(Pe.$$scope={dirty:X,ctx:s}),E.$set(Pe);const Fe={};X&524288&&(Fe.$$scope={dirty:X,ctx:s}),x.$set(Fe);const Ee={};X&32&&(Ee.color=s[5]==="rect"?"dark":""),X&524288&&(Ee.$$scope={dirty:X,ctx:s}),W.$set(Ee);const Ie={};X&524288&&(Ie.$$scope={dirty:X,ctx:s}),q.$set(Ie);const Re={};X&524288&&(Re.$$scope={dirty:X,ctx:s}),ht.$set(Re);const je={};X&524288&&(je.$$scope={dirty:X,ctx:s}),N.$set(je);const Be={};X&524288&&(Be.$$scope={dirty:X,ctx:s}),K.$set(Be);const Ne={};X&524288&&(Ne.$$scope={dirty:X,ctx:s}),dt.$set(Ne)},i(ot){_t||(P(i.$$.fragment,ot),P(d.$$.fragment,ot),P(n.$$.fragment,ot),P(h.$$.fragment,ot),P(o.$$.fragment,ot),P(m.$$.fragment,ot),P(v.$$.fragment,ot),P(y.$$.fragment,ot),P(w.$$.fragment,ot),P(F.$$.fragment,ot),P(Y.$$.fragment,ot),P(H.$$.fragment,ot),P(G.$$.fragment,ot),P(T.$$.fragment,ot),P(E.$$.fragment,ot),P(x.$$.fragment,ot),P(W.$$.fragment,ot),P(q.$$.fragment,ot),P(ht.$$.fragment,ot),P(N.$$.fragment,ot),P(K.$$.fragment,ot),P(dt.$$.fragment,ot),_t=!0)},o(ot){M(i.$$.fragment,ot),M(d.$$.fragment,ot),M(n.$$.fragment,ot),M(h.$$.fragment,ot),M(o.$$.fragment,ot),M(m.$$.fragment,ot),M(v.$$.fragment,ot),M(y.$$.fragment,ot),M(w.$$.fragment,ot),M(F.$$.fragment,ot),M(Y.$$.fragment,ot),M(H.$$.fragment,ot),M(G.$$.fragment,ot),M(T.$$.fragment,ot),M(E.$$.fragment,ot),M(x.$$.fragment,ot),M(W.$$.fragment,ot),M(q.$$.fragment,ot),M(ht.$$.fragment,ot),M(N.$$.fragment,ot),M(K.$$.fragment,ot),M(dt.$$.fragment,ot),_t=!1},d(ot){ot&&it(t),j(i),j(d),j(n),j(h),j(o),j(m),j(v),j(y),j(w),j(F),j(Y),j(H),j(G),j(T),j(E),j(x),j(W),j(q),j(ht),j(N),j(K),j(dt)}}}function Od(s){let t,e,i,g;return t=new Po({props:{$$slots:{default:[id]},$$scope:{ctx:s}}}),i=new Ao({props:{$$slots:{default:[xd]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&524288&&(u.$$scope={dirty:_,ctx:d}),t.$set(u);const n={};_&524336&&(n.$$scope={dirty:_,ctx:d}),i.$set(n)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function Ds(s){let t,e,i,g;return t=new xt({props:{$$slots:{default:[kd]},$$scope:{ctx:s}}}),t.$on("click",s[12]),i=new jt({props:{text:"Show Chat"}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&524288&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function kd(s){let t,e;return t=new Ft({props:{name:"message-circle-2"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Pd(s){let t,e,i,g;return t=new xt({props:{$$slots:{default:[Ad]},$$scope:{ctx:s}}}),t.$on("click",s[10]),i=new jt({props:{text:"Minimize"}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&524288&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function Ed(s){let t,e,i,g;return t=new xt({props:{$$slots:{default:[Md]},$$scope:{ctx:s}}}),t.$on("click",s[9]),i=new jt({props:{text:"Maximize"}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&524288&&(u.$$scope={dirty:_,ctx:d}),t.$set(u)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function Ad(s){let t,e;return t=new Ft({props:{name:"arrows-minimize"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Md(s){let t,e;return t=new Ft({props:{name:"maximize"}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p:vt,i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Dd(s){let t,e,i,g,d,_,u,n,c,h,r,l,o;e=new Tt({props:{textColor:"primary",fontWeight:"bolder",fontSize:"1",$$slots:{default:[td]},$$scope:{ctx:s}}}),_=new xt({props:{$$slots:{default:[ed]},$$scope:{ctx:s}}}),n=new Eo({props:{trigger:"hover",$$slots:{default:[Od]},$$scope:{ctx:s}}});let f=s[6]&&Ds(s);const m=[Ed,Pd],a=[];function p(v,b){return v[8]?1:0}return r=p(s),l=a[r]=m[r](s),{c(){t=mt("div"),B(e.$$.fragment),i=ft(),g=mt("div"),d=mt("div"),B(_.$$.fragment),u=ft(),B(n.$$.fragment),c=ft(),f&&f.c(),h=ft(),l.c(),St(d,"class","hidden space-x-2 xl:block"),St(t,"class","flex justify-between items-center")},m(v,b){st(v,t,b),R(e,t,null),ut(t,i),ut(t,g),ut(g,d),R(_,d,null),ut(d,u),R(n,d,null),ut(d,c),f&&f.m(d,null),ut(d,h),a[r].m(d,null),o=!0},p(v,b){const y={};b&524288&&(y.$$scope={dirty:b,ctx:v}),e.$set(y);const C={};b&524288&&(C.$$scope={dirty:b,ctx:v}),_.$set(C);const S={};b&524336&&(S.$$scope={dirty:b,ctx:v}),n.$set(S),v[6]?f?(f.p(v,b),b&64&&P(f,1)):(f=Ds(v),f.c(),P(f,1),f.m(d,h)):f&&(Bt(),M(f,1,1,()=>{f=null}),Nt());let w=r;r=p(v),r===w?a[r].p(v,b):(Bt(),M(a[w],1,1,()=>{a[w]=null}),Nt(),l=a[r],l?l.p(v,b):(l=a[r]=m[r](v),l.c()),P(l,1),l.m(d,null))},i(v){o||(P(e.$$.fragment,v),P(_.$$.fragment,v),P(n.$$.fragment,v),P(f),P(l),o=!0)},o(v){M(e.$$.fragment,v),M(_.$$.fragment,v),M(n.$$.fragment,v),M(f),M(l),o=!1},d(v){v&&it(t),j(e),j(_),j(n),f&&f.d(),a[r].d()}}}function Ld(s){let t,e;return t=new Hi({props:{class:"w-full",$$slots:{default:[Dd]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,g){const d={};g&524784&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function Fd(s){let t,e,i;return{c(){t=mt("div"),e=mt("canvas"),St(e,"id","board"),St(t,"class","w-full h-full canvasParent svelte-1axheft"),te(()=>s[14].call(t))},m(g,d){st(g,t,d),ut(t,e),s[13](e),i=aa(t,s[14].bind(t)),s[15](t)},p:vt,d(g){g&&it(t),s[13](null),i(),s[15](null)}}}function Id(s){let t,e,i,g;return t=new Yi({props:{$$slots:{default:[Ld]},$$scope:{ctx:s}}}),i=new bi({props:{class:"h-5/6 bg-slate-100 rounded-b-2xl !p-0",$$slots:{default:[Fd]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment),e=ft(),B(i.$$.fragment)},m(d,_){R(t,d,_),st(d,e,_),R(i,d,_),g=!0},p(d,_){const u={};_&524784&&(u.$$scope={dirty:_,ctx:d}),t.$set(u);const n={};_&524303&&(n.$$scope={dirty:_,ctx:d}),i.$set(n)},i(d){g||(P(t.$$.fragment,d),P(i.$$.fragment,d),g=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),g=!1},d(d){d&&it(e),j(t,d),j(i,d)}}}function Rd(s){let t,e;return t=new _i({props:{class:"m-4 h-full flex-grow !rounded-2xl",$$slots:{default:[Id]},$$scope:{ctx:s}}}),{c(){B(t.$$.fragment)},m(i,g){R(t,i,g),e=!0},p(i,[g]){const d={};g&524799&&(d.$$scope={dirty:g,ctx:i}),t.$set(d)},i(i){e||(P(t.$$.fragment,i),e=!0)},o(i){M(t.$$.fragment,i),e=!1},d(i){j(t,i)}}}function jd(s,t,e){let i,g,d,_;Qt(s,ve,S=>e(5,i=S)),Qt(s,he,S=>e(6,g=S)),Qt(s,ye,S=>e(7,d=S)),Qt(s,be,S=>e(8,_=S));let u,n,c,h,r,l,o;const f=hi(),m=()=>f("maximize"),a=()=>f("minimize");Le(()=>{setTimeout(()=>{n&&(u=new fe.fabric.Canvas(n),e(4,o=new $h(u)),Lo.set(o))},500),l=new ResizeObserver(S=>{if(c&&(e(0,n.width=c.clientWidth,n),e(0,n.height=c.clientHeight,n),u)){const w=c.clientWidth/u.width;u.getObjects().forEach(F=>{F.scaleX=F.scaleX*w,F.scaleY=F.scaleY*w,F.left=F.left*w,F.top=F.top*w,F.setCoords()}),u.setWidth(c.clientWidth),u.setHeight(c.clientHeight),u.renderAll(),u.calcOffset()}}),l.observe(c)});const p=()=>o.addText(),v=()=>{ie(he,g=!1,g),ie(ye,d=!1,d),ie(be,_=!1,_)};function b(S){Ut[S?"unshift":"push"](()=>{n=S,e(0,n)})}function y(){h=this.clientHeight,r=this.clientWidth,e(2,h),e(3,r)}function C(S){Ut[S?"unshift":"push"](()=>{c=S,e(1,c)})}return[n,c,h,r,o,i,g,d,_,m,a,p,v,b,y,C]}class Bd extends Mt{constructor(t){super(),At(this,t,jd,Rd,Et,{})}}function Nd(s){let t,e,i,g,d,_,u,n;return{c(){t=mt("div"),e=mt("canvas"),i=ft(),g=mt("canvas"),d=ft(),_=mt("div"),St(e,"id","capturedStill"),St(g,"id","cropped"),St(_,"class",u="fixed !z-[9999] cursor-crosshair "+(s[2]?"border-red-600":"")+" svelte-14lfei7"),St(_,"id","overlay"),St(t,"class",n=(s[2]?"fixed":"hidden")+" w-100v h-100v top-0 left-0 cursor-crosshair bg-contain bg-no-repeat bg-center"),St(t,"id","screenshotContainer")},m(c,h){st(c,t,h),ut(t,e),ut(t,i),ut(t,g),ut(t,d),ut(t,_),s[3](_),s[4](t)},p(c,[h]){h&4&&u!==(u="fixed !z-[9999] cursor-crosshair "+(c[2]?"border-red-600":"")+" svelte-14lfei7")&&St(_,"class",u),h&4&&n!==(n=(c[2]?"fixed":"hidden")+" w-100v h-100v top-0 left-0 cursor-crosshair bg-contain bg-no-repeat bg-center")&&St(t,"class",n)},i:vt,o:vt,d(c){c&&it(t),s[3](null),s[4](null)}}}function Xd(s,t,e){let i,g;Qt(s,Lo,l=>e(8,i=l)),Qt(s,ji,l=>e(2,g=l));let d,_,u=!1,n,c;Le(()=>{d.addEventListener("mousedown",l=>{u=!0,n=l.clientX,c=l.clientY}),d.addEventListener("mousemove",l=>{if(!u)return;const o=l.clientX-n,f=l.clientY-c,m=o>=0?n:l.clientX,a=f>=0?c:l.clientY;e(1,_.style.top=`${a}px`,_),e(1,_.style.left=`${m}px`,_),e(1,_.style.width=`${o}px`,_),e(1,_.style.height=`${f}px`,_)}),d.addEventListener("mouseup",async l=>{u=!1;const o=Math.abs(l.clientX-n),f=Math.abs(l.clientY-c);n<l.clientX||l.clientX,c<l.clientY||l.clientY;let a=document.getElementById("capturedStill").getContext("2d").getImageData(n,c,l.clientX,l.clientY);const p=document.getElementById("cropped");p.width=o,p.height=f,p.getContext("2d").putImageData(a,0,0);const v=p.toDataURL("image/png");ie(ji,g=!1,g),i.finishTakingScreenshot(v)})});function h(l){Ut[l?"unshift":"push"](()=>{_=l,e(1,_)})}function r(l){Ut[l?"unshift":"push"](()=>{d=l,e(0,d)})}return[d,_,g,h,r]}class Wd extends Mt{constructor(t){super(),At(this,t,Xd,Nd,Et,{})}}function Ls(s){let t,e,i;return e=new Wd({}),{c(){t=mt("div"),B(e.$$.fragment),St(t,"class","w-100v h-100v z-[9999] overflow-hidden")},m(g,d){st(g,t,d),R(e,t,null),i=!0},i(g){i||(P(e.$$.fragment,g),i=!0)},o(g){M(e.$$.fragment,g),i=!1},d(g){g&&it(t),j(e)}}}function Fs(s){let t,e,i,g;return e=new Zu({}),e.$on("hideChat",s[5]),{c(){t=mt("div"),B(e.$$.fragment),St(t,"class","h-full hidden w-1/3 xl:flex")},m(d,_){st(d,t,_),R(e,t,null),g=!0},p:vt,i(d){g||(P(e.$$.fragment,d),d&&te(()=>{g&&(i||(i=qt(t,Kt,{axis:"x"},!0)),i.run(1))}),g=!0)},o(d){M(e.$$.fragment,d),d&&(i||(i=qt(t,Kt,{axis:"x"},!1)),i.run(0)),g=!1},d(d){d&&it(t),j(e),d&&i&&i.end()}}}function Is(s){let t,e,i,g,d;return e=new Bd({}),e.$on("maximize",bh),e.$on("minimize",yh),{c(){t=mt("div"),B(e.$$.fragment),St(t,"class",i="h-full hidden "+(s[4]||s[1]?s[1]?"w-2/3":"w-full":"w-1/3")+" xl:flex")},m(_,u){st(_,t,u),R(e,t,null),d=!0},p(_,u){(!d||u&18&&i!==(i="h-full hidden "+(_[4]||_[1]?_[1]?"w-2/3":"w-full":"w-1/3")+" xl:flex"))&&St(t,"class",i)},i(_){d||(P(e.$$.fragment,_),_&&te(()=>{d&&(g||(g=qt(t,Kt,{axis:"x"},!0)),g.run(1))}),d=!0)},o(_){M(e.$$.fragment,_),_&&(g||(g=qt(t,Kt,{axis:"x"},!1)),g.run(0)),d=!1},d(_){_&&it(t),j(e),_&&g&&g.end()}}}function zd(s){let t,e,i,g,d,_,u,n,c,h,r,l,o,f=s[0]&&Ls(),m=!s[1]&&Fs(s);c=new Kh({}),c.$on("maximize",vh),c.$on("minimize",_h);let a=!s[2]&&Is(s);return{c(){t=mt("link"),e=ft(),f&&f.c(),i=ft(),g=mt("div"),d=mt("div"),_=mt("div"),m&&m.c(),u=ft(),n=mt("div"),B(c.$$.fragment),l=ft(),a&&a.c(),St(t,"rel","stylesheet"),St(t,"href",Sa),document.title="Instrukti Call",St(n,"class",h="h-full flex flex-col w-full "+(s[3]?"xl:w-full":s[2]&&!s[1]?"xl:w-2/3":"xl:w-1/3")+" max-w-full"),St(_,"class","h-full w-full flex gap-4"),St(d,"class","flex flex-col h-full w-full border-2 border-black rounded-xl"),St(g,"class","w-100v h-100v bg-white p-2 overflow-hidden")},m(p,v){ut(document.head,t),st(p,e,v),f&&f.m(p,v),st(p,i,v),st(p,g,v),ut(g,d),ut(d,_),m&&m.m(_,null),ut(_,u),ut(_,n),R(c,n,null),ut(_,l),a&&a.m(_,null),o=!0},p(p,[v]){p[0]?f?v&1&&P(f,1):(f=Ls(),f.c(),P(f,1),f.m(i.parentNode,i)):f&&(Bt(),M(f,1,1,()=>{f=null}),Nt()),p[1]?m&&(Bt(),M(m,1,1,()=>{m=null}),Nt()):m?(m.p(p,v),v&2&&P(m,1)):(m=Fs(p),m.c(),P(m,1),m.m(_,u)),(!o||v&14&&h!==(h="h-full flex flex-col w-full "+(p[3]?"xl:w-full":p[2]&&!p[1]?"xl:w-2/3":"xl:w-1/3")+" max-w-full"))&&St(n,"class",h),p[2]?a&&(Bt(),M(a,1,1,()=>{a=null}),Nt()):a?(a.p(p,v),v&4&&P(a,1)):(a=Is(p),a.c(),P(a,1),a.m(_,null))},i(p){o||(P(f),P(m),P(c.$$.fragment,p),p&&te(()=>{o&&(r||(r=qt(n,Kt,{axis:"x"},!0)),r.run(1))}),P(a),o=!0)},o(p){M(f),M(m),M(c.$$.fragment,p),p&&(r||(r=qt(n,Kt,{axis:"x"},!1)),r.run(0)),M(a),o=!1},d(p){p&&(it(e),it(i),it(g)),it(t),f&&f.d(p),m&&m.d(),j(c),p&&r&&r.end(),a&&a.d()}}}function Yd(s,t,e){let i,g,d,_,u;return Qt(s,ji,c=>e(0,i=c)),Qt(s,he,c=>e(1,g=c)),Qt(s,fi,c=>e(2,d=c)),Qt(s,ye,c=>e(3,_=c)),Qt(s,be,c=>e(4,u=c)),[i,g,d,_,u,()=>{ie(he,g=!0,g),d&&ie(ye,_=!0,_)}]}class Hd extends Mt{constructor(t){super(),At(this,t,Yd,zd,Et,{})}}new Hd({target:document.getElementById("app")});export{Ud as c,Gd as g};
